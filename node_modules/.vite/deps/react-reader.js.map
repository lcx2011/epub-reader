{
  "version": 3,
  "sources": ["../../react-is/cjs/react-is.development.js", "../../react-is/index.js", "../../object-assign/index.js", "../../prop-types/lib/ReactPropTypesSecret.js", "../../prop-types/lib/has.js", "../../prop-types/checkPropTypes.js", "../../prop-types/factoryWithTypeCheckers.js", "../../prop-types/index.js", "../../epubjs/lib/utils/core.js", "../../epubjs/lib/utils/path.js", "../../epubjs/lib/utils/url.js", "../../epubjs/lib/epubcfi.js", "../../epubjs/lib/utils/hook.js", "../../epubjs/lib/utils/replacements.js", "../../epubjs/lib/utils/request.js", "../../epubjs/lib/section.js", "../../epubjs/lib/spine.js", "../../epubjs/lib/utils/queue.js", "../../epubjs/lib/utils/constants.js", "../../epubjs/lib/locations.js", "../../epubjs/lib/container.js", "../../epubjs/lib/packaging.js", "../../epubjs/lib/navigation.js", "../../epubjs/lib/utils/mime.js", "../../epubjs/lib/resources.js", "../../epubjs/lib/pagelist.js", "../../epubjs/lib/layout.js", "../../epubjs/lib/themes.js", "../../epubjs/lib/mapping.js", "../../epubjs/lib/contents.js", "../../epubjs/lib/annotations.js", "../../epubjs/lib/managers/views/iframe.js", "../../epubjs/lib/utils/scrolltype.js", "../../epubjs/lib/managers/helpers/stage.js", "../../epubjs/lib/managers/helpers/views.js", "../../epubjs/lib/managers/default/index.js", "../../epubjs/lib/managers/helpers/snap.js", "../../epubjs/lib/managers/continuous/index.js", "../../epubjs/lib/rendition.js", "../../epubjs/lib/archive.js", "../../epubjs/lib/store.js", "../../epubjs/lib/displayoptions.js", "../../epubjs/lib/book.js", "../../epubjs/lib/epub.js", "../../epubjs/lib/index.js", "../../react-reader/lib/EpubView/style.js", "../../react-reader/lib/EpubView/EpubView.js", "../../react-swipeable/src/types.ts", "../../react-swipeable/src/index.ts", "../../react-reader/lib/ReactReader/style.js", "../../react-reader/lib/ReactReader/ReactReader.js", "../../react-reader/lib/index.js"],
  "sourcesContent": ["/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n", "'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n", "/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n", "/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n", "module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n", "/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n", "/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n", "/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RangeObject = void 0;\nexports.blob2base64 = blob2base64;\nexports.borders = borders;\nexports.bounds = bounds;\nexports.createBase64Url = createBase64Url;\nexports.createBlob = createBlob;\nexports.createBlobUrl = createBlobUrl;\nexports.defaults = defaults;\nexports.defer = defer;\nexports.documentHeight = documentHeight;\nexports.extend = extend;\nexports.filterChildren = filterChildren;\nexports.findChildren = findChildren;\nexports.getParentByTagName = getParentByTagName;\nexports.indexOfElementNode = indexOfElementNode;\nexports.indexOfNode = indexOfNode;\nexports.indexOfSorted = indexOfSorted;\nexports.indexOfTextNode = indexOfTextNode;\nexports.insert = insert;\nexports.isElement = isElement;\nexports.isFloat = isFloat;\nexports.isNumber = isNumber;\nexports.isXml = isXml;\nexports.locationOf = locationOf;\nexports.nodeBounds = nodeBounds;\nexports.parents = parents;\nexports.parse = parse;\nexports.prefixed = prefixed;\nexports.qs = qs;\nexports.qsa = qsa;\nexports.qsp = qsp;\nexports.querySelectorByType = querySelectorByType;\nexports.requestAnimationFrame = void 0;\nexports.revokeBlobUrl = revokeBlobUrl;\nexports.sprint = sprint;\nexports.treeWalker = treeWalker;\nexports.type = type;\nexports.uuid = uuid;\nexports.walk = walk;\nexports.windowBounds = windowBounds;\n\nvar _xmldom = require(\"@xmldom/xmldom\");\n\n/**\n * Core Utilities and Helpers\n * @module Core\n*/\n\n/**\n * Vendor prefixed requestAnimationFrame\n * @returns {function} requestAnimationFrame\n * @memberof Core\n */\nconst requestAnimationFrame = typeof window != \"undefined\" ? window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame : false;\nexports.requestAnimationFrame = requestAnimationFrame;\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\n\nconst _URL = typeof URL != \"undefined\" ? URL : typeof window != \"undefined\" ? window.URL || window.webkitURL || window.mozURL : undefined;\n/**\n * Generates a UUID\n * based on: http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n * @returns {string} uuid\n * @memberof Core\n */\n\n\nfunction uuid() {\n  var d = new Date().getTime();\n  var uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c == \"x\" ? r : r & 0x7 | 0x8).toString(16);\n  });\n  return uuid;\n}\n/**\n * Gets the height of a document\n * @returns {number} height\n * @memberof Core\n */\n\n\nfunction documentHeight() {\n  return Math.max(document.documentElement.clientHeight, document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight);\n}\n/**\n * Checks if a node is an element\n * @param {object} obj\n * @returns {boolean}\n * @memberof Core\n */\n\n\nfunction isElement(obj) {\n  return !!(obj && obj.nodeType == 1);\n}\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\n\n\nfunction isNumber(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n}\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\n\n\nfunction isFloat(n) {\n  let f = parseFloat(n);\n\n  if (isNumber(n) === false) {\n    return false;\n  }\n\n  if (typeof n === \"string\" && n.indexOf(\".\") > -1) {\n    return true;\n  }\n\n  return Math.floor(f) !== f;\n}\n/**\n * Get a prefixed css property\n * @param {string} unprefixed\n * @returns {string}\n * @memberof Core\n */\n\n\nfunction prefixed(unprefixed) {\n  var vendors = [\"Webkit\", \"webkit\", \"Moz\", \"O\", \"ms\"];\n  var prefixes = [\"-webkit-\", \"-webkit-\", \"-moz-\", \"-o-\", \"-ms-\"];\n  var lower = unprefixed.toLowerCase();\n  var length = vendors.length;\n\n  if (typeof document === \"undefined\" || typeof document.body.style[lower] != \"undefined\") {\n    return unprefixed;\n  }\n\n  for (var i = 0; i < length; i++) {\n    if (typeof document.body.style[prefixes[i] + lower] != \"undefined\") {\n      return prefixes[i] + lower;\n    }\n  }\n\n  return unprefixed;\n}\n/**\n * Apply defaults to an object\n * @param {object} obj\n * @returns {object}\n * @memberof Core\n */\n\n\nfunction defaults(obj) {\n  for (var i = 1, length = arguments.length; i < length; i++) {\n    var source = arguments[i];\n\n    for (var prop in source) {\n      if (obj[prop] === void 0) obj[prop] = source[prop];\n    }\n  }\n\n  return obj;\n}\n/**\n * Extend properties of an object\n * @param {object} target\n * @returns {object}\n * @memberof Core\n */\n\n\nfunction extend(target) {\n  var sources = [].slice.call(arguments, 1);\n  sources.forEach(function (source) {\n    if (!source) return;\n    Object.getOwnPropertyNames(source).forEach(function (propName) {\n      Object.defineProperty(target, propName, Object.getOwnPropertyDescriptor(source, propName));\n    });\n  });\n  return target;\n}\n/**\n * Fast quicksort insert for sorted array -- based on:\n *  http://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @returns {number} location (in array)\n * @memberof Core\n */\n\n\nfunction insert(item, array, compareFunction) {\n  var location = locationOf(item, array, compareFunction);\n  array.splice(location, 0, item);\n  return location;\n}\n/**\n * Finds where something would fit into a sorted array\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} location (in array)\n * @memberof Core\n */\n\n\nfunction locationOf(item, array, compareFunction, _start, _end) {\n  var start = _start || 0;\n  var end = _end || array.length;\n  var pivot = parseInt(start + (end - start) / 2);\n  var compared;\n\n  if (!compareFunction) {\n    compareFunction = function (a, b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n      if (a == b) return 0;\n    };\n  }\n\n  if (end - start <= 0) {\n    return pivot;\n  }\n\n  compared = compareFunction(array[pivot], item);\n\n  if (end - start === 1) {\n    return compared >= 0 ? pivot : pivot + 1;\n  }\n\n  if (compared === 0) {\n    return pivot;\n  }\n\n  if (compared === -1) {\n    return locationOf(item, array, compareFunction, pivot, end);\n  } else {\n    return locationOf(item, array, compareFunction, start, pivot);\n  }\n}\n/**\n * Finds index of something in a sorted array\n * Returns -1 if not found\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} index (in array) or -1\n * @memberof Core\n */\n\n\nfunction indexOfSorted(item, array, compareFunction, _start, _end) {\n  var start = _start || 0;\n  var end = _end || array.length;\n  var pivot = parseInt(start + (end - start) / 2);\n  var compared;\n\n  if (!compareFunction) {\n    compareFunction = function (a, b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n      if (a == b) return 0;\n    };\n  }\n\n  if (end - start <= 0) {\n    return -1; // Not found\n  }\n\n  compared = compareFunction(array[pivot], item);\n\n  if (end - start === 1) {\n    return compared === 0 ? pivot : -1;\n  }\n\n  if (compared === 0) {\n    return pivot; // Found\n  }\n\n  if (compared === -1) {\n    return indexOfSorted(item, array, compareFunction, pivot, end);\n  } else {\n    return indexOfSorted(item, array, compareFunction, start, pivot);\n  }\n}\n/**\n * Find the bounds of an element\n * taking padding and margin into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\n\n\nfunction bounds(el) {\n  var style = window.getComputedStyle(el);\n  var widthProps = [\"width\", \"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n  var heightProps = [\"height\", \"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n  var width = 0;\n  var height = 0;\n  widthProps.forEach(function (prop) {\n    width += parseFloat(style[prop]) || 0;\n  });\n  heightProps.forEach(function (prop) {\n    height += parseFloat(style[prop]) || 0;\n  });\n  return {\n    height: height,\n    width: width\n  };\n}\n/**\n * Find the bounds of an element\n * taking padding, margin and borders into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\n\n\nfunction borders(el) {\n  var style = window.getComputedStyle(el);\n  var widthProps = [\"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n  var heightProps = [\"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n  var width = 0;\n  var height = 0;\n  widthProps.forEach(function (prop) {\n    width += parseFloat(style[prop]) || 0;\n  });\n  heightProps.forEach(function (prop) {\n    height += parseFloat(style[prop]) || 0;\n  });\n  return {\n    height: height,\n    width: width\n  };\n}\n/**\n * Find the bounds of any node\n * allows for getting bounds of text nodes by wrapping them in a range\n * @param {node} node\n * @returns {BoundingClientRect}\n * @memberof Core\n */\n\n\nfunction nodeBounds(node) {\n  let elPos;\n  let doc = node.ownerDocument;\n\n  if (node.nodeType == Node.TEXT_NODE) {\n    let elRange = doc.createRange();\n    elRange.selectNodeContents(node);\n    elPos = elRange.getBoundingClientRect();\n  } else {\n    elPos = node.getBoundingClientRect();\n  }\n\n  return elPos;\n}\n/**\n * Find the equivalent of getBoundingClientRect of a browser window\n * @returns {{ width: Number, height: Number, top: Number, left: Number, right: Number, bottom: Number }}\n * @memberof Core\n */\n\n\nfunction windowBounds() {\n  var width = window.innerWidth;\n  var height = window.innerHeight;\n  return {\n    top: 0,\n    left: 0,\n    right: width,\n    bottom: height,\n    width: width,\n    height: height\n  };\n}\n/**\n * Gets the index of a node in its parent\n * @param {Node} node\n * @param {string} typeId\n * @return {number} index\n * @memberof Core\n */\n\n\nfunction indexOfNode(node, typeId) {\n  var parent = node.parentNode;\n  var children = parent.childNodes;\n  var sib;\n  var index = -1;\n\n  for (var i = 0; i < children.length; i++) {\n    sib = children[i];\n\n    if (sib.nodeType === typeId) {\n      index++;\n    }\n\n    if (sib == node) break;\n  }\n\n  return index;\n}\n/**\n * Gets the index of a text node in its parent\n * @param {node} textNode\n * @returns {number} index\n * @memberof Core\n */\n\n\nfunction indexOfTextNode(textNode) {\n  return indexOfNode(textNode, TEXT_NODE);\n}\n/**\n * Gets the index of an element node in its parent\n * @param {element} elementNode\n * @returns {number} index\n * @memberof Core\n */\n\n\nfunction indexOfElementNode(elementNode) {\n  return indexOfNode(elementNode, ELEMENT_NODE);\n}\n/**\n * Check if extension is xml\n * @param {string} ext\n * @returns {boolean}\n * @memberof Core\n */\n\n\nfunction isXml(ext) {\n  return [\"xml\", \"opf\", \"ncx\"].indexOf(ext) > -1;\n}\n/**\n * Create a new blob\n * @param {any} content\n * @param {string} mime\n * @returns {Blob}\n * @memberof Core\n */\n\n\nfunction createBlob(content, mime) {\n  return new Blob([content], {\n    type: mime\n  });\n}\n/**\n * Create a new blob url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\n\n\nfunction createBlobUrl(content, mime) {\n  var tempUrl;\n  var blob = createBlob(content, mime);\n  tempUrl = _URL.createObjectURL(blob);\n  return tempUrl;\n}\n/**\n * Remove a blob url\n * @param {string} url\n * @memberof Core\n */\n\n\nfunction revokeBlobUrl(url) {\n  return _URL.revokeObjectURL(url);\n}\n/**\n * Create a new base64 encoded url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\n\n\nfunction createBase64Url(content, mime) {\n  var data;\n  var datauri;\n\n  if (typeof content !== \"string\") {\n    // Only handles strings\n    return;\n  }\n\n  data = btoa(content);\n  datauri = \"data:\" + mime + \";base64,\" + data;\n  return datauri;\n}\n/**\n * Get type of an object\n * @param {object} obj\n * @returns {string} type\n * @memberof Core\n */\n\n\nfunction type(obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1);\n}\n/**\n * Parse xml (or html) markup\n * @param {string} markup\n * @param {string} mime\n * @param {boolean} forceXMLDom force using xmlDom to parse instead of native parser\n * @returns {document} document\n * @memberof Core\n */\n\n\nfunction parse(markup, mime, forceXMLDom) {\n  var doc;\n  var Parser;\n\n  if (typeof DOMParser === \"undefined\" || forceXMLDom) {\n    Parser = _xmldom.DOMParser;\n  } else {\n    Parser = DOMParser;\n  } // Remove byte order mark before parsing\n  // https://www.w3.org/International/questions/qa-byte-order-mark\n\n\n  if (markup.charCodeAt(0) === 0xFEFF) {\n    markup = markup.slice(1);\n  }\n\n  doc = new Parser().parseFromString(markup, mime);\n  return doc;\n}\n/**\n * querySelector polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element} element\n * @memberof Core\n */\n\n\nfunction qs(el, sel) {\n  var elements;\n\n  if (!el) {\n    throw new Error(\"No Element Provided\");\n  }\n\n  if (typeof el.querySelector != \"undefined\") {\n    return el.querySelector(sel);\n  } else {\n    elements = el.getElementsByTagName(sel);\n\n    if (elements.length) {\n      return elements[0];\n    }\n  }\n}\n/**\n * querySelectorAll polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element[]} elements\n * @memberof Core\n */\n\n\nfunction qsa(el, sel) {\n  if (typeof el.querySelector != \"undefined\") {\n    return el.querySelectorAll(sel);\n  } else {\n    return el.getElementsByTagName(sel);\n  }\n}\n/**\n * querySelector by property\n * @param {element} el\n * @param {string} sel selector string\n * @param {object[]} props\n * @returns {element[]} elements\n * @memberof Core\n */\n\n\nfunction qsp(el, sel, props) {\n  var q, filtered;\n\n  if (typeof el.querySelector != \"undefined\") {\n    sel += \"[\";\n\n    for (var prop in props) {\n      sel += prop + \"~='\" + props[prop] + \"'\";\n    }\n\n    sel += \"]\";\n    return el.querySelector(sel);\n  } else {\n    q = el.getElementsByTagName(sel);\n    filtered = Array.prototype.slice.call(q, 0).filter(function (el) {\n      for (var prop in props) {\n        if (el.getAttribute(prop) === props[prop]) {\n          return true;\n        }\n      }\n\n      return false;\n    });\n\n    if (filtered) {\n      return filtered[0];\n    }\n  }\n}\n/**\n * Sprint through all text nodes in a document\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n */\n\n\nfunction sprint(root, func) {\n  var doc = root.ownerDocument || root;\n\n  if (typeof doc.createTreeWalker !== \"undefined\") {\n    treeWalker(root, func, NodeFilter.SHOW_TEXT);\n  } else {\n    walk(root, function (node) {\n      if (node && node.nodeType === 3) {\n        // Node.TEXT_NODE\n        func(node);\n      }\n    }, true);\n  }\n}\n/**\n * Create a treeWalker\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n * @param  {function | object} filter function or object to filter with\n */\n\n\nfunction treeWalker(root, func, filter) {\n  var treeWalker = document.createTreeWalker(root, filter, null, false);\n  let node;\n\n  while (node = treeWalker.nextNode()) {\n    func(node);\n  }\n}\n/**\n * @memberof Core\n * @param {node} node\n * @param {callback} return false for continue,true for break inside callback\n */\n\n\nfunction walk(node, callback) {\n  if (callback(node)) {\n    return true;\n  }\n\n  node = node.firstChild;\n\n  if (node) {\n    do {\n      let walked = walk(node, callback);\n\n      if (walked) {\n        return true;\n      }\n\n      node = node.nextSibling;\n    } while (node);\n  }\n}\n/**\n * Convert a blob to a base64 encoded string\n * @param {Blog} blob\n * @returns {string}\n * @memberof Core\n */\n\n\nfunction blob2base64(blob) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsDataURL(blob);\n\n    reader.onloadend = function () {\n      resolve(reader.result);\n    };\n  });\n}\n/**\n * Creates a new pending promise and provides methods to resolve or reject it.\n * From: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#backwards_forwards_compatible\n * @memberof Core\n */\n\n\nfunction defer() {\n  /* A method to resolve the associated Promise with the value passed.\n   * If the promise is already settled it does nothing.\n   *\n   * @param {anything} value : This value is used to resolve the promise\n   * If the value is a Promise then the associated promise assumes the state\n   * of Promise passed as value.\n   */\n  this.resolve = null;\n  /* A method to reject the associated Promise with the value passed.\n   * If the promise is already settled it does nothing.\n   *\n   * @param {anything} reason: The reason for the rejection of the Promise.\n   * Generally its an Error object. If however a Promise is passed, then the Promise\n   * itself will be the reason for rejection no matter the state of the Promise.\n   */\n\n  this.reject = null;\n  this.id = uuid();\n  /* A newly created Pomise object.\n   * Initially in pending state.\n   */\n\n  this.promise = new Promise((resolve, reject) => {\n    this.resolve = resolve;\n    this.reject = reject;\n  });\n  Object.freeze(this);\n}\n/**\n * querySelector with filter by epub type\n * @param {element} html\n * @param {string} element element type to find\n * @param {string} type epub type to find\n * @returns {element[]} elements\n * @memberof Core\n */\n\n\nfunction querySelectorByType(html, element, type) {\n  var query;\n\n  if (typeof html.querySelector != \"undefined\") {\n    query = html.querySelector(`${element}[*|type=\"${type}\"]`);\n  } // Handle IE not supporting namespaced epub:type in querySelector\n\n\n  if (!query || query.length === 0) {\n    query = qsa(html, element);\n\n    for (var i = 0; i < query.length; i++) {\n      if (query[i].getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") === type || query[i].getAttribute(\"epub:type\") === type) {\n        return query[i];\n      }\n    }\n  } else {\n    return query;\n  }\n}\n/**\n * Find direct descendents of an element\n * @param {element} el\n * @returns {element[]} children\n * @memberof Core\n */\n\n\nfunction findChildren(el) {\n  var result = [];\n  var childNodes = el.childNodes;\n\n  for (var i = 0; i < childNodes.length; i++) {\n    let node = childNodes[i];\n\n    if (node.nodeType === 1) {\n      result.push(node);\n    }\n  }\n\n  return result;\n}\n/**\n * Find all parents (ancestors) of an element\n * @param {element} node\n * @returns {element[]} parents\n * @memberof Core\n */\n\n\nfunction parents(node) {\n  var nodes = [node];\n\n  for (; node; node = node.parentNode) {\n    nodes.unshift(node);\n  }\n\n  return nodes;\n}\n/**\n * Find all direct descendents of a specific type\n * @param {element} el\n * @param {string} nodeName\n * @param {boolean} [single]\n * @returns {element[]} children\n * @memberof Core\n */\n\n\nfunction filterChildren(el, nodeName, single) {\n  var result = [];\n  var childNodes = el.childNodes;\n\n  for (var i = 0; i < childNodes.length; i++) {\n    let node = childNodes[i];\n\n    if (node.nodeType === 1 && node.nodeName.toLowerCase() === nodeName) {\n      if (single) {\n        return node;\n      } else {\n        result.push(node);\n      }\n    }\n  }\n\n  if (!single) {\n    return result;\n  }\n}\n/**\n * Filter all parents (ancestors) with tag name\n * @param {element} node\n * @param {string} tagname\n * @returns {element[]} parents\n * @memberof Core\n */\n\n\nfunction getParentByTagName(node, tagname) {\n  let parent;\n  if (node === null || tagname === '') return;\n  parent = node.parentNode;\n\n  while (parent.nodeType === 1) {\n    if (parent.tagName.toLowerCase() === tagname) {\n      return parent;\n    }\n\n    parent = parent.parentNode;\n  }\n}\n/**\n * Lightweight Polyfill for DOM Range\n * @class\n * @memberof Core\n */\n\n\nclass RangeObject {\n  constructor() {\n    this.collapsed = false;\n    this.commonAncestorContainer = undefined;\n    this.endContainer = undefined;\n    this.endOffset = undefined;\n    this.startContainer = undefined;\n    this.startOffset = undefined;\n  }\n\n  setStart(startNode, startOffset) {\n    this.startContainer = startNode;\n    this.startOffset = startOffset;\n\n    if (!this.endContainer) {\n      this.collapse(true);\n    } else {\n      this.commonAncestorContainer = this._commonAncestorContainer();\n    }\n\n    this._checkCollapsed();\n  }\n\n  setEnd(endNode, endOffset) {\n    this.endContainer = endNode;\n    this.endOffset = endOffset;\n\n    if (!this.startContainer) {\n      this.collapse(false);\n    } else {\n      this.collapsed = false;\n      this.commonAncestorContainer = this._commonAncestorContainer();\n    }\n\n    this._checkCollapsed();\n  }\n\n  collapse(toStart) {\n    this.collapsed = true;\n\n    if (toStart) {\n      this.endContainer = this.startContainer;\n      this.endOffset = this.startOffset;\n      this.commonAncestorContainer = this.startContainer.parentNode;\n    } else {\n      this.startContainer = this.endContainer;\n      this.startOffset = this.endOffset;\n      this.commonAncestorContainer = this.endOffset.parentNode;\n    }\n  }\n\n  selectNode(referenceNode) {\n    let parent = referenceNode.parentNode;\n    let index = Array.prototype.indexOf.call(parent.childNodes, referenceNode);\n    this.setStart(parent, index);\n    this.setEnd(parent, index + 1);\n  }\n\n  selectNodeContents(referenceNode) {\n    let end = referenceNode.childNodes[referenceNode.childNodes - 1];\n    let endIndex = referenceNode.nodeType === 3 ? referenceNode.textContent.length : parent.childNodes.length;\n    this.setStart(referenceNode, 0);\n    this.setEnd(referenceNode, endIndex);\n  }\n\n  _commonAncestorContainer(startContainer, endContainer) {\n    var startParents = parents(startContainer || this.startContainer);\n    var endParents = parents(endContainer || this.endContainer);\n    if (startParents[0] != endParents[0]) return undefined;\n\n    for (var i = 0; i < startParents.length; i++) {\n      if (startParents[i] != endParents[i]) {\n        return startParents[i - 1];\n      }\n    }\n  }\n\n  _checkCollapsed() {\n    if (this.startContainer === this.endContainer && this.startOffset === this.endOffset) {\n      this.collapsed = true;\n    } else {\n      this.collapsed = false;\n    }\n  }\n\n  toString() {// TODO: implement walking between start and end to find text\n  }\n\n}\n\nexports.RangeObject = RangeObject;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _pathWebpack = _interopRequireDefault(require(\"path-webpack\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Creates a Path object for parsing and manipulation of a path strings\n *\n * Uses a polyfill for Nodejs path: https://nodejs.org/api/path.html\n * @param\t{string} pathString\ta url string (relative or absolute)\n * @class\n */\nclass Path {\n  constructor(pathString) {\n    var protocol;\n    var parsed;\n    protocol = pathString.indexOf(\"://\");\n\n    if (protocol > -1) {\n      pathString = new URL(pathString).pathname;\n    }\n\n    parsed = this.parse(pathString);\n    this.path = pathString;\n\n    if (this.isDirectory(pathString)) {\n      this.directory = pathString;\n    } else {\n      this.directory = parsed.dir + \"/\";\n    }\n\n    this.filename = parsed.base;\n    this.extension = parsed.ext.slice(1);\n  }\n  /**\n   * Parse the path: https://nodejs.org/api/path.html#path_path_parse_path\n   * @param\t{string} what\n   * @returns {object}\n   */\n\n\n  parse(what) {\n    return _pathWebpack.default.parse(what);\n  }\n  /**\n   * @param\t{string} what\n   * @returns {boolean}\n   */\n\n\n  isAbsolute(what) {\n    return _pathWebpack.default.isAbsolute(what || this.path);\n  }\n  /**\n   * Check if path ends with a directory\n   * @param\t{string} what\n   * @returns {boolean}\n   */\n\n\n  isDirectory(what) {\n    return what.charAt(what.length - 1) === \"/\";\n  }\n  /**\n   * Resolve a path against the directory of the Path\n   *\n   * https://nodejs.org/api/path.html#path_path_resolve_paths\n   * @param\t{string} what\n   * @returns {string} resolved\n   */\n\n\n  resolve(what) {\n    return _pathWebpack.default.resolve(this.directory, what);\n  }\n  /**\n   * Resolve a path relative to the directory of the Path\n   *\n   * https://nodejs.org/api/path.html#path_path_relative_from_to\n   * @param\t{string} what\n   * @returns {string} relative\n   */\n\n\n  relative(what) {\n    var isAbsolute = what && what.indexOf(\"://\") > -1;\n\n    if (isAbsolute) {\n      return what;\n    }\n\n    return _pathWebpack.default.relative(this.directory, what);\n  }\n\n  splitPath(filename) {\n    return this.splitPathRe.exec(filename).slice(1);\n  }\n  /**\n   * Return the path string\n   * @returns {string} path\n   */\n\n\n  toString() {\n    return this.path;\n  }\n\n}\n\nvar _default = Path;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _path = _interopRequireDefault(require(\"./path\"));\n\nvar _pathWebpack = _interopRequireDefault(require(\"path-webpack\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * creates a Url object for parsing and manipulation of a url string\n * @param\t{string} urlString\ta url string (relative or absolute)\n * @param\t{string} [baseString] optional base for the url,\n * default to window.location.href\n */\nclass Url {\n  constructor(urlString, baseString) {\n    var absolute = urlString.indexOf(\"://\") > -1;\n    var pathname = urlString;\n    var basePath;\n    this.Url = undefined;\n    this.href = urlString;\n    this.protocol = \"\";\n    this.origin = \"\";\n    this.hash = \"\";\n    this.hash = \"\";\n    this.search = \"\";\n    this.base = baseString;\n\n    if (!absolute && baseString !== false && typeof baseString !== \"string\" && window && window.location) {\n      this.base = window.location.href;\n    } // URL Polyfill doesn't throw an error if base is empty\n\n\n    if (absolute || this.base) {\n      try {\n        if (this.base) {\n          // Safari doesn't like an undefined base\n          this.Url = new URL(urlString, this.base);\n        } else {\n          this.Url = new URL(urlString);\n        }\n\n        this.href = this.Url.href;\n        this.protocol = this.Url.protocol;\n        this.origin = this.Url.origin;\n        this.hash = this.Url.hash;\n        this.search = this.Url.search;\n        pathname = this.Url.pathname + (this.Url.search ? this.Url.search : '');\n      } catch (e) {\n        // Skip URL parsing\n        this.Url = undefined; // resolve the pathname from the base\n\n        if (this.base) {\n          basePath = new _path.default(this.base);\n          pathname = basePath.resolve(pathname);\n        }\n      }\n    }\n\n    this.Path = new _path.default(pathname);\n    this.directory = this.Path.directory;\n    this.filename = this.Path.filename;\n    this.extension = this.Path.extension;\n  }\n  /**\n   * @returns {Path}\n   */\n\n\n  path() {\n    return this.Path;\n  }\n  /**\n   * Resolves a relative path to a absolute url\n   * @param {string} what\n   * @returns {string} url\n   */\n\n\n  resolve(what) {\n    var isAbsolute = what.indexOf(\"://\") > -1;\n    var fullpath;\n\n    if (isAbsolute) {\n      return what;\n    }\n\n    fullpath = _pathWebpack.default.resolve(this.directory, what);\n    return this.origin + fullpath;\n  }\n  /**\n   * Resolve a path relative to the url\n   * @param {string} what\n   * @returns {string} path\n   */\n\n\n  relative(what) {\n    return _pathWebpack.default.relative(what, this.directory);\n  }\n  /**\n   * @returns {string}\n   */\n\n\n  toString() {\n    return this.href;\n  }\n\n}\n\nvar _default = Url;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\n/**\n\t* Parsing and creation of EpubCFIs: http://www.idpf.org/epub/linking/cfi/epub-cfi.html\n\n\t* Implements:\n\t* - Character Offset: epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\n\t* - Simple Ranges : epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\n\n\t* Does Not Implement:\n\t* - Temporal Offset (~)\n\t* - Spatial Offset (@)\n\t* - Temporal-Spatial Offset (~ + @)\n\t* - Text Location Assertion ([)\n\t* @class\n\t@param {string | Range | Node } [cfiFrom]\n\t@param {string | object} [base]\n\t@param {string} [ignoreClass] class to ignore when parsing DOM\n*/\n\nclass EpubCFI {\n  constructor(cfiFrom, base, ignoreClass) {\n    var type;\n    this.str = \"\";\n    this.base = {};\n    this.spinePos = 0; // For compatibility\n\n    this.range = false; // true || false;\n\n    this.path = {};\n    this.start = null;\n    this.end = null; // Allow instantiation without the \"new\" keyword\n\n    if (!(this instanceof EpubCFI)) {\n      return new EpubCFI(cfiFrom, base, ignoreClass);\n    }\n\n    if (typeof base === \"string\") {\n      this.base = this.parseComponent(base);\n    } else if (typeof base === \"object\" && base.steps) {\n      this.base = base;\n    }\n\n    type = this.checkType(cfiFrom);\n\n    if (type === \"string\") {\n      this.str = cfiFrom;\n      return (0, _core.extend)(this, this.parse(cfiFrom));\n    } else if (type === \"range\") {\n      return (0, _core.extend)(this, this.fromRange(cfiFrom, this.base, ignoreClass));\n    } else if (type === \"node\") {\n      return (0, _core.extend)(this, this.fromNode(cfiFrom, this.base, ignoreClass));\n    } else if (type === \"EpubCFI\" && cfiFrom.path) {\n      return cfiFrom;\n    } else if (!cfiFrom) {\n      return this;\n    } else {\n      throw new TypeError(\"not a valid argument for EpubCFI\");\n    }\n  }\n  /**\n   * Check the type of constructor input\n   * @private\n   */\n\n\n  checkType(cfi) {\n    if (this.isCfiString(cfi)) {\n      return \"string\"; // Is a range object\n    } else if (cfi && typeof cfi === \"object\" && ((0, _core.type)(cfi) === \"Range\" || typeof cfi.startContainer != \"undefined\")) {\n      return \"range\";\n    } else if (cfi && typeof cfi === \"object\" && typeof cfi.nodeType != \"undefined\") {\n      // || typeof cfi === \"function\"\n      return \"node\";\n    } else if (cfi && typeof cfi === \"object\" && cfi instanceof EpubCFI) {\n      return \"EpubCFI\";\n    } else {\n      return false;\n    }\n  }\n  /**\n   * Parse a cfi string to a CFI object representation\n   * @param {string} cfiStr\n   * @returns {object} cfi\n   */\n\n\n  parse(cfiStr) {\n    var cfi = {\n      spinePos: -1,\n      range: false,\n      base: {},\n      path: {},\n      start: null,\n      end: null\n    };\n    var baseComponent, pathComponent, range;\n\n    if (typeof cfiStr !== \"string\") {\n      return {\n        spinePos: -1\n      };\n    }\n\n    if (cfiStr.indexOf(\"epubcfi(\") === 0 && cfiStr[cfiStr.length - 1] === \")\") {\n      // Remove initial epubcfi( and ending )\n      cfiStr = cfiStr.slice(8, cfiStr.length - 1);\n    }\n\n    baseComponent = this.getChapterComponent(cfiStr); // Make sure this is a valid cfi or return\n\n    if (!baseComponent) {\n      return {\n        spinePos: -1\n      };\n    }\n\n    cfi.base = this.parseComponent(baseComponent);\n    pathComponent = this.getPathComponent(cfiStr);\n    cfi.path = this.parseComponent(pathComponent);\n    range = this.getRange(cfiStr);\n\n    if (range) {\n      cfi.range = true;\n      cfi.start = this.parseComponent(range[0]);\n      cfi.end = this.parseComponent(range[1]);\n    } // Get spine node position\n    // cfi.spineSegment = cfi.base.steps[1];\n    // Chapter segment is always the second step\n\n\n    cfi.spinePos = cfi.base.steps[1].index;\n    return cfi;\n  }\n\n  parseComponent(componentStr) {\n    var component = {\n      steps: [],\n      terminal: {\n        offset: null,\n        assertion: null\n      }\n    };\n    var parts = componentStr.split(\":\");\n    var steps = parts[0].split(\"/\");\n    var terminal;\n\n    if (parts.length > 1) {\n      terminal = parts[1];\n      component.terminal = this.parseTerminal(terminal);\n    }\n\n    if (steps[0] === \"\") {\n      steps.shift(); // Ignore the first slash\n    }\n\n    component.steps = steps.map(function (step) {\n      return this.parseStep(step);\n    }.bind(this));\n    return component;\n  }\n\n  parseStep(stepStr) {\n    var type, num, index, has_brackets, id;\n    has_brackets = stepStr.match(/\\[(.*)\\]/);\n\n    if (has_brackets && has_brackets[1]) {\n      id = has_brackets[1];\n    } //-- Check if step is a text node or element\n\n\n    num = parseInt(stepStr);\n\n    if (isNaN(num)) {\n      return;\n    }\n\n    if (num % 2 === 0) {\n      // Even = is an element\n      type = \"element\";\n      index = num / 2 - 1;\n    } else {\n      type = \"text\";\n      index = (num - 1) / 2;\n    }\n\n    return {\n      \"type\": type,\n      \"index\": index,\n      \"id\": id || null\n    };\n  }\n\n  parseTerminal(termialStr) {\n    var characterOffset, textLocationAssertion;\n    var assertion = termialStr.match(/\\[(.*)\\]/);\n\n    if (assertion && assertion[1]) {\n      characterOffset = parseInt(termialStr.split(\"[\")[0]);\n      textLocationAssertion = assertion[1];\n    } else {\n      characterOffset = parseInt(termialStr);\n    }\n\n    if (!(0, _core.isNumber)(characterOffset)) {\n      characterOffset = null;\n    }\n\n    return {\n      \"offset\": characterOffset,\n      \"assertion\": textLocationAssertion\n    };\n  }\n\n  getChapterComponent(cfiStr) {\n    var indirection = cfiStr.split(\"!\");\n    return indirection[0];\n  }\n\n  getPathComponent(cfiStr) {\n    var indirection = cfiStr.split(\"!\");\n\n    if (indirection[1]) {\n      let ranges = indirection[1].split(\",\");\n      return ranges[0];\n    }\n  }\n\n  getRange(cfiStr) {\n    var ranges = cfiStr.split(\",\");\n\n    if (ranges.length === 3) {\n      return [ranges[1], ranges[2]];\n    }\n\n    return false;\n  }\n\n  getCharecterOffsetComponent(cfiStr) {\n    var splitStr = cfiStr.split(\":\");\n    return splitStr[1] || \"\";\n  }\n\n  joinSteps(steps) {\n    if (!steps) {\n      return \"\";\n    }\n\n    return steps.map(function (part) {\n      var segment = \"\";\n\n      if (part.type === \"element\") {\n        segment += (part.index + 1) * 2;\n      }\n\n      if (part.type === \"text\") {\n        segment += 1 + 2 * part.index; // TODO: double check that this is odd\n      }\n\n      if (part.id) {\n        segment += \"[\" + part.id + \"]\";\n      }\n\n      return segment;\n    }).join(\"/\");\n  }\n\n  segmentString(segment) {\n    var segmentString = \"/\";\n    segmentString += this.joinSteps(segment.steps);\n\n    if (segment.terminal && segment.terminal.offset != null) {\n      segmentString += \":\" + segment.terminal.offset;\n    }\n\n    if (segment.terminal && segment.terminal.assertion != null) {\n      segmentString += \"[\" + segment.terminal.assertion + \"]\";\n    }\n\n    return segmentString;\n  }\n  /**\n   * Convert CFI to a epubcfi(...) string\n   * @returns {string} epubcfi\n   */\n\n\n  toString() {\n    var cfiString = \"epubcfi(\";\n    cfiString += this.segmentString(this.base);\n    cfiString += \"!\";\n    cfiString += this.segmentString(this.path); // Add Range, if present\n\n    if (this.range && this.start) {\n      cfiString += \",\";\n      cfiString += this.segmentString(this.start);\n    }\n\n    if (this.range && this.end) {\n      cfiString += \",\";\n      cfiString += this.segmentString(this.end);\n    }\n\n    cfiString += \")\";\n    return cfiString;\n  }\n  /**\n   * Compare which of two CFIs is earlier in the text\n   * @returns {number} First is earlier = -1, Second is earlier = 1, They are equal = 0\n   */\n\n\n  compare(cfiOne, cfiTwo) {\n    var stepsA, stepsB;\n    var terminalA, terminalB;\n    var rangeAStartSteps, rangeAEndSteps;\n    var rangeBEndSteps, rangeBEndSteps;\n    var rangeAStartTerminal, rangeAEndTerminal;\n    var rangeBStartTerminal, rangeBEndTerminal;\n\n    if (typeof cfiOne === \"string\") {\n      cfiOne = new EpubCFI(cfiOne);\n    }\n\n    if (typeof cfiTwo === \"string\") {\n      cfiTwo = new EpubCFI(cfiTwo);\n    } // Compare Spine Positions\n\n\n    if (cfiOne.spinePos > cfiTwo.spinePos) {\n      return 1;\n    }\n\n    if (cfiOne.spinePos < cfiTwo.spinePos) {\n      return -1;\n    }\n\n    if (cfiOne.range) {\n      stepsA = cfiOne.path.steps.concat(cfiOne.start.steps);\n      terminalA = cfiOne.start.terminal;\n    } else {\n      stepsA = cfiOne.path.steps;\n      terminalA = cfiOne.path.terminal;\n    }\n\n    if (cfiTwo.range) {\n      stepsB = cfiTwo.path.steps.concat(cfiTwo.start.steps);\n      terminalB = cfiTwo.start.terminal;\n    } else {\n      stepsB = cfiTwo.path.steps;\n      terminalB = cfiTwo.path.terminal;\n    } // Compare Each Step in the First item\n\n\n    for (var i = 0; i < stepsA.length; i++) {\n      if (!stepsA[i]) {\n        return -1;\n      }\n\n      if (!stepsB[i]) {\n        return 1;\n      }\n\n      if (stepsA[i].index > stepsB[i].index) {\n        return 1;\n      }\n\n      if (stepsA[i].index < stepsB[i].index) {\n        return -1;\n      } // Otherwise continue checking\n\n    } // All steps in First equal to Second and First is Less Specific\n\n\n    if (stepsA.length < stepsB.length) {\n      return -1;\n    } // Compare the character offset of the text node\n\n\n    if (terminalA.offset > terminalB.offset) {\n      return 1;\n    }\n\n    if (terminalA.offset < terminalB.offset) {\n      return -1;\n    } // CFI's are equal\n\n\n    return 0;\n  }\n\n  step(node) {\n    var nodeType = node.nodeType === TEXT_NODE ? \"text\" : \"element\";\n    return {\n      \"id\": node.id,\n      \"tagName\": node.tagName,\n      \"type\": nodeType,\n      \"index\": this.position(node)\n    };\n  }\n\n  filteredStep(node, ignoreClass) {\n    var filteredNode = this.filter(node, ignoreClass);\n    var nodeType; // Node filtered, so ignore\n\n    if (!filteredNode) {\n      return;\n    } // Otherwise add the filter node in\n\n\n    nodeType = filteredNode.nodeType === TEXT_NODE ? \"text\" : \"element\";\n    return {\n      \"id\": filteredNode.id,\n      \"tagName\": filteredNode.tagName,\n      \"type\": nodeType,\n      \"index\": this.filteredPosition(filteredNode, ignoreClass)\n    };\n  }\n\n  pathTo(node, offset, ignoreClass) {\n    var segment = {\n      steps: [],\n      terminal: {\n        offset: null,\n        assertion: null\n      }\n    };\n    var currentNode = node;\n    var step;\n\n    while (currentNode && currentNode.parentNode && currentNode.parentNode.nodeType != DOCUMENT_NODE) {\n      if (ignoreClass) {\n        step = this.filteredStep(currentNode, ignoreClass);\n      } else {\n        step = this.step(currentNode);\n      }\n\n      if (step) {\n        segment.steps.unshift(step);\n      }\n\n      currentNode = currentNode.parentNode;\n    }\n\n    if (offset != null && offset >= 0) {\n      segment.terminal.offset = offset; // Make sure we are getting to a textNode if there is an offset\n\n      if (segment.steps[segment.steps.length - 1].type != \"text\") {\n        segment.steps.push({\n          \"type\": \"text\",\n          \"index\": 0\n        });\n      }\n    }\n\n    return segment;\n  }\n\n  equalStep(stepA, stepB) {\n    if (!stepA || !stepB) {\n      return false;\n    }\n\n    if (stepA.index === stepB.index && stepA.id === stepB.id && stepA.type === stepB.type) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Create a CFI object from a Range\n   * @param {Range} range\n   * @param {string | object} base\n   * @param {string} [ignoreClass]\n   * @returns {object} cfi\n   */\n\n\n  fromRange(range, base, ignoreClass) {\n    var cfi = {\n      range: false,\n      base: {},\n      path: {},\n      start: null,\n      end: null\n    };\n    var start = range.startContainer;\n    var end = range.endContainer;\n    var startOffset = range.startOffset;\n    var endOffset = range.endOffset;\n    var needsIgnoring = false;\n\n    if (ignoreClass) {\n      // Tell pathTo if / what to ignore\n      needsIgnoring = start.ownerDocument.querySelector(\".\" + ignoreClass) != null;\n    }\n\n    if (typeof base === \"string\") {\n      cfi.base = this.parseComponent(base);\n      cfi.spinePos = cfi.base.steps[1].index;\n    } else if (typeof base === \"object\") {\n      cfi.base = base;\n    }\n\n    if (range.collapsed) {\n      if (needsIgnoring) {\n        startOffset = this.patchOffset(start, startOffset, ignoreClass);\n      }\n\n      cfi.path = this.pathTo(start, startOffset, ignoreClass);\n    } else {\n      cfi.range = true;\n\n      if (needsIgnoring) {\n        startOffset = this.patchOffset(start, startOffset, ignoreClass);\n      }\n\n      cfi.start = this.pathTo(start, startOffset, ignoreClass);\n\n      if (needsIgnoring) {\n        endOffset = this.patchOffset(end, endOffset, ignoreClass);\n      }\n\n      cfi.end = this.pathTo(end, endOffset, ignoreClass); // Create a new empty path\n\n      cfi.path = {\n        steps: [],\n        terminal: null\n      }; // Push steps that are shared between start and end to the common path\n\n      var len = cfi.start.steps.length;\n      var i;\n\n      for (i = 0; i < len; i++) {\n        if (this.equalStep(cfi.start.steps[i], cfi.end.steps[i])) {\n          if (i === len - 1) {\n            // Last step is equal, check terminals\n            if (cfi.start.terminal === cfi.end.terminal) {\n              // CFI's are equal\n              cfi.path.steps.push(cfi.start.steps[i]); // Not a range\n\n              cfi.range = false;\n            }\n          } else {\n            cfi.path.steps.push(cfi.start.steps[i]);\n          }\n        } else {\n          break;\n        }\n      }\n\n      cfi.start.steps = cfi.start.steps.slice(cfi.path.steps.length);\n      cfi.end.steps = cfi.end.steps.slice(cfi.path.steps.length); // TODO: Add Sanity check to make sure that the end if greater than the start\n    }\n\n    return cfi;\n  }\n  /**\n   * Create a CFI object from a Node\n   * @param {Node} anchor\n   * @param {string | object} base\n   * @param {string} [ignoreClass]\n   * @returns {object} cfi\n   */\n\n\n  fromNode(anchor, base, ignoreClass) {\n    var cfi = {\n      range: false,\n      base: {},\n      path: {},\n      start: null,\n      end: null\n    };\n\n    if (typeof base === \"string\") {\n      cfi.base = this.parseComponent(base);\n      cfi.spinePos = cfi.base.steps[1].index;\n    } else if (typeof base === \"object\") {\n      cfi.base = base;\n    }\n\n    cfi.path = this.pathTo(anchor, null, ignoreClass);\n    return cfi;\n  }\n\n  filter(anchor, ignoreClass) {\n    var needsIgnoring;\n    var sibling; // to join with\n\n    var parent, previousSibling, nextSibling;\n    var isText = false;\n\n    if (anchor.nodeType === TEXT_NODE) {\n      isText = true;\n      parent = anchor.parentNode;\n      needsIgnoring = anchor.parentNode.classList.contains(ignoreClass);\n    } else {\n      isText = false;\n      needsIgnoring = anchor.classList.contains(ignoreClass);\n    }\n\n    if (needsIgnoring && isText) {\n      previousSibling = parent.previousSibling;\n      nextSibling = parent.nextSibling; // If the sibling is a text node, join the nodes\n\n      if (previousSibling && previousSibling.nodeType === TEXT_NODE) {\n        sibling = previousSibling;\n      } else if (nextSibling && nextSibling.nodeType === TEXT_NODE) {\n        sibling = nextSibling;\n      }\n\n      if (sibling) {\n        return sibling;\n      } else {\n        // Parent will be ignored on next step\n        return anchor;\n      }\n    } else if (needsIgnoring && !isText) {\n      // Otherwise just skip the element node\n      return false;\n    } else {\n      // No need to filter\n      return anchor;\n    }\n  }\n\n  patchOffset(anchor, offset, ignoreClass) {\n    if (anchor.nodeType != TEXT_NODE) {\n      throw new Error(\"Anchor must be a text node\");\n    }\n\n    var curr = anchor;\n    var totalOffset = offset; // If the parent is a ignored node, get offset from it's start\n\n    if (anchor.parentNode.classList.contains(ignoreClass)) {\n      curr = anchor.parentNode;\n    }\n\n    while (curr.previousSibling) {\n      if (curr.previousSibling.nodeType === ELEMENT_NODE) {\n        // Originally a text node, so join\n        if (curr.previousSibling.classList.contains(ignoreClass)) {\n          totalOffset += curr.previousSibling.textContent.length;\n        } else {\n          break; // Normal node, dont join\n        }\n      } else {\n        // If the previous sibling is a text node, join the nodes\n        totalOffset += curr.previousSibling.textContent.length;\n      }\n\n      curr = curr.previousSibling;\n    }\n\n    return totalOffset;\n  }\n\n  normalizedMap(children, nodeType, ignoreClass) {\n    var output = {};\n    var prevIndex = -1;\n    var i,\n        len = children.length;\n    var currNodeType;\n    var prevNodeType;\n\n    for (i = 0; i < len; i++) {\n      currNodeType = children[i].nodeType; // Check if needs ignoring\n\n      if (currNodeType === ELEMENT_NODE && children[i].classList.contains(ignoreClass)) {\n        currNodeType = TEXT_NODE;\n      }\n\n      if (i > 0 && currNodeType === TEXT_NODE && prevNodeType === TEXT_NODE) {\n        // join text nodes\n        output[i] = prevIndex;\n      } else if (nodeType === currNodeType) {\n        prevIndex = prevIndex + 1;\n        output[i] = prevIndex;\n      }\n\n      prevNodeType = currNodeType;\n    }\n\n    return output;\n  }\n\n  position(anchor) {\n    var children, index;\n\n    if (anchor.nodeType === ELEMENT_NODE) {\n      children = anchor.parentNode.children;\n\n      if (!children) {\n        children = (0, _core.findChildren)(anchor.parentNode);\n      }\n\n      index = Array.prototype.indexOf.call(children, anchor);\n    } else {\n      children = this.textNodes(anchor.parentNode);\n      index = children.indexOf(anchor);\n    }\n\n    return index;\n  }\n\n  filteredPosition(anchor, ignoreClass) {\n    var children, index, map;\n\n    if (anchor.nodeType === ELEMENT_NODE) {\n      children = anchor.parentNode.children;\n      map = this.normalizedMap(children, ELEMENT_NODE, ignoreClass);\n    } else {\n      children = anchor.parentNode.childNodes; // Inside an ignored node\n\n      if (anchor.parentNode.classList.contains(ignoreClass)) {\n        anchor = anchor.parentNode;\n        children = anchor.parentNode.childNodes;\n      }\n\n      map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n    }\n\n    index = Array.prototype.indexOf.call(children, anchor);\n    return map[index];\n  }\n\n  stepsToXpath(steps) {\n    var xpath = [\".\", \"*\"];\n    steps.forEach(function (step) {\n      var position = step.index + 1;\n\n      if (step.id) {\n        xpath.push(\"*[position()=\" + position + \" and @id='\" + step.id + \"']\");\n      } else if (step.type === \"text\") {\n        xpath.push(\"text()[\" + position + \"]\");\n      } else {\n        xpath.push(\"*[\" + position + \"]\");\n      }\n    });\n    return xpath.join(\"/\");\n  }\n  /*\n  \tTo get the last step if needed:\n  \t// Get the terminal step\n  lastStep = steps[steps.length-1];\n  // Get the query string\n  query = this.stepsToQuery(steps);\n  // Find the containing element\n  startContainerParent = doc.querySelector(query);\n  // Find the text node within that element\n  if(startContainerParent && lastStep.type == \"text\") {\n  \tcontainer = startContainerParent.childNodes[lastStep.index];\n  }\n  */\n\n\n  stepsToQuerySelector(steps) {\n    var query = [\"html\"];\n    steps.forEach(function (step) {\n      var position = step.index + 1;\n\n      if (step.id) {\n        query.push(\"#\" + step.id);\n      } else if (step.type === \"text\") {// unsupported in querySelector\n        // query.push(\"text()[\" + position + \"]\");\n      } else {\n        query.push(\"*:nth-child(\" + position + \")\");\n      }\n    });\n    return query.join(\">\");\n  }\n\n  textNodes(container, ignoreClass) {\n    return Array.prototype.slice.call(container.childNodes).filter(function (node) {\n      if (node.nodeType === TEXT_NODE) {\n        return true;\n      } else if (ignoreClass && node.classList.contains(ignoreClass)) {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  walkToNode(steps, _doc, ignoreClass) {\n    var doc = _doc || document;\n    var container = doc.documentElement;\n    var children;\n    var step;\n    var len = steps.length;\n    var i;\n\n    for (i = 0; i < len; i++) {\n      step = steps[i];\n\n      if (step.type === \"element\") {\n        //better to get a container using id as some times step.index may not be correct\n        //For ex.https://github.com/futurepress/epub.js/issues/561\n        if (step.id) {\n          container = doc.getElementById(step.id);\n        } else {\n          children = container.children || (0, _core.findChildren)(container);\n          container = children[step.index];\n        }\n      } else if (step.type === \"text\") {\n        container = this.textNodes(container, ignoreClass)[step.index];\n      }\n\n      if (!container) {\n        //Break the for loop as due to incorrect index we can get error if\n        //container is undefined so that other functionailties works fine\n        //like navigation\n        break;\n      }\n    }\n\n    return container;\n  }\n\n  findNode(steps, _doc, ignoreClass) {\n    var doc = _doc || document;\n    var container;\n    var xpath;\n\n    if (!ignoreClass && typeof doc.evaluate != \"undefined\") {\n      xpath = this.stepsToXpath(steps);\n      container = doc.evaluate(xpath, doc, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n    } else if (ignoreClass) {\n      container = this.walkToNode(steps, doc, ignoreClass);\n    } else {\n      container = this.walkToNode(steps, doc);\n    }\n\n    return container;\n  }\n\n  fixMiss(steps, offset, _doc, ignoreClass) {\n    var container = this.findNode(steps.slice(0, -1), _doc, ignoreClass);\n    var children = container.childNodes;\n    var map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n    var child;\n    var len;\n    var lastStepIndex = steps[steps.length - 1].index;\n\n    for (let childIndex in map) {\n      if (!map.hasOwnProperty(childIndex)) return;\n\n      if (map[childIndex] === lastStepIndex) {\n        child = children[childIndex];\n        len = child.textContent.length;\n\n        if (offset > len) {\n          offset = offset - len;\n        } else {\n          if (child.nodeType === ELEMENT_NODE) {\n            container = child.childNodes[0];\n          } else {\n            container = child;\n          }\n\n          break;\n        }\n      }\n    }\n\n    return {\n      container: container,\n      offset: offset\n    };\n  }\n  /**\n   * Creates a DOM range representing a CFI\n   * @param {document} _doc document referenced in the base\n   * @param {string} [ignoreClass]\n   * @return {Range}\n   */\n\n\n  toRange(_doc, ignoreClass) {\n    var doc = _doc || document;\n    var range;\n    var start, end, startContainer, endContainer;\n    var cfi = this;\n    var startSteps, endSteps;\n    var needsIgnoring = ignoreClass ? doc.querySelector(\".\" + ignoreClass) != null : false;\n    var missed;\n\n    if (typeof doc.createRange !== \"undefined\") {\n      range = doc.createRange();\n    } else {\n      range = new _core.RangeObject();\n    }\n\n    if (cfi.range) {\n      start = cfi.start;\n      startSteps = cfi.path.steps.concat(start.steps);\n      startContainer = this.findNode(startSteps, doc, needsIgnoring ? ignoreClass : null);\n      end = cfi.end;\n      endSteps = cfi.path.steps.concat(end.steps);\n      endContainer = this.findNode(endSteps, doc, needsIgnoring ? ignoreClass : null);\n    } else {\n      start = cfi.path;\n      startSteps = cfi.path.steps;\n      startContainer = this.findNode(cfi.path.steps, doc, needsIgnoring ? ignoreClass : null);\n    }\n\n    if (startContainer) {\n      try {\n        if (start.terminal.offset != null) {\n          range.setStart(startContainer, start.terminal.offset);\n        } else {\n          range.setStart(startContainer, 0);\n        }\n      } catch (e) {\n        missed = this.fixMiss(startSteps, start.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n        range.setStart(missed.container, missed.offset);\n      }\n    } else {\n      console.log(\"No startContainer found for\", this.toString()); // No start found\n\n      return null;\n    }\n\n    if (endContainer) {\n      try {\n        if (end.terminal.offset != null) {\n          range.setEnd(endContainer, end.terminal.offset);\n        } else {\n          range.setEnd(endContainer, 0);\n        }\n      } catch (e) {\n        missed = this.fixMiss(endSteps, cfi.end.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n        range.setEnd(missed.container, missed.offset);\n      }\n    } // doc.defaultView.getSelection().addRange(range);\n\n\n    return range;\n  }\n  /**\n   * Check if a string is wrapped with \"epubcfi()\"\n   * @param {string} str\n   * @returns {boolean}\n   */\n\n\n  isCfiString(str) {\n    if (typeof str === \"string\" && str.indexOf(\"epubcfi(\") === 0 && str[str.length - 1] === \")\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  generateChapterComponent(_spineNodeIndex, _pos, id) {\n    var pos = parseInt(_pos),\n        spineNodeIndex = (_spineNodeIndex + 1) * 2,\n        cfi = \"/\" + spineNodeIndex + \"/\";\n    cfi += (pos + 1) * 2;\n\n    if (id) {\n      cfi += \"[\" + id + \"]\";\n    }\n\n    return cfi;\n  }\n  /**\n   * Collapse a CFI Range to a single CFI Position\n   * @param {boolean} [toStart=false]\n   */\n\n\n  collapse(toStart) {\n    if (!this.range) {\n      return;\n    }\n\n    this.range = false;\n\n    if (toStart) {\n      this.path.steps = this.path.steps.concat(this.start.steps);\n      this.path.terminal = this.start.terminal;\n    } else {\n      this.path.steps = this.path.steps.concat(this.end.steps);\n      this.path.terminal = this.end.terminal;\n    }\n  }\n\n}\n\nvar _default = EpubCFI;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\n * Hooks allow for injecting functions that must all complete in order before finishing\n * They will execute in parallel but all must finish before continuing\n * Functions may return a promise if they are async.\n * @param {any} context scope of this\n * @example this.content = new EPUBJS.Hook(this);\n */\nclass Hook {\n  constructor(context) {\n    this.context = context || this;\n    this.hooks = [];\n  }\n  /**\n   * Adds a function to be run before a hook completes\n   * @example this.content.register(function(){...});\n   */\n\n\n  register() {\n    for (var i = 0; i < arguments.length; ++i) {\n      if (typeof arguments[i] === \"function\") {\n        this.hooks.push(arguments[i]);\n      } else {\n        // unpack array\n        for (var j = 0; j < arguments[i].length; ++j) {\n          this.hooks.push(arguments[i][j]);\n        }\n      }\n    }\n  }\n  /**\n   * Removes a function\n   * @example this.content.deregister(function(){...});\n   */\n\n\n  deregister(func) {\n    let hook;\n\n    for (let i = 0; i < this.hooks.length; i++) {\n      hook = this.hooks[i];\n\n      if (hook === func) {\n        this.hooks.splice(i, 1);\n        break;\n      }\n    }\n  }\n  /**\n   * Triggers a hook to run all functions\n   * @example this.content.trigger(args).then(function(){...});\n   */\n\n\n  trigger() {\n    var args = arguments;\n    var context = this.context;\n    var promises = [];\n    this.hooks.forEach(function (task) {\n      try {\n        var executing = task.apply(context, args);\n      } catch (err) {\n        console.log(err);\n      }\n\n      if (executing && typeof executing[\"then\"] === \"function\") {\n        // Task is a function that returns a promise\n        promises.push(executing);\n      } // Otherwise Task resolves immediately, continue\n\n    });\n    return Promise.all(promises);\n  } // Adds a function to be run before a hook completes\n\n\n  list() {\n    return this.hooks;\n  }\n\n  clear() {\n    return this.hooks = [];\n  }\n\n}\n\nvar _default = Hook;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.replaceBase = replaceBase;\nexports.replaceCanonical = replaceCanonical;\nexports.replaceLinks = replaceLinks;\nexports.replaceMeta = replaceMeta;\nexports.substitute = substitute;\n\nvar _core = require(\"./core\");\n\nvar _url = _interopRequireDefault(require(\"./url\"));\n\nvar _path = _interopRequireDefault(require(\"./path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction replaceBase(doc, section) {\n  var base;\n  var head;\n  var url = section.url;\n  var absolute = url.indexOf(\"://\") > -1;\n\n  if (!doc) {\n    return;\n  }\n\n  head = (0, _core.qs)(doc, \"head\");\n  base = (0, _core.qs)(head, \"base\");\n\n  if (!base) {\n    base = doc.createElement(\"base\");\n    head.insertBefore(base, head.firstChild);\n  } // Fix for Safari crashing if the url doesn't have an origin\n\n\n  if (!absolute && window && window.location) {\n    url = window.location.origin + url;\n  }\n\n  base.setAttribute(\"href\", url);\n}\n\nfunction replaceCanonical(doc, section) {\n  var head;\n  var link;\n  var url = section.canonical;\n\n  if (!doc) {\n    return;\n  }\n\n  head = (0, _core.qs)(doc, \"head\");\n  link = (0, _core.qs)(head, \"link[rel='canonical']\");\n\n  if (link) {\n    link.setAttribute(\"href\", url);\n  } else {\n    link = doc.createElement(\"link\");\n    link.setAttribute(\"rel\", \"canonical\");\n    link.setAttribute(\"href\", url);\n    head.appendChild(link);\n  }\n}\n\nfunction replaceMeta(doc, section) {\n  var head;\n  var meta;\n  var id = section.idref;\n\n  if (!doc) {\n    return;\n  }\n\n  head = (0, _core.qs)(doc, \"head\");\n  meta = (0, _core.qs)(head, \"link[property='dc.identifier']\");\n\n  if (meta) {\n    meta.setAttribute(\"content\", id);\n  } else {\n    meta = doc.createElement(\"meta\");\n    meta.setAttribute(\"name\", \"dc.identifier\");\n    meta.setAttribute(\"content\", id);\n    head.appendChild(meta);\n  }\n} // TODO: move me to Contents\n\n\nfunction replaceLinks(contents, fn) {\n  var links = contents.querySelectorAll(\"a[href]\");\n\n  if (!links.length) {\n    return;\n  }\n\n  var base = (0, _core.qs)(contents.ownerDocument, \"base\");\n  var location = base ? base.getAttribute(\"href\") : undefined;\n\n  var replaceLink = function (link) {\n    var href = link.getAttribute(\"href\");\n\n    if (href.indexOf(\"mailto:\") === 0) {\n      return;\n    }\n\n    var absolute = href.indexOf(\"://\") > -1;\n\n    if (absolute) {\n      link.setAttribute(\"target\", \"_blank\");\n    } else {\n      var linkUrl;\n\n      try {\n        linkUrl = new _url.default(href, location);\n      } catch (error) {// NOOP\n      }\n\n      link.onclick = function () {\n        if (linkUrl && linkUrl.hash) {\n          fn(linkUrl.Path.path + linkUrl.hash);\n        } else if (linkUrl) {\n          fn(linkUrl.Path.path);\n        } else {\n          fn(href);\n        }\n\n        return false;\n      };\n    }\n  }.bind(this);\n\n  for (var i = 0; i < links.length; i++) {\n    replaceLink(links[i]);\n  }\n}\n\nfunction substitute(content, urls, replacements) {\n  urls.forEach(function (url, i) {\n    if (url && replacements[i]) {\n      // Account for special characters in the file name.\n      // See https://stackoverflow.com/a/6318729.\n      url = url.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n      content = content.replace(new RegExp(url, \"g\"), replacements[i]);\n    }\n  });\n  return content;\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./core\");\n\nvar _path = _interopRequireDefault(require(\"./path\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction request(url, type, withCredentials, headers) {\n  var supportsURL = typeof window != \"undefined\" ? window.URL : false; // TODO: fallback for url if window isn't defined\n\n  var BLOB_RESPONSE = supportsURL ? \"blob\" : \"arraybuffer\";\n  var deferred = new _core.defer();\n  var xhr = new XMLHttpRequest(); //-- Check from PDF.js:\n  //   https://github.com/mozilla/pdf.js/blob/master/web/compatibility.js\n\n  var xhrPrototype = XMLHttpRequest.prototype;\n  var header;\n\n  if (!(\"overrideMimeType\" in xhrPrototype)) {\n    // IE10 might have response, but not overrideMimeType\n    Object.defineProperty(xhrPrototype, \"overrideMimeType\", {\n      value: function xmlHttpRequestOverrideMimeType() {}\n    });\n  }\n\n  if (withCredentials) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onreadystatechange = handler;\n  xhr.onerror = err;\n  xhr.open(\"GET\", url, true);\n\n  for (header in headers) {\n    xhr.setRequestHeader(header, headers[header]);\n  }\n\n  if (type == \"json\") {\n    xhr.setRequestHeader(\"Accept\", \"application/json\");\n  } // If type isn\"t set, determine it from the file extension\n\n\n  if (!type) {\n    type = new _path.default(url).extension;\n  }\n\n  if (type == \"blob\") {\n    xhr.responseType = BLOB_RESPONSE;\n  }\n\n  if ((0, _core.isXml)(type)) {\n    // xhr.responseType = \"document\";\n    xhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n  }\n\n  if (type == \"xhtml\") {// xhr.responseType = \"document\";\n  }\n\n  if (type == \"html\" || type == \"htm\") {// xhr.responseType = \"document\";\n  }\n\n  if (type == \"binary\") {\n    xhr.responseType = \"arraybuffer\";\n  }\n\n  xhr.send();\n\n  function err(e) {\n    deferred.reject(e);\n  }\n\n  function handler() {\n    if (this.readyState === XMLHttpRequest.DONE) {\n      var responseXML = false;\n\n      if (this.responseType === \"\" || this.responseType === \"document\") {\n        responseXML = this.responseXML;\n      }\n\n      if (this.status === 200 || this.status === 0 || responseXML) {\n        //-- Firefox is reporting 0 for blob urls\n        var r;\n\n        if (!this.response && !responseXML) {\n          deferred.reject({\n            status: this.status,\n            message: \"Empty Response\",\n            stack: new Error().stack\n          });\n          return deferred.promise;\n        }\n\n        if (this.status === 403) {\n          deferred.reject({\n            status: this.status,\n            response: this.response,\n            message: \"Forbidden\",\n            stack: new Error().stack\n          });\n          return deferred.promise;\n        }\n\n        if (responseXML) {\n          r = this.responseXML;\n        } else if ((0, _core.isXml)(type)) {\n          // xhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n          // If this.responseXML wasn't set, try to parse using a DOMParser from text\n          r = (0, _core.parse)(this.response, \"text/xml\");\n        } else if (type == \"xhtml\") {\n          r = (0, _core.parse)(this.response, \"application/xhtml+xml\");\n        } else if (type == \"html\" || type == \"htm\") {\n          r = (0, _core.parse)(this.response, \"text/html\");\n        } else if (type == \"json\") {\n          r = JSON.parse(this.response);\n        } else if (type == \"blob\") {\n          if (supportsURL) {\n            r = this.response;\n          } else {\n            //-- Safari doesn't support responseType blob, so create a blob from arraybuffer\n            r = new Blob([this.response]);\n          }\n        } else {\n          r = this.response;\n        }\n\n        deferred.resolve(r);\n      } else {\n        deferred.reject({\n          status: this.status,\n          message: this.response,\n          stack: new Error().stack\n        });\n      }\n    }\n  }\n\n  return deferred.promise;\n}\n\nvar _default = request;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _hook = _interopRequireDefault(require(\"./utils/hook\"));\n\nvar _replacements = require(\"./utils/replacements\");\n\nvar _request2 = _interopRequireDefault(require(\"./utils/request\"));\n\nvar _xmldom = require(\"@xmldom/xmldom\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Represents a Section of the Book\n *\n * In most books this is equivalent to a Chapter\n * @param {object} item  The spine item representing the section\n * @param {object} hooks hooks for serialize and content\n */\nclass Section {\n  constructor(item, hooks) {\n    this.idref = item.idref;\n    this.linear = item.linear === \"yes\";\n    this.properties = item.properties;\n    this.index = item.index;\n    this.href = item.href;\n    this.url = item.url;\n    this.canonical = item.canonical;\n    this.next = item.next;\n    this.prev = item.prev;\n    this.cfiBase = item.cfiBase;\n\n    if (hooks) {\n      this.hooks = hooks;\n    } else {\n      this.hooks = {};\n      this.hooks.serialize = new _hook.default(this);\n      this.hooks.content = new _hook.default(this);\n    }\n\n    this.document = undefined;\n    this.contents = undefined;\n    this.output = undefined;\n  }\n  /**\n   * Load the section from its url\n   * @param  {method} [_request] a request method to use for loading\n   * @return {document} a promise with the xml document\n   */\n\n\n  load(_request) {\n    var request = _request || this.request || _request2.default;\n    var loading = new _core.defer();\n    var loaded = loading.promise;\n\n    if (this.contents) {\n      loading.resolve(this.contents);\n    } else {\n      request(this.url).then(function (xml) {\n        // var directory = new Url(this.url).directory;\n        this.document = xml;\n        this.contents = xml.documentElement;\n        return this.hooks.content.trigger(this.document, this);\n      }.bind(this)).then(function () {\n        loading.resolve(this.contents);\n      }.bind(this)).catch(function (error) {\n        loading.reject(error);\n      });\n    }\n\n    return loaded;\n  }\n  /**\n   * Adds a base tag for resolving urls in the section\n   * @private\n   */\n\n\n  base() {\n    return (0, _replacements.replaceBase)(this.document, this);\n  }\n  /**\n   * Render the contents of a section\n   * @param  {method} [_request] a request method to use for loading\n   * @return {string} output a serialized XML Document\n   */\n\n\n  render(_request) {\n    var rendering = new _core.defer();\n    var rendered = rendering.promise;\n    this.output; // TODO: better way to return this from hooks?\n\n    this.load(_request).then(function (contents) {\n      var userAgent = typeof navigator !== 'undefined' && navigator.userAgent || '';\n      var isIE = userAgent.indexOf('Trident') >= 0;\n      var Serializer;\n\n      if (typeof XMLSerializer === \"undefined\" || isIE) {\n        Serializer = _xmldom.DOMParser;\n      } else {\n        Serializer = XMLSerializer;\n      }\n\n      var serializer = new Serializer();\n      this.output = serializer.serializeToString(contents);\n      return this.output;\n    }.bind(this)).then(function () {\n      return this.hooks.serialize.trigger(this.output, this);\n    }.bind(this)).then(function () {\n      rendering.resolve(this.output);\n    }.bind(this)).catch(function (error) {\n      rendering.reject(error);\n    });\n    return rendered;\n  }\n  /**\n   * Find a string in a section\n   * @param  {string} _query The query string to find\n   * @return {object[]} A list of matches, with form {cfi, excerpt}\n   */\n\n\n  find(_query) {\n    var section = this;\n    var matches = [];\n\n    var query = _query.toLowerCase();\n\n    var find = function (node) {\n      var text = node.textContent.toLowerCase();\n      var range = section.document.createRange();\n      var cfi;\n      var pos;\n      var last = -1;\n      var excerpt;\n      var limit = 150;\n\n      while (pos != -1) {\n        // Search for the query\n        pos = text.indexOf(query, last + 1);\n\n        if (pos != -1) {\n          // We found it! Generate a CFI\n          range = section.document.createRange();\n          range.setStart(node, pos);\n          range.setEnd(node, pos + query.length);\n          cfi = section.cfiFromRange(range); // Generate the excerpt\n\n          if (node.textContent.length < limit) {\n            excerpt = node.textContent;\n          } else {\n            excerpt = node.textContent.substring(pos - limit / 2, pos + limit / 2);\n            excerpt = \"...\" + excerpt + \"...\";\n          } // Add the CFI to the matches list\n\n\n          matches.push({\n            cfi: cfi,\n            excerpt: excerpt\n          });\n        }\n\n        last = pos;\n      }\n    };\n\n    (0, _core.sprint)(section.document, function (node) {\n      find(node);\n    });\n    return matches;\n  }\n\n  /**\n   * Search a string in multiple sequential Element of the section. If the document.createTreeWalker api is missed(eg: IE8), use `find` as a fallback.\n   * @param  {string} _query The query string to search\n   * @param  {int} maxSeqEle The maximum number of Element that are combined for search, default value is 5.\n   * @return {object[]} A list of matches, with form {cfi, excerpt}\n   */\n  search(_query, maxSeqEle = 5) {\n    if (typeof document.createTreeWalker == \"undefined\") {\n      return this.find(_query);\n    }\n\n    let matches = [];\n    const excerptLimit = 150;\n    const section = this;\n\n    const query = _query.toLowerCase();\n\n    const search = function (nodeList) {\n      const textWithCase = nodeList.reduce((acc, current) => {\n        return acc + current.textContent;\n      }, \"\");\n      const text = textWithCase.toLowerCase();\n      const pos = text.indexOf(query);\n\n      if (pos != -1) {\n        const startNodeIndex = 0,\n              endPos = pos + query.length;\n        let endNodeIndex = 0,\n            l = 0;\n\n        if (pos < nodeList[startNodeIndex].length) {\n          let cfi;\n\n          while (endNodeIndex < nodeList.length - 1) {\n            l += nodeList[endNodeIndex].length;\n\n            if (endPos <= l) {\n              break;\n            }\n\n            endNodeIndex += 1;\n          }\n\n          let startNode = nodeList[startNodeIndex],\n              endNode = nodeList[endNodeIndex];\n          let range = section.document.createRange();\n          range.setStart(startNode, pos);\n          let beforeEndLengthCount = nodeList.slice(0, endNodeIndex).reduce((acc, current) => {\n            return acc + current.textContent.length;\n          }, 0);\n          range.setEnd(endNode, beforeEndLengthCount > endPos ? endPos : endPos - beforeEndLengthCount);\n          cfi = section.cfiFromRange(range);\n          let excerpt = nodeList.slice(0, endNodeIndex + 1).reduce((acc, current) => {\n            return acc + current.textContent;\n          }, \"\");\n\n          if (excerpt.length > excerptLimit) {\n            excerpt = excerpt.substring(pos - excerptLimit / 2, pos + excerptLimit / 2);\n            excerpt = \"...\" + excerpt + \"...\";\n          }\n\n          matches.push({\n            cfi: cfi,\n            excerpt: excerpt\n          });\n        }\n      }\n    };\n\n    const treeWalker = document.createTreeWalker(section.document, NodeFilter.SHOW_TEXT, null, false);\n    let node,\n        nodeList = [];\n\n    while (node = treeWalker.nextNode()) {\n      nodeList.push(node);\n\n      if (nodeList.length == maxSeqEle) {\n        search(nodeList.slice(0, maxSeqEle));\n        nodeList = nodeList.slice(1, maxSeqEle);\n      }\n    }\n\n    if (nodeList.length > 0) {\n      search(nodeList);\n    }\n\n    return matches;\n  }\n  /**\n  * Reconciles the current chapters layout properties with\n  * the global layout properties.\n  * @param {object} globalLayout  The global layout settings object, chapter properties string\n  * @return {object} layoutProperties Object with layout properties\n  */\n\n\n  reconcileLayoutSettings(globalLayout) {\n    //-- Get the global defaults\n    var settings = {\n      layout: globalLayout.layout,\n      spread: globalLayout.spread,\n      orientation: globalLayout.orientation\n    }; //-- Get the chapter's display type\n\n    this.properties.forEach(function (prop) {\n      var rendition = prop.replace(\"rendition:\", \"\");\n      var split = rendition.indexOf(\"-\");\n      var property, value;\n\n      if (split != -1) {\n        property = rendition.slice(0, split);\n        value = rendition.slice(split + 1);\n        settings[property] = value;\n      }\n    });\n    return settings;\n  }\n  /**\n   * Get a CFI from a Range in the Section\n   * @param  {range} _range\n   * @return {string} cfi an EpubCFI string\n   */\n\n\n  cfiFromRange(_range) {\n    return new _epubcfi.default(_range, this.cfiBase).toString();\n  }\n  /**\n   * Get a CFI from an Element in the Section\n   * @param  {element} el\n   * @return {string} cfi an EpubCFI string\n   */\n\n\n  cfiFromElement(el) {\n    return new _epubcfi.default(el, this.cfiBase).toString();\n  }\n  /**\n   * Unload the section document\n   */\n\n\n  unload() {\n    this.document = undefined;\n    this.contents = undefined;\n    this.output = undefined;\n  }\n\n  destroy() {\n    this.unload();\n    this.hooks.serialize.clear();\n    this.hooks.content.clear();\n    this.hooks = undefined;\n    this.idref = undefined;\n    this.linear = undefined;\n    this.properties = undefined;\n    this.index = undefined;\n    this.href = undefined;\n    this.url = undefined;\n    this.next = undefined;\n    this.prev = undefined;\n    this.cfiBase = undefined;\n  }\n\n}\n\nvar _default = Section;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _hook = _interopRequireDefault(require(\"./utils/hook\"));\n\nvar _section = _interopRequireDefault(require(\"./section\"));\n\nvar _replacements = require(\"./utils/replacements\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * A collection of Spine Items\n */\nclass Spine {\n  constructor() {\n    this.spineItems = [];\n    this.spineByHref = {};\n    this.spineById = {};\n    this.hooks = {};\n    this.hooks.serialize = new _hook.default();\n    this.hooks.content = new _hook.default(); // Register replacements\n\n    this.hooks.content.register(_replacements.replaceBase);\n    this.hooks.content.register(_replacements.replaceCanonical);\n    this.hooks.content.register(_replacements.replaceMeta);\n    this.epubcfi = new _epubcfi.default();\n    this.loaded = false;\n    this.items = undefined;\n    this.manifest = undefined;\n    this.spineNodeIndex = undefined;\n    this.baseUrl = undefined;\n    this.length = undefined;\n  }\n  /**\n   * Unpack items from a opf into spine items\n   * @param  {Packaging} _package\n   * @param  {method} resolver URL resolver\n   * @param  {method} canonical Resolve canonical url\n   */\n\n\n  unpack(_package, resolver, canonical) {\n    this.items = _package.spine;\n    this.manifest = _package.manifest;\n    this.spineNodeIndex = _package.spineNodeIndex;\n    this.baseUrl = _package.baseUrl || _package.basePath || \"\";\n    this.length = this.items.length;\n    this.items.forEach((item, index) => {\n      var manifestItem = this.manifest[item.idref];\n      var spineItem;\n      item.index = index;\n      item.cfiBase = this.epubcfi.generateChapterComponent(this.spineNodeIndex, item.index, item.id);\n\n      if (item.href) {\n        item.url = resolver(item.href, true);\n        item.canonical = canonical(item.href);\n      }\n\n      if (manifestItem) {\n        item.href = manifestItem.href;\n        item.url = resolver(item.href, true);\n        item.canonical = canonical(item.href);\n\n        if (manifestItem.properties.length) {\n          item.properties.push.apply(item.properties, manifestItem.properties);\n        }\n      }\n\n      if (item.linear === \"yes\") {\n        item.prev = function () {\n          let prevIndex = item.index;\n\n          while (prevIndex > 0) {\n            let prev = this.get(prevIndex - 1);\n\n            if (prev && prev.linear) {\n              return prev;\n            }\n\n            prevIndex -= 1;\n          }\n\n          return;\n        }.bind(this);\n\n        item.next = function () {\n          let nextIndex = item.index;\n\n          while (nextIndex < this.spineItems.length - 1) {\n            let next = this.get(nextIndex + 1);\n\n            if (next && next.linear) {\n              return next;\n            }\n\n            nextIndex += 1;\n          }\n\n          return;\n        }.bind(this);\n      } else {\n        item.prev = function () {\n          return;\n        };\n\n        item.next = function () {\n          return;\n        };\n      }\n\n      spineItem = new _section.default(item, this.hooks);\n      this.append(spineItem);\n    });\n    this.loaded = true;\n  }\n  /**\n   * Get an item from the spine\n   * @param  {string|number} [target]\n   * @return {Section} section\n   * @example spine.get();\n   * @example spine.get(1);\n   * @example spine.get(\"chap1.html\");\n   * @example spine.get(\"#id1234\");\n   */\n\n\n  get(target) {\n    var index = 0;\n\n    if (typeof target === \"undefined\") {\n      while (index < this.spineItems.length) {\n        let next = this.spineItems[index];\n\n        if (next && next.linear) {\n          break;\n        }\n\n        index += 1;\n      }\n    } else if (this.epubcfi.isCfiString(target)) {\n      let cfi = new _epubcfi.default(target);\n      index = cfi.spinePos;\n    } else if (typeof target === \"number\" || isNaN(target) === false) {\n      index = target;\n    } else if (typeof target === \"string\" && target.indexOf(\"#\") === 0) {\n      index = this.spineById[target.substring(1)];\n    } else if (typeof target === \"string\") {\n      // Remove fragments\n      target = target.split(\"#\")[0];\n      index = this.spineByHref[target] || this.spineByHref[encodeURI(target)];\n    }\n\n    return this.spineItems[index] || null;\n  }\n  /**\n   * Append a Section to the Spine\n   * @private\n   * @param  {Section} section\n   */\n\n\n  append(section) {\n    var index = this.spineItems.length;\n    section.index = index;\n    this.spineItems.push(section); // Encode and Decode href lookups\n    // see pr for details: https://github.com/futurepress/epub.js/pull/358\n\n    this.spineByHref[decodeURI(section.href)] = index;\n    this.spineByHref[encodeURI(section.href)] = index;\n    this.spineByHref[section.href] = index;\n    this.spineById[section.idref] = index;\n    return index;\n  }\n  /**\n   * Prepend a Section to the Spine\n   * @private\n   * @param  {Section} section\n   */\n\n\n  prepend(section) {\n    // var index = this.spineItems.unshift(section);\n    this.spineByHref[section.href] = 0;\n    this.spineById[section.idref] = 0; // Re-index\n\n    this.spineItems.forEach(function (item, index) {\n      item.index = index;\n    });\n    return 0;\n  } // insert(section, index) {\n  //\n  // };\n\n  /**\n   * Remove a Section from the Spine\n   * @private\n   * @param  {Section} section\n   */\n\n\n  remove(section) {\n    var index = this.spineItems.indexOf(section);\n\n    if (index > -1) {\n      delete this.spineByHref[section.href];\n      delete this.spineById[section.idref];\n      return this.spineItems.splice(index, 1);\n    }\n  }\n  /**\n   * Loop over the Sections in the Spine\n   * @return {method} forEach\n   */\n\n\n  each() {\n    return this.spineItems.forEach.apply(this.spineItems, arguments);\n  }\n  /**\n   * Find the first Section in the Spine\n   * @return {Section} first section\n   */\n\n\n  first() {\n    let index = 0;\n\n    do {\n      let next = this.get(index);\n\n      if (next && next.linear) {\n        return next;\n      }\n\n      index += 1;\n    } while (index < this.spineItems.length);\n  }\n  /**\n   * Find the last Section in the Spine\n   * @return {Section} last section\n   */\n\n\n  last() {\n    let index = this.spineItems.length - 1;\n\n    do {\n      let prev = this.get(index);\n\n      if (prev && prev.linear) {\n        return prev;\n      }\n\n      index -= 1;\n    } while (index >= 0);\n  }\n\n  destroy() {\n    this.each(section => section.destroy());\n    this.spineItems = undefined;\n    this.spineByHref = undefined;\n    this.spineById = undefined;\n    this.hooks.serialize.clear();\n    this.hooks.content.clear();\n    this.hooks = undefined;\n    this.epubcfi = undefined;\n    this.loaded = false;\n    this.items = undefined;\n    this.manifest = undefined;\n    this.spineNodeIndex = undefined;\n    this.baseUrl = undefined;\n    this.length = undefined;\n  }\n\n}\n\nvar _default = Spine;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Task = void 0;\n\nvar _core = require(\"./core\");\n\n/**\n * Queue for handling tasks one at a time\n * @class\n * @param {scope} context what this will resolve to in the tasks\n */\nclass Queue {\n  constructor(context) {\n    this._q = [];\n    this.context = context;\n    this.tick = _core.requestAnimationFrame;\n    this.running = false;\n    this.paused = false;\n  }\n  /**\n   * Add an item to the queue\n   * @return {Promise}\n   */\n\n\n  enqueue() {\n    var deferred, promise;\n    var queued;\n    var task = [].shift.call(arguments);\n    var args = arguments; // Handle single args without context\n    // if(args && !Array.isArray(args)) {\n    //   args = [args];\n    // }\n\n    if (!task) {\n      throw new Error(\"No Task Provided\");\n    }\n\n    if (typeof task === \"function\") {\n      deferred = new _core.defer();\n      promise = deferred.promise;\n      queued = {\n        \"task\": task,\n        \"args\": args,\n        //\"context\"  : context,\n        \"deferred\": deferred,\n        \"promise\": promise\n      };\n    } else {\n      // Task is a promise\n      queued = {\n        \"promise\": task\n      };\n    }\n\n    this._q.push(queued); // Wait to start queue flush\n\n\n    if (this.paused == false && !this.running) {\n      // setTimeout(this.flush.bind(this), 0);\n      // this.tick.call(window, this.run.bind(this));\n      this.run();\n    }\n\n    return queued.promise;\n  }\n  /**\n   * Run one item\n   * @return {Promise}\n   */\n\n\n  dequeue() {\n    var inwait, task, result;\n\n    if (this._q.length && !this.paused) {\n      inwait = this._q.shift();\n      task = inwait.task;\n\n      if (task) {\n        // console.log(task)\n        result = task.apply(this.context, inwait.args);\n\n        if (result && typeof result[\"then\"] === \"function\") {\n          // Task is a function that returns a promise\n          return result.then(function () {\n            inwait.deferred.resolve.apply(this.context, arguments);\n          }.bind(this), function () {\n            inwait.deferred.reject.apply(this.context, arguments);\n          }.bind(this));\n        } else {\n          // Task resolves immediately\n          inwait.deferred.resolve.apply(this.context, result);\n          return inwait.promise;\n        }\n      } else if (inwait.promise) {\n        // Task is a promise\n        return inwait.promise;\n      }\n    } else {\n      inwait = new _core.defer();\n      inwait.deferred.resolve();\n      return inwait.promise;\n    }\n  } // Run All Immediately\n\n\n  dump() {\n    while (this._q.length) {\n      this.dequeue();\n    }\n  }\n  /**\n   * Run all tasks sequentially, at convince\n   * @return {Promise}\n   */\n\n\n  run() {\n    if (!this.running) {\n      this.running = true;\n      this.defered = new _core.defer();\n    }\n\n    this.tick.call(window, () => {\n      if (this._q.length) {\n        this.dequeue().then(function () {\n          this.run();\n        }.bind(this));\n      } else {\n        this.defered.resolve();\n        this.running = undefined;\n      }\n    }); // Unpause\n\n    if (this.paused == true) {\n      this.paused = false;\n    }\n\n    return this.defered.promise;\n  }\n  /**\n   * Flush all, as quickly as possible\n   * @return {Promise}\n   */\n\n\n  flush() {\n    if (this.running) {\n      return this.running;\n    }\n\n    if (this._q.length) {\n      this.running = this.dequeue().then(function () {\n        this.running = undefined;\n        return this.flush();\n      }.bind(this));\n      return this.running;\n    }\n  }\n  /**\n   * Clear all items in wait\n   */\n\n\n  clear() {\n    this._q = [];\n  }\n  /**\n   * Get the number of tasks in the queue\n   * @return {number} tasks\n   */\n\n\n  length() {\n    return this._q.length;\n  }\n  /**\n   * Pause a running queue\n   */\n\n\n  pause() {\n    this.paused = true;\n  }\n  /**\n   * End the queue\n   */\n\n\n  stop() {\n    this._q = [];\n    this.running = false;\n    this.paused = true;\n  }\n\n}\n/**\n * Create a new task from a callback\n * @class\n * @private\n * @param {function} task\n * @param {array} args\n * @param {scope} context\n * @return {function} task\n */\n\n\nclass Task {\n  constructor(task, args, context) {\n    return function () {\n      var toApply = arguments || [];\n      return new Promise((resolve, reject) => {\n        var callback = function (value, err) {\n          if (!value && err) {\n            reject(err);\n          } else {\n            resolve(value);\n          }\n        }; // Add the callback to the arguments list\n\n\n        toApply.push(callback); // Apply all arguments to the functions\n\n        task.apply(context || this, toApply);\n      });\n    };\n  }\n\n}\n\nexports.Task = Task;\nvar _default = Queue;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EVENTS = exports.EPUBJS_VERSION = exports.DOM_EVENTS = void 0;\nconst EPUBJS_VERSION = \"0.3\"; // Dom events to listen for\n\nexports.EPUBJS_VERSION = EPUBJS_VERSION;\nconst DOM_EVENTS = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"mousemove\", \"click\", \"touchend\", \"touchstart\", \"touchmove\"];\nexports.DOM_EVENTS = DOM_EVENTS;\nconst EVENTS = {\n  BOOK: {\n    OPEN_FAILED: \"openFailed\"\n  },\n  CONTENTS: {\n    EXPAND: \"expand\",\n    RESIZE: \"resize\",\n    SELECTED: \"selected\",\n    SELECTED_RANGE: \"selectedRange\",\n    LINK_CLICKED: \"linkClicked\"\n  },\n  LOCATIONS: {\n    CHANGED: \"changed\"\n  },\n  MANAGERS: {\n    RESIZE: \"resize\",\n    RESIZED: \"resized\",\n    ORIENTATION_CHANGE: \"orientationchange\",\n    ADDED: \"added\",\n    SCROLL: \"scroll\",\n    SCROLLED: \"scrolled\",\n    REMOVED: \"removed\"\n  },\n  VIEWS: {\n    AXIS: \"axis\",\n    WRITING_MODE: \"writingMode\",\n    LOAD_ERROR: \"loaderror\",\n    RENDERED: \"rendered\",\n    RESIZED: \"resized\",\n    DISPLAYED: \"displayed\",\n    SHOWN: \"shown\",\n    HIDDEN: \"hidden\",\n    MARK_CLICKED: \"markClicked\"\n  },\n  RENDITION: {\n    STARTED: \"started\",\n    ATTACHED: \"attached\",\n    DISPLAYED: \"displayed\",\n    DISPLAY_ERROR: \"displayerror\",\n    RENDERED: \"rendered\",\n    REMOVED: \"removed\",\n    RESIZED: \"resized\",\n    ORIENTATION_CHANGE: \"orientationchange\",\n    LOCATION_CHANGED: \"locationChanged\",\n    RELOCATED: \"relocated\",\n    MARK_CLICKED: \"markClicked\",\n    SELECTED: \"selected\",\n    LAYOUT: \"layout\"\n  },\n  LAYOUT: {\n    UPDATED: \"updated\"\n  },\n  ANNOTATION: {\n    ATTACH: \"attach\",\n    DETACH: \"detach\"\n  }\n};\nexports.EVENTS = EVENTS;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\nvar _queue = _interopRequireDefault(require(\"./utils/queue\"));\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _constants = require(\"./utils/constants\");\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Find Locations for a Book\n * @param {Spine} spine\n * @param {request} request\n * @param {number} [pause=100]\n */\nclass Locations {\n  constructor(spine, request, pause) {\n    this.spine = spine;\n    this.request = request;\n    this.pause = pause || 100;\n    this.q = new _queue.default(this);\n    this.epubcfi = new _epubcfi.default();\n    this._locations = [];\n    this._locationsWords = [];\n    this.total = 0;\n    this.break = 150;\n    this._current = 0;\n    this._wordCounter = 0;\n    this.currentLocation = '';\n    this._currentCfi = '';\n    this.processingTimeout = undefined;\n  }\n  /**\n   * Load all of sections in the book to generate locations\n   * @param  {int} chars how many chars to split on\n   * @return {Promise<Array<string>>} locations\n   */\n\n\n  generate(chars) {\n    if (chars) {\n      this.break = chars;\n    }\n\n    this.q.pause();\n    this.spine.each(function (section) {\n      if (section.linear) {\n        this.q.enqueue(this.process.bind(this), section);\n      }\n    }.bind(this));\n    return this.q.run().then(function () {\n      this.total = this._locations.length - 1;\n\n      if (this._currentCfi) {\n        this.currentLocation = this._currentCfi;\n      }\n\n      return this._locations; // console.log(this.percentage(this.book.rendition.location.start), this.percentage(this.book.rendition.location.end));\n    }.bind(this));\n  }\n\n  createRange() {\n    return {\n      startContainer: undefined,\n      startOffset: undefined,\n      endContainer: undefined,\n      endOffset: undefined\n    };\n  }\n\n  process(section) {\n    return section.load(this.request).then(function (contents) {\n      var completed = new _core.defer();\n      var locations = this.parse(contents, section.cfiBase);\n      this._locations = this._locations.concat(locations);\n      section.unload();\n      this.processingTimeout = setTimeout(() => completed.resolve(locations), this.pause);\n      return completed.promise;\n    }.bind(this));\n  }\n\n  parse(contents, cfiBase, chars) {\n    var locations = [];\n    var range;\n    var doc = contents.ownerDocument;\n    var body = (0, _core.qs)(doc, \"body\");\n    var counter = 0;\n    var prev;\n\n    var _break = chars || this.break;\n\n    var parser = function (node) {\n      var len = node.length;\n      var dist;\n      var pos = 0;\n\n      if (node.textContent.trim().length === 0) {\n        return false; // continue\n      } // Start range\n\n\n      if (counter == 0) {\n        range = this.createRange();\n        range.startContainer = node;\n        range.startOffset = 0;\n      }\n\n      dist = _break - counter; // Node is smaller than a break,\n      // skip over it\n\n      if (dist > len) {\n        counter += len;\n        pos = len;\n      }\n\n      while (pos < len) {\n        dist = _break - counter;\n\n        if (counter === 0) {\n          // Start new range\n          pos += 1;\n          range = this.createRange();\n          range.startContainer = node;\n          range.startOffset = pos;\n        } // pos += dist;\n        // Gone over\n\n\n        if (pos + dist >= len) {\n          // Continue counter for next node\n          counter += len - pos; // break\n\n          pos = len; // At End\n        } else {\n          // Advance pos\n          pos += dist; // End the previous range\n\n          range.endContainer = node;\n          range.endOffset = pos; // cfi = section.cfiFromRange(range);\n\n          let cfi = new _epubcfi.default(range, cfiBase).toString();\n          locations.push(cfi);\n          counter = 0;\n        }\n      }\n\n      prev = node;\n    };\n\n    (0, _core.sprint)(body, parser.bind(this)); // Close remaining\n\n    if (range && range.startContainer && prev) {\n      range.endContainer = prev;\n      range.endOffset = prev.length;\n      let cfi = new _epubcfi.default(range, cfiBase).toString();\n      locations.push(cfi);\n      counter = 0;\n    }\n\n    return locations;\n  }\n  /**\n   * Load all of sections in the book to generate locations\n   * @param  {string} startCfi start position\n   * @param  {int} wordCount how many words to split on\n   * @param  {int} count result count\n   * @return {object} locations\n   */\n\n\n  generateFromWords(startCfi, wordCount, count) {\n    var start = startCfi ? new _epubcfi.default(startCfi) : undefined;\n    this.q.pause();\n    this._locationsWords = [];\n    this._wordCounter = 0;\n    this.spine.each(function (section) {\n      if (section.linear) {\n        if (start) {\n          if (section.index >= start.spinePos) {\n            this.q.enqueue(this.processWords.bind(this), section, wordCount, start, count);\n          }\n        } else {\n          this.q.enqueue(this.processWords.bind(this), section, wordCount, start, count);\n        }\n      }\n    }.bind(this));\n    return this.q.run().then(function () {\n      if (this._currentCfi) {\n        this.currentLocation = this._currentCfi;\n      }\n\n      return this._locationsWords;\n    }.bind(this));\n  }\n\n  processWords(section, wordCount, startCfi, count) {\n    if (count && this._locationsWords.length >= count) {\n      return Promise.resolve();\n    }\n\n    return section.load(this.request).then(function (contents) {\n      var completed = new _core.defer();\n      var locations = this.parseWords(contents, section, wordCount, startCfi);\n      var remainingCount = count - this._locationsWords.length;\n      this._locationsWords = this._locationsWords.concat(locations.length >= count ? locations.slice(0, remainingCount) : locations);\n      section.unload();\n      this.processingTimeout = setTimeout(() => completed.resolve(locations), this.pause);\n      return completed.promise;\n    }.bind(this));\n  } //http://stackoverflow.com/questions/18679576/counting-words-in-string\n\n\n  countWords(s) {\n    s = s.replace(/(^\\s*)|(\\s*$)/gi, \"\"); //exclude  start and end white-space\n\n    s = s.replace(/[ ]{2,}/gi, \" \"); //2 or more space to 1\n\n    s = s.replace(/\\n /, \"\\n\"); // exclude newline with a start spacing\n\n    return s.split(\" \").length;\n  }\n\n  parseWords(contents, section, wordCount, startCfi) {\n    var cfiBase = section.cfiBase;\n    var locations = [];\n    var doc = contents.ownerDocument;\n    var body = (0, _core.qs)(doc, \"body\");\n    var prev;\n    var _break = wordCount;\n    var foundStartNode = startCfi ? startCfi.spinePos !== section.index : true;\n    var startNode;\n\n    if (startCfi && section.index === startCfi.spinePos) {\n      startNode = startCfi.findNode(startCfi.range ? startCfi.path.steps.concat(startCfi.start.steps) : startCfi.path.steps, contents.ownerDocument);\n    }\n\n    var parser = function (node) {\n      if (!foundStartNode) {\n        if (node === startNode) {\n          foundStartNode = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (node.textContent.length < 10) {\n        if (node.textContent.trim().length === 0) {\n          return false;\n        }\n      }\n\n      var len = this.countWords(node.textContent);\n      var dist;\n      var pos = 0;\n\n      if (len === 0) {\n        return false; // continue\n      }\n\n      dist = _break - this._wordCounter; // Node is smaller than a break,\n      // skip over it\n\n      if (dist > len) {\n        this._wordCounter += len;\n        pos = len;\n      }\n\n      while (pos < len) {\n        dist = _break - this._wordCounter; // Gone over\n\n        if (pos + dist >= len) {\n          // Continue counter for next node\n          this._wordCounter += len - pos; // break\n\n          pos = len; // At End\n        } else {\n          // Advance pos\n          pos += dist;\n          let cfi = new _epubcfi.default(node, cfiBase);\n          locations.push({\n            cfi: cfi.toString(),\n            wordCount: this._wordCounter\n          });\n          this._wordCounter = 0;\n        }\n      }\n\n      prev = node;\n    };\n\n    (0, _core.sprint)(body, parser.bind(this));\n    return locations;\n  }\n  /**\n   * Get a location from an EpubCFI\n   * @param {EpubCFI} cfi\n   * @return {number}\n   */\n\n\n  locationFromCfi(cfi) {\n    let loc;\n\n    if (_epubcfi.default.prototype.isCfiString(cfi)) {\n      cfi = new _epubcfi.default(cfi);\n    } // Check if the location has not been set yet\n\n\n    if (this._locations.length === 0) {\n      return -1;\n    }\n\n    loc = (0, _core.locationOf)(cfi, this._locations, this.epubcfi.compare);\n\n    if (loc > this.total) {\n      return this.total;\n    }\n\n    return loc;\n  }\n  /**\n   * Get a percentage position in locations from an EpubCFI\n   * @param {EpubCFI} cfi\n   * @return {number}\n   */\n\n\n  percentageFromCfi(cfi) {\n    if (this._locations.length === 0) {\n      return null;\n    } // Find closest cfi\n\n\n    var loc = this.locationFromCfi(cfi); // Get percentage in total\n\n    return this.percentageFromLocation(loc);\n  }\n  /**\n   * Get a percentage position from a location index\n   * @param {number} location\n   * @return {number}\n   */\n\n\n  percentageFromLocation(loc) {\n    if (!loc || !this.total) {\n      return 0;\n    }\n\n    return loc / this.total;\n  }\n  /**\n   * Get an EpubCFI from location index\n   * @param {number} loc\n   * @return {EpubCFI} cfi\n   */\n\n\n  cfiFromLocation(loc) {\n    var cfi = -1; // check that pg is an int\n\n    if (typeof loc != \"number\") {\n      loc = parseInt(loc);\n    }\n\n    if (loc >= 0 && loc < this._locations.length) {\n      cfi = this._locations[loc];\n    }\n\n    return cfi;\n  }\n  /**\n   * Get an EpubCFI from location percentage\n   * @param {number} percentage\n   * @return {EpubCFI} cfi\n   */\n\n\n  cfiFromPercentage(percentage) {\n    let loc;\n\n    if (percentage > 1) {\n      console.warn(\"Normalize cfiFromPercentage value to between 0 - 1\");\n    } // Make sure 1 goes to very end\n\n\n    if (percentage >= 1) {\n      let cfi = new _epubcfi.default(this._locations[this.total]);\n      cfi.collapse();\n      return cfi.toString();\n    }\n\n    loc = Math.ceil(this.total * percentage);\n    return this.cfiFromLocation(loc);\n  }\n  /**\n   * Load locations from JSON\n   * @param {json} locations\n   */\n\n\n  load(locations) {\n    if (typeof locations === \"string\") {\n      this._locations = JSON.parse(locations);\n    } else {\n      this._locations = locations;\n    }\n\n    this.total = this._locations.length - 1;\n    return this._locations;\n  }\n  /**\n   * Save locations to JSON\n   * @return {json}\n   */\n\n\n  save() {\n    return JSON.stringify(this._locations);\n  }\n\n  getCurrent() {\n    return this._current;\n  }\n\n  setCurrent(curr) {\n    var loc;\n\n    if (typeof curr == \"string\") {\n      this._currentCfi = curr;\n    } else if (typeof curr == \"number\") {\n      this._current = curr;\n    } else {\n      return;\n    }\n\n    if (this._locations.length === 0) {\n      return;\n    }\n\n    if (typeof curr == \"string\") {\n      loc = this.locationFromCfi(curr);\n      this._current = loc;\n    } else {\n      loc = curr;\n    }\n\n    this.emit(_constants.EVENTS.LOCATIONS.CHANGED, {\n      percentage: this.percentageFromLocation(loc)\n    });\n  }\n  /**\n   * Get the current location\n   */\n\n\n  get currentLocation() {\n    return this._current;\n  }\n  /**\n   * Set the current location\n   */\n\n\n  set currentLocation(curr) {\n    this.setCurrent(curr);\n  }\n  /**\n   * Locations length\n   */\n\n\n  length() {\n    return this._locations.length;\n  }\n\n  destroy() {\n    this.spine = undefined;\n    this.request = undefined;\n    this.pause = undefined;\n    this.q.stop();\n    this.q = undefined;\n    this.epubcfi = undefined;\n    this._locations = undefined;\n    this.total = undefined;\n    this.break = undefined;\n    this._current = undefined;\n    this.currentLocation = undefined;\n    this._currentCfi = undefined;\n    clearTimeout(this.processingTimeout);\n  }\n\n}\n\n(0, _eventEmitter.default)(Locations.prototype);\nvar _default = Locations;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _pathWebpack = _interopRequireDefault(require(\"path-webpack\"));\n\nvar _core = require(\"./utils/core\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Handles Parsing and Accessing an Epub Container\n * @class\n * @param {document} [containerDocument] xml document\n */\nclass Container {\n  constructor(containerDocument) {\n    this.packagePath = '';\n    this.directory = '';\n    this.encoding = '';\n\n    if (containerDocument) {\n      this.parse(containerDocument);\n    }\n  }\n  /**\n   * Parse the Container XML\n   * @param  {document} containerDocument\n   */\n\n\n  parse(containerDocument) {\n    //-- <rootfile full-path=\"OPS/package.opf\" media-type=\"application/oebps-package+xml\"/>\n    var rootfile;\n\n    if (!containerDocument) {\n      throw new Error(\"Container File Not Found\");\n    }\n\n    rootfile = (0, _core.qs)(containerDocument, \"rootfile\");\n\n    if (!rootfile) {\n      throw new Error(\"No RootFile Found\");\n    }\n\n    this.packagePath = rootfile.getAttribute(\"full-path\");\n    this.directory = _pathWebpack.default.dirname(this.packagePath);\n    this.encoding = containerDocument.xmlEncoding;\n  }\n\n  destroy() {\n    this.packagePath = undefined;\n    this.directory = undefined;\n    this.encoding = undefined;\n  }\n\n}\n\nvar _default = Container;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\n/**\n * Open Packaging Format Parser\n * @class\n * @param {document} packageDocument OPF XML\n */\nclass Packaging {\n  constructor(packageDocument) {\n    this.manifest = {};\n    this.navPath = '';\n    this.ncxPath = '';\n    this.coverPath = '';\n    this.spineNodeIndex = 0;\n    this.spine = [];\n    this.metadata = {};\n\n    if (packageDocument) {\n      this.parse(packageDocument);\n    }\n  }\n  /**\n   * Parse OPF XML\n   * @param  {document} packageDocument OPF XML\n   * @return {object} parsed package parts\n   */\n\n\n  parse(packageDocument) {\n    var metadataNode, manifestNode, spineNode;\n\n    if (!packageDocument) {\n      throw new Error(\"Package File Not Found\");\n    }\n\n    metadataNode = (0, _core.qs)(packageDocument, \"metadata\");\n\n    if (!metadataNode) {\n      throw new Error(\"No Metadata Found\");\n    }\n\n    manifestNode = (0, _core.qs)(packageDocument, \"manifest\");\n\n    if (!manifestNode) {\n      throw new Error(\"No Manifest Found\");\n    }\n\n    spineNode = (0, _core.qs)(packageDocument, \"spine\");\n\n    if (!spineNode) {\n      throw new Error(\"No Spine Found\");\n    }\n\n    this.manifest = this.parseManifest(manifestNode);\n    this.navPath = this.findNavPath(manifestNode);\n    this.ncxPath = this.findNcxPath(manifestNode, spineNode);\n    this.coverPath = this.findCoverPath(packageDocument);\n    this.spineNodeIndex = (0, _core.indexOfElementNode)(spineNode);\n    this.spine = this.parseSpine(spineNode, this.manifest);\n    this.uniqueIdentifier = this.findUniqueIdentifier(packageDocument);\n    this.metadata = this.parseMetadata(metadataNode);\n    this.metadata.direction = spineNode.getAttribute(\"page-progression-direction\");\n    return {\n      \"metadata\": this.metadata,\n      \"spine\": this.spine,\n      \"manifest\": this.manifest,\n      \"navPath\": this.navPath,\n      \"ncxPath\": this.ncxPath,\n      \"coverPath\": this.coverPath,\n      \"spineNodeIndex\": this.spineNodeIndex\n    };\n  }\n  /**\n   * Parse Metadata\n   * @private\n   * @param  {node} xml\n   * @return {object} metadata\n   */\n\n\n  parseMetadata(xml) {\n    var metadata = {};\n    metadata.title = this.getElementText(xml, \"title\");\n    metadata.creator = this.getElementText(xml, \"creator\");\n    metadata.description = this.getElementText(xml, \"description\");\n    metadata.pubdate = this.getElementText(xml, \"date\");\n    metadata.publisher = this.getElementText(xml, \"publisher\");\n    metadata.identifier = this.getElementText(xml, \"identifier\");\n    metadata.language = this.getElementText(xml, \"language\");\n    metadata.rights = this.getElementText(xml, \"rights\");\n    metadata.modified_date = this.getPropertyText(xml, \"dcterms:modified\");\n    metadata.layout = this.getPropertyText(xml, \"rendition:layout\");\n    metadata.orientation = this.getPropertyText(xml, \"rendition:orientation\");\n    metadata.flow = this.getPropertyText(xml, \"rendition:flow\");\n    metadata.viewport = this.getPropertyText(xml, \"rendition:viewport\");\n    metadata.media_active_class = this.getPropertyText(xml, \"media:active-class\");\n    metadata.spread = this.getPropertyText(xml, \"rendition:spread\"); // metadata.page_prog_dir = packageXml.querySelector(\"spine\").getAttribute(\"page-progression-direction\");\n\n    return metadata;\n  }\n  /**\n   * Parse Manifest\n   * @private\n   * @param  {node} manifestXml\n   * @return {object} manifest\n   */\n\n\n  parseManifest(manifestXml) {\n    var manifest = {}; //-- Turn items into an array\n    // var selected = manifestXml.querySelectorAll(\"item\");\n\n    var selected = (0, _core.qsa)(manifestXml, \"item\");\n    var items = Array.prototype.slice.call(selected); //-- Create an object with the id as key\n\n    items.forEach(function (item) {\n      var id = item.getAttribute(\"id\"),\n          href = item.getAttribute(\"href\") || \"\",\n          type = item.getAttribute(\"media-type\") || \"\",\n          overlay = item.getAttribute(\"media-overlay\") || \"\",\n          properties = item.getAttribute(\"properties\") || \"\";\n      manifest[id] = {\n        \"href\": href,\n        // \"url\" : href,\n        \"type\": type,\n        \"overlay\": overlay,\n        \"properties\": properties.length ? properties.split(\" \") : []\n      };\n    });\n    return manifest;\n  }\n  /**\n   * Parse Spine\n   * @private\n   * @param  {node} spineXml\n   * @param  {Packaging.manifest} manifest\n   * @return {object} spine\n   */\n\n\n  parseSpine(spineXml, manifest) {\n    var spine = [];\n    var selected = (0, _core.qsa)(spineXml, \"itemref\");\n    var items = Array.prototype.slice.call(selected); // var epubcfi = new EpubCFI();\n    //-- Add to array to maintain ordering and cross reference with manifest\n\n    items.forEach(function (item, index) {\n      var idref = item.getAttribute(\"idref\"); // var cfiBase = epubcfi.generateChapterComponent(spineNodeIndex, index, Id);\n\n      var props = item.getAttribute(\"properties\") || \"\";\n      var propArray = props.length ? props.split(\" \") : []; // var manifestProps = manifest[Id].properties;\n      // var manifestPropArray = manifestProps.length ? manifestProps.split(\" \") : [];\n\n      var itemref = {\n        \"id\": item.getAttribute(\"id\"),\n        \"idref\": idref,\n        \"linear\": item.getAttribute(\"linear\") || \"yes\",\n        \"properties\": propArray,\n        // \"href\" : manifest[Id].href,\n        // \"url\" :  manifest[Id].url,\n        \"index\": index // \"cfiBase\" : cfiBase\n\n      };\n      spine.push(itemref);\n    });\n    return spine;\n  }\n  /**\n   * Find Unique Identifier\n   * @private\n   * @param  {node} packageXml\n   * @return {string} Unique Identifier text\n   */\n\n\n  findUniqueIdentifier(packageXml) {\n    var uniqueIdentifierId = packageXml.documentElement.getAttribute(\"unique-identifier\");\n\n    if (!uniqueIdentifierId) {\n      return \"\";\n    }\n\n    var identifier = packageXml.getElementById(uniqueIdentifierId);\n\n    if (!identifier) {\n      return \"\";\n    }\n\n    if (identifier.localName === \"identifier\" && identifier.namespaceURI === \"http://purl.org/dc/elements/1.1/\") {\n      return identifier.childNodes.length > 0 ? identifier.childNodes[0].nodeValue.trim() : \"\";\n    }\n\n    return \"\";\n  }\n  /**\n   * Find TOC NAV\n   * @private\n   * @param {element} manifestNode\n   * @return {string}\n   */\n\n\n  findNavPath(manifestNode) {\n    // Find item with property \"nav\"\n    // Should catch nav regardless of order\n    // var node = manifestNode.querySelector(\"item[properties$='nav'], item[properties^='nav '], item[properties*=' nav ']\");\n    var node = (0, _core.qsp)(manifestNode, \"item\", {\n      \"properties\": \"nav\"\n    });\n    return node ? node.getAttribute(\"href\") : false;\n  }\n  /**\n   * Find TOC NCX\n   * media-type=\"application/x-dtbncx+xml\" href=\"toc.ncx\"\n   * @private\n   * @param {element} manifestNode\n   * @param {element} spineNode\n   * @return {string}\n   */\n\n\n  findNcxPath(manifestNode, spineNode) {\n    // var node = manifestNode.querySelector(\"item[media-type='application/x-dtbncx+xml']\");\n    var node = (0, _core.qsp)(manifestNode, \"item\", {\n      \"media-type\": \"application/x-dtbncx+xml\"\n    });\n    var tocId; // If we can't find the toc by media-type then try to look for id of the item in the spine attributes as\n    // according to http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1.2,\n    // \"The item that describes the NCX must be referenced by the spine toc attribute.\"\n\n    if (!node) {\n      tocId = spineNode.getAttribute(\"toc\");\n\n      if (tocId) {\n        // node = manifestNode.querySelector(\"item[id='\" + tocId + \"']\");\n        node = manifestNode.querySelector(`#${tocId}`);\n      }\n    }\n\n    return node ? node.getAttribute(\"href\") : false;\n  }\n  /**\n   * Find the Cover Path\n   * <item properties=\"cover-image\" id=\"ci\" href=\"cover.svg\" media-type=\"image/svg+xml\" />\n   * Fallback for Epub 2.0\n   * @private\n   * @param  {node} packageXml\n   * @return {string} href\n   */\n\n\n  findCoverPath(packageXml) {\n    var pkg = (0, _core.qs)(packageXml, \"package\");\n    var epubVersion = pkg.getAttribute(\"version\"); // Try parsing cover with epub 3.\n    // var node = packageXml.querySelector(\"item[properties='cover-image']\");\n\n    var node = (0, _core.qsp)(packageXml, \"item\", {\n      \"properties\": \"cover-image\"\n    });\n    if (node) return node.getAttribute(\"href\"); // Fallback to epub 2.\n\n    var metaCover = (0, _core.qsp)(packageXml, \"meta\", {\n      \"name\": \"cover\"\n    });\n\n    if (metaCover) {\n      var coverId = metaCover.getAttribute(\"content\"); // var cover = packageXml.querySelector(\"item[id='\" + coverId + \"']\");\n\n      var cover = packageXml.getElementById(coverId);\n      return cover ? cover.getAttribute(\"href\") : \"\";\n    } else {\n      return false;\n    }\n  }\n  /**\n   * Get text of a namespaced element\n   * @private\n   * @param  {node} xml\n   * @param  {string} tag\n   * @return {string} text\n   */\n\n\n  getElementText(xml, tag) {\n    var found = xml.getElementsByTagNameNS(\"http://purl.org/dc/elements/1.1/\", tag);\n    var el;\n    if (!found || found.length === 0) return \"\";\n    el = found[0];\n\n    if (el.childNodes.length) {\n      return el.childNodes[0].nodeValue;\n    }\n\n    return \"\";\n  }\n  /**\n   * Get text by property\n   * @private\n   * @param  {node} xml\n   * @param  {string} property\n   * @return {string} text\n   */\n\n\n  getPropertyText(xml, property) {\n    var el = (0, _core.qsp)(xml, \"meta\", {\n      \"property\": property\n    });\n\n    if (el && el.childNodes.length) {\n      return el.childNodes[0].nodeValue;\n    }\n\n    return \"\";\n  }\n  /**\n   * Load JSON Manifest\n   * @param  {document} packageDocument OPF XML\n   * @return {object} parsed package parts\n   */\n\n\n  load(json) {\n    this.metadata = json.metadata;\n    let spine = json.readingOrder || json.spine;\n    this.spine = spine.map((item, index) => {\n      item.index = index;\n      item.linear = item.linear || \"yes\";\n      return item;\n    });\n    json.resources.forEach((item, index) => {\n      this.manifest[index] = item;\n\n      if (item.rel && item.rel[0] === \"cover\") {\n        this.coverPath = item.href;\n      }\n    });\n    this.spineNodeIndex = 0;\n    this.toc = json.toc.map((item, index) => {\n      item.label = item.title;\n      return item;\n    });\n    return {\n      \"metadata\": this.metadata,\n      \"spine\": this.spine,\n      \"manifest\": this.manifest,\n      \"navPath\": this.navPath,\n      \"ncxPath\": this.ncxPath,\n      \"coverPath\": this.coverPath,\n      \"spineNodeIndex\": this.spineNodeIndex,\n      \"toc\": this.toc\n    };\n  }\n\n  destroy() {\n    this.manifest = undefined;\n    this.navPath = undefined;\n    this.ncxPath = undefined;\n    this.coverPath = undefined;\n    this.spineNodeIndex = undefined;\n    this.spine = undefined;\n    this.metadata = undefined;\n  }\n\n}\n\nvar _default = Packaging;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\n/**\n * Navigation Parser\n * @param {document} xml navigation html / xhtml / ncx\n */\nclass Navigation {\n  constructor(xml) {\n    this.toc = [];\n    this.tocByHref = {};\n    this.tocById = {};\n    this.landmarks = [];\n    this.landmarksByType = {};\n    this.length = 0;\n\n    if (xml) {\n      this.parse(xml);\n    }\n  }\n  /**\n   * Parse out the navigation items\n   * @param {document} xml navigation html / xhtml / ncx\n   */\n\n\n  parse(xml) {\n    let isXml = xml.nodeType;\n    let html;\n    let ncx;\n\n    if (isXml) {\n      html = (0, _core.qs)(xml, \"html\");\n      ncx = (0, _core.qs)(xml, \"ncx\");\n    }\n\n    if (!isXml) {\n      this.toc = this.load(xml);\n    } else if (html) {\n      this.toc = this.parseNav(xml);\n      this.landmarks = this.parseLandmarks(xml);\n    } else if (ncx) {\n      this.toc = this.parseNcx(xml);\n    }\n\n    this.length = 0;\n    this.unpack(this.toc);\n  }\n  /**\n   * Unpack navigation items\n   * @private\n   * @param  {array} toc\n   */\n\n\n  unpack(toc) {\n    var item;\n\n    for (var i = 0; i < toc.length; i++) {\n      item = toc[i];\n\n      if (item.href) {\n        this.tocByHref[item.href] = i;\n      }\n\n      if (item.id) {\n        this.tocById[item.id] = i;\n      }\n\n      this.length++;\n\n      if (item.subitems.length) {\n        this.unpack(item.subitems);\n      }\n    }\n  }\n  /**\n   * Get an item from the navigation\n   * @param  {string} target\n   * @return {object} navItem\n   */\n\n\n  get(target) {\n    var index;\n\n    if (!target) {\n      return this.toc;\n    }\n\n    if (target.indexOf(\"#\") === 0) {\n      index = this.tocById[target.substring(1)];\n    } else if (target in this.tocByHref) {\n      index = this.tocByHref[target];\n    }\n\n    return this.getByIndex(target, index, this.toc);\n  }\n  /**\n   * Get an item from navigation subitems recursively by index\n   * @param  {string} target\n   * @param  {number} index\n   * @param  {array} navItems\n   * @return {object} navItem\n   */\n\n\n  getByIndex(target, index, navItems) {\n    if (navItems.length === 0) {\n      return;\n    }\n\n    const item = navItems[index];\n\n    if (item && (target === item.id || target === item.href)) {\n      return item;\n    } else {\n      let result;\n\n      for (let i = 0; i < navItems.length; ++i) {\n        result = this.getByIndex(target, index, navItems[i].subitems);\n\n        if (result) {\n          break;\n        }\n      }\n\n      return result;\n    }\n  }\n  /**\n   * Get a landmark by type\n   * List of types: https://idpf.github.io/epub-vocabs/structure/\n   * @param  {string} type\n   * @return {object} landmarkItem\n   */\n\n\n  landmark(type) {\n    var index;\n\n    if (!type) {\n      return this.landmarks;\n    }\n\n    index = this.landmarksByType[type];\n    return this.landmarks[index];\n  }\n  /**\n   * Parse toc from a Epub > 3.0 Nav\n   * @private\n   * @param  {document} navHtml\n   * @return {array} navigation list\n   */\n\n\n  parseNav(navHtml) {\n    var navElement = (0, _core.querySelectorByType)(navHtml, \"nav\", \"toc\");\n    var list = [];\n    if (!navElement) return list;\n    let navList = (0, _core.filterChildren)(navElement, \"ol\", true);\n    if (!navList) return list;\n    list = this.parseNavList(navList);\n    return list;\n  }\n  /**\n   * Parses lists in the toc\n   * @param  {document} navListHtml\n   * @param  {string} parent id\n   * @return {array} navigation list\n   */\n\n\n  parseNavList(navListHtml, parent) {\n    const result = [];\n    if (!navListHtml) return result;\n    if (!navListHtml.children) return result;\n\n    for (let i = 0; i < navListHtml.children.length; i++) {\n      const item = this.navItem(navListHtml.children[i], parent);\n\n      if (item) {\n        result.push(item);\n      }\n    }\n\n    return result;\n  }\n  /**\n   * Create a navItem\n   * @private\n   * @param  {element} item\n   * @return {object} navItem\n   */\n\n\n  navItem(item, parent) {\n    let id = item.getAttribute(\"id\") || undefined;\n    let content = (0, _core.filterChildren)(item, \"a\", true) || (0, _core.filterChildren)(item, \"span\", true);\n\n    if (!content) {\n      return;\n    }\n\n    let src = content.getAttribute(\"href\") || \"\";\n\n    if (!id) {\n      id = src;\n    }\n\n    let text = content.textContent || \"\";\n    let subitems = [];\n    let nested = (0, _core.filterChildren)(item, \"ol\", true);\n\n    if (nested) {\n      subitems = this.parseNavList(nested, id);\n    }\n\n    return {\n      \"id\": id,\n      \"href\": src,\n      \"label\": text,\n      \"subitems\": subitems,\n      \"parent\": parent\n    };\n  }\n  /**\n   * Parse landmarks from a Epub > 3.0 Nav\n   * @private\n   * @param  {document} navHtml\n   * @return {array} landmarks list\n   */\n\n\n  parseLandmarks(navHtml) {\n    var navElement = (0, _core.querySelectorByType)(navHtml, \"nav\", \"landmarks\");\n    var navItems = navElement ? (0, _core.qsa)(navElement, \"li\") : [];\n    var length = navItems.length;\n    var i;\n    var list = [];\n    var item;\n    if (!navItems || length === 0) return list;\n\n    for (i = 0; i < length; ++i) {\n      item = this.landmarkItem(navItems[i]);\n\n      if (item) {\n        list.push(item);\n        this.landmarksByType[item.type] = i;\n      }\n    }\n\n    return list;\n  }\n  /**\n   * Create a landmarkItem\n   * @private\n   * @param  {element} item\n   * @return {object} landmarkItem\n   */\n\n\n  landmarkItem(item) {\n    let content = (0, _core.filterChildren)(item, \"a\", true);\n\n    if (!content) {\n      return;\n    }\n\n    let type = content.getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") || undefined;\n    let href = content.getAttribute(\"href\") || \"\";\n    let text = content.textContent || \"\";\n    return {\n      \"href\": href,\n      \"label\": text,\n      \"type\": type\n    };\n  }\n  /**\n   * Parse from a Epub > 3.0 NC\n   * @private\n   * @param  {document} navHtml\n   * @return {array} navigation list\n   */\n\n\n  parseNcx(tocXml) {\n    var navPoints = (0, _core.qsa)(tocXml, \"navPoint\");\n    var length = navPoints.length;\n    var i;\n    var toc = {};\n    var list = [];\n    var item, parent;\n    if (!navPoints || length === 0) return list;\n\n    for (i = 0; i < length; ++i) {\n      item = this.ncxItem(navPoints[i]);\n      toc[item.id] = item;\n\n      if (!item.parent) {\n        list.push(item);\n      } else {\n        parent = toc[item.parent];\n        parent.subitems.push(item);\n      }\n    }\n\n    return list;\n  }\n  /**\n   * Create a ncxItem\n   * @private\n   * @param  {element} item\n   * @return {object} ncxItem\n   */\n\n\n  ncxItem(item) {\n    var id = item.getAttribute(\"id\") || false,\n        content = (0, _core.qs)(item, \"content\"),\n        src = content.getAttribute(\"src\"),\n        navLabel = (0, _core.qs)(item, \"navLabel\"),\n        text = navLabel.textContent ? navLabel.textContent : \"\",\n        subitems = [],\n        parentNode = item.parentNode,\n        parent;\n\n    if (parentNode && (parentNode.nodeName === \"navPoint\" || parentNode.nodeName.split(':').slice(-1)[0] === \"navPoint\")) {\n      parent = parentNode.getAttribute(\"id\");\n    }\n\n    return {\n      \"id\": id,\n      \"href\": src,\n      \"label\": text,\n      \"subitems\": subitems,\n      \"parent\": parent\n    };\n  }\n  /**\n   * Load Spine Items\n   * @param  {object} json the items to be loaded\n   * @return {Array} navItems\n   */\n\n\n  load(json) {\n    return json.map(item => {\n      item.label = item.title;\n      item.subitems = item.children ? this.load(item.children) : [];\n      return item;\n    });\n  }\n  /**\n   * forEach pass through\n   * @param  {Function} fn function to run on each item\n   * @return {method} forEach loop\n   */\n\n\n  forEach(fn) {\n    return this.toc.forEach(fn);\n  }\n\n}\n\nvar _default = Navigation;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\n From Zip.js, by Gildas Lormeau\nedited down\n */\nvar table = {\n  \"application\": {\n    \"ecmascript\": [\"es\", \"ecma\"],\n    \"javascript\": \"js\",\n    \"ogg\": \"ogx\",\n    \"pdf\": \"pdf\",\n    \"postscript\": [\"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\"],\n    \"rdf+xml\": \"rdf\",\n    \"smil\": [\"smi\", \"smil\"],\n    \"xhtml+xml\": [\"xhtml\", \"xht\"],\n    \"xml\": [\"xml\", \"xsl\", \"xsd\", \"opf\", \"ncx\"],\n    \"zip\": \"zip\",\n    \"x-httpd-eruby\": \"rhtml\",\n    \"x-latex\": \"latex\",\n    \"x-maker\": [\"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\"],\n    \"x-object\": \"o\",\n    \"x-shockwave-flash\": [\"swf\", \"swfl\"],\n    \"x-silverlight\": \"scr\",\n    \"epub+zip\": \"epub\",\n    \"font-tdpfr\": \"pfr\",\n    \"inkml+xml\": [\"ink\", \"inkml\"],\n    \"json\": \"json\",\n    \"jsonml+json\": \"jsonml\",\n    \"mathml+xml\": \"mathml\",\n    \"metalink+xml\": \"metalink\",\n    \"mp4\": \"mp4s\",\n    // \"oebps-package+xml\" : \"opf\",\n    \"omdoc+xml\": \"omdoc\",\n    \"oxps\": \"oxps\",\n    \"vnd.amazon.ebook\": \"azw\",\n    \"widget\": \"wgt\",\n    // \"x-dtbncx+xml\" : \"ncx\",\n    \"x-dtbook+xml\": \"dtb\",\n    \"x-dtbresource+xml\": \"res\",\n    \"x-font-bdf\": \"bdf\",\n    \"x-font-ghostscript\": \"gsf\",\n    \"x-font-linux-psf\": \"psf\",\n    \"x-font-otf\": \"otf\",\n    \"x-font-pcf\": \"pcf\",\n    \"x-font-snf\": \"snf\",\n    \"x-font-ttf\": [\"ttf\", \"ttc\"],\n    \"x-font-type1\": [\"pfa\", \"pfb\", \"pfm\", \"afm\"],\n    \"x-font-woff\": \"woff\",\n    \"x-mobipocket-ebook\": [\"prc\", \"mobi\"],\n    \"x-mspublisher\": \"pub\",\n    \"x-nzb\": \"nzb\",\n    \"x-tgif\": \"obj\",\n    \"xaml+xml\": \"xaml\",\n    \"xml-dtd\": \"dtd\",\n    \"xproc+xml\": \"xpl\",\n    \"xslt+xml\": \"xslt\",\n    \"internet-property-stream\": \"acx\",\n    \"x-compress\": \"z\",\n    \"x-compressed\": \"tgz\",\n    \"x-gzip\": \"gz\"\n  },\n  \"audio\": {\n    \"flac\": \"flac\",\n    \"midi\": [\"mid\", \"midi\", \"kar\", \"rmi\"],\n    \"mpeg\": [\"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\"],\n    \"mpegurl\": \"m3u\",\n    \"ogg\": [\"oga\", \"ogg\", \"spx\"],\n    \"x-aiff\": [\"aif\", \"aiff\", \"aifc\"],\n    \"x-ms-wma\": \"wma\",\n    \"x-wav\": \"wav\",\n    \"adpcm\": \"adp\",\n    \"mp4\": \"mp4a\",\n    \"webm\": \"weba\",\n    \"x-aac\": \"aac\",\n    \"x-caf\": \"caf\",\n    \"x-matroska\": \"mka\",\n    \"x-pn-realaudio-plugin\": \"rmp\",\n    \"xm\": \"xm\",\n    \"mid\": [\"mid\", \"rmi\"]\n  },\n  \"image\": {\n    \"gif\": \"gif\",\n    \"ief\": \"ief\",\n    \"jpeg\": [\"jpeg\", \"jpg\", \"jpe\"],\n    \"pcx\": \"pcx\",\n    \"png\": \"png\",\n    \"svg+xml\": [\"svg\", \"svgz\"],\n    \"tiff\": [\"tiff\", \"tif\"],\n    \"x-icon\": \"ico\",\n    \"bmp\": \"bmp\",\n    \"webp\": \"webp\",\n    \"x-pict\": [\"pic\", \"pct\"],\n    \"x-tga\": \"tga\",\n    \"cis-cod\": \"cod\"\n  },\n  \"text\": {\n    \"cache-manifest\": [\"manifest\", \"appcache\"],\n    \"css\": \"css\",\n    \"csv\": \"csv\",\n    \"html\": [\"html\", \"htm\", \"shtml\", \"stm\"],\n    \"mathml\": \"mml\",\n    \"plain\": [\"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\"],\n    \"richtext\": \"rtx\",\n    \"tab-separated-values\": \"tsv\",\n    \"x-bibtex\": \"bib\"\n  },\n  \"video\": {\n    \"mpeg\": [\"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\"],\n    \"mp4\": [\"mp4\", \"mp4v\", \"mpg4\"],\n    \"quicktime\": [\"qt\", \"mov\"],\n    \"ogg\": \"ogv\",\n    \"vnd.mpegurl\": [\"mxu\", \"m4u\"],\n    \"x-flv\": \"flv\",\n    \"x-la-asf\": [\"lsf\", \"lsx\"],\n    \"x-mng\": \"mng\",\n    \"x-ms-asf\": [\"asf\", \"asx\", \"asr\"],\n    \"x-ms-wm\": \"wm\",\n    \"x-ms-wmv\": \"wmv\",\n    \"x-ms-wmx\": \"wmx\",\n    \"x-ms-wvx\": \"wvx\",\n    \"x-msvideo\": \"avi\",\n    \"x-sgi-movie\": \"movie\",\n    \"x-matroska\": [\"mpv\", \"mkv\", \"mk3d\", \"mks\"],\n    \"3gpp2\": \"3g2\",\n    \"h261\": \"h261\",\n    \"h263\": \"h263\",\n    \"h264\": \"h264\",\n    \"jpeg\": \"jpgv\",\n    \"jpm\": [\"jpm\", \"jpgm\"],\n    \"mj2\": [\"mj2\", \"mjp2\"],\n    \"vnd.ms-playready.media.pyv\": \"pyv\",\n    \"vnd.uvvu.mp4\": [\"uvu\", \"uvvu\"],\n    \"vnd.vivo\": \"viv\",\n    \"webm\": \"webm\",\n    \"x-f4v\": \"f4v\",\n    \"x-m4v\": \"m4v\",\n    \"x-ms-vob\": \"vob\",\n    \"x-smv\": \"smv\"\n  }\n};\n\nvar mimeTypes = function () {\n  var type,\n      subtype,\n      val,\n      index,\n      mimeTypes = {};\n\n  for (type in table) {\n    if (table.hasOwnProperty(type)) {\n      for (subtype in table[type]) {\n        if (table[type].hasOwnProperty(subtype)) {\n          val = table[type][subtype];\n\n          if (typeof val == \"string\") {\n            mimeTypes[val] = type + \"/\" + subtype;\n          } else {\n            for (index = 0; index < val.length; index++) {\n              mimeTypes[val[index]] = type + \"/\" + subtype;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return mimeTypes;\n}();\n\nvar defaultValue = \"text/plain\"; //\"application/octet-stream\";\n\nfunction lookup(filename) {\n  return filename && mimeTypes[filename.split(\".\").pop().toLowerCase()] || defaultValue;\n}\n\n;\nvar _default = {\n  lookup\n};\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _replacements = require(\"./utils/replacements\");\n\nvar _core = require(\"./utils/core\");\n\nvar _url = _interopRequireDefault(require(\"./utils/url\"));\n\nvar _mime = _interopRequireDefault(require(\"./utils/mime\"));\n\nvar _path = _interopRequireDefault(require(\"./utils/path\"));\n\nvar _pathWebpack = _interopRequireDefault(require(\"path-webpack\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Handle Package Resources\n * @class\n * @param {Manifest} manifest\n * @param {object} [options]\n * @param {string} [options.replacements=\"base64\"]\n * @param {Archive} [options.archive]\n * @param {method} [options.resolver]\n */\nclass Resources {\n  constructor(manifest, options) {\n    this.settings = {\n      replacements: options && options.replacements || \"base64\",\n      archive: options && options.archive,\n      resolver: options && options.resolver,\n      request: options && options.request\n    };\n    this.process(manifest);\n  }\n  /**\n   * Process resources\n   * @param {Manifest} manifest\n   */\n\n\n  process(manifest) {\n    this.manifest = manifest;\n    this.resources = Object.keys(manifest).map(function (key) {\n      return manifest[key];\n    });\n    this.replacementUrls = [];\n    this.html = [];\n    this.assets = [];\n    this.css = [];\n    this.urls = [];\n    this.cssUrls = [];\n    this.split();\n    this.splitUrls();\n  }\n  /**\n   * Split resources by type\n   * @private\n   */\n\n\n  split() {\n    // HTML\n    this.html = this.resources.filter(function (item) {\n      if (item.type === \"application/xhtml+xml\" || item.type === \"text/html\") {\n        return true;\n      }\n    }); // Exclude HTML\n\n    this.assets = this.resources.filter(function (item) {\n      if (item.type !== \"application/xhtml+xml\" && item.type !== \"text/html\") {\n        return true;\n      }\n    }); // Only CSS\n\n    this.css = this.resources.filter(function (item) {\n      if (item.type === \"text/css\") {\n        return true;\n      }\n    });\n  }\n  /**\n   * Convert split resources into Urls\n   * @private\n   */\n\n\n  splitUrls() {\n    // All Assets Urls\n    this.urls = this.assets.map(function (item) {\n      return item.href;\n    }.bind(this)); // Css Urls\n\n    this.cssUrls = this.css.map(function (item) {\n      return item.href;\n    });\n  }\n  /**\n   * Create a url to a resource\n   * @param {string} url\n   * @return {Promise<string>} Promise resolves with url string\n   */\n\n\n  createUrl(url) {\n    var parsedUrl = new _url.default(url);\n\n    var mimeType = _mime.default.lookup(parsedUrl.filename);\n\n    if (this.settings.archive) {\n      return this.settings.archive.createUrl(url, {\n        \"base64\": this.settings.replacements === \"base64\"\n      });\n    } else {\n      if (this.settings.replacements === \"base64\") {\n        return this.settings.request(url, 'blob').then(blob => {\n          return (0, _core.blob2base64)(blob);\n        }).then(blob => {\n          return (0, _core.createBase64Url)(blob, mimeType);\n        });\n      } else {\n        return this.settings.request(url, 'blob').then(blob => {\n          return (0, _core.createBlobUrl)(blob, mimeType);\n        });\n      }\n    }\n  }\n  /**\n   * Create blob urls for all the assets\n   * @return {Promise}         returns replacement urls\n   */\n\n\n  replacements() {\n    if (this.settings.replacements === \"none\") {\n      return new Promise(function (resolve) {\n        resolve(this.urls);\n      }.bind(this));\n    }\n\n    var replacements = this.urls.map(url => {\n      var absolute = this.settings.resolver(url);\n      return this.createUrl(absolute).catch(err => {\n        console.error(err);\n        return null;\n      });\n    });\n    return Promise.all(replacements).then(replacementUrls => {\n      this.replacementUrls = replacementUrls.filter(url => {\n        return typeof url === \"string\";\n      });\n      return replacementUrls;\n    });\n  }\n  /**\n   * Replace URLs in CSS resources\n   * @private\n   * @param  {Archive} [archive]\n   * @param  {method} [resolver]\n   * @return {Promise}\n   */\n\n\n  replaceCss(archive, resolver) {\n    var replaced = [];\n    archive = archive || this.settings.archive;\n    resolver = resolver || this.settings.resolver;\n    this.cssUrls.forEach(function (href) {\n      var replacement = this.createCssFile(href, archive, resolver).then(function (replacementUrl) {\n        // switch the url in the replacementUrls\n        var indexInUrls = this.urls.indexOf(href);\n\n        if (indexInUrls > -1) {\n          this.replacementUrls[indexInUrls] = replacementUrl;\n        }\n      }.bind(this));\n      replaced.push(replacement);\n    }.bind(this));\n    return Promise.all(replaced);\n  }\n  /**\n   * Create a new CSS file with the replaced URLs\n   * @private\n   * @param  {string} href the original css file\n   * @return {Promise}  returns a BlobUrl to the new CSS file or a data url\n   */\n\n\n  createCssFile(href) {\n    var newUrl;\n\n    if (_pathWebpack.default.isAbsolute(href)) {\n      return new Promise(function (resolve) {\n        resolve();\n      });\n    }\n\n    var absolute = this.settings.resolver(href); // Get the text of the css file from the archive\n\n    var textResponse;\n\n    if (this.settings.archive) {\n      textResponse = this.settings.archive.getText(absolute);\n    } else {\n      textResponse = this.settings.request(absolute, \"text\");\n    } // Get asset links relative to css file\n\n\n    var relUrls = this.urls.map(assetHref => {\n      var resolved = this.settings.resolver(assetHref);\n      var relative = new _path.default(absolute).relative(resolved);\n      return relative;\n    });\n\n    if (!textResponse) {\n      // file not found, don't replace\n      return new Promise(function (resolve) {\n        resolve();\n      });\n    }\n\n    return textResponse.then(text => {\n      // Replacements in the css text\n      text = (0, _replacements.substitute)(text, relUrls, this.replacementUrls); // Get the new url\n\n      if (this.settings.replacements === \"base64\") {\n        newUrl = (0, _core.createBase64Url)(text, \"text/css\");\n      } else {\n        newUrl = (0, _core.createBlobUrl)(text, \"text/css\");\n      }\n\n      return newUrl;\n    }, err => {\n      // handle response errors\n      return new Promise(function (resolve) {\n        resolve();\n      });\n    });\n  }\n  /**\n   * Resolve all resources URLs relative to an absolute URL\n   * @param  {string} absolute to be resolved to\n   * @param  {resolver} [resolver]\n   * @return {string[]} array with relative Urls\n   */\n\n\n  relativeTo(absolute, resolver) {\n    resolver = resolver || this.settings.resolver; // Get Urls relative to current sections\n\n    return this.urls.map(function (href) {\n      var resolved = resolver(href);\n      var relative = new _path.default(absolute).relative(resolved);\n      return relative;\n    }.bind(this));\n  }\n  /**\n   * Get a URL for a resource\n   * @param  {string} path\n   * @return {string} url\n   */\n\n\n  get(path) {\n    var indexInUrls = this.urls.indexOf(path);\n\n    if (indexInUrls === -1) {\n      return;\n    }\n\n    if (this.replacementUrls.length) {\n      return new Promise(function (resolve, reject) {\n        resolve(this.replacementUrls[indexInUrls]);\n      }.bind(this));\n    } else {\n      return this.createUrl(path);\n    }\n  }\n  /**\n   * Substitute urls in content, with replacements,\n   * relative to a url if provided\n   * @param  {string} content\n   * @param  {string} [url]   url to resolve to\n   * @return {string}         content with urls substituted\n   */\n\n\n  substitute(content, url) {\n    var relUrls;\n\n    if (url) {\n      relUrls = this.relativeTo(url);\n    } else {\n      relUrls = this.urls;\n    }\n\n    return (0, _replacements.substitute)(content, relUrls, this.replacementUrls);\n  }\n\n  destroy() {\n    this.settings = undefined;\n    this.manifest = undefined;\n    this.resources = undefined;\n    this.replacementUrls = undefined;\n    this.html = undefined;\n    this.assets = undefined;\n    this.css = undefined;\n    this.urls = undefined;\n    this.cssUrls = undefined;\n  }\n\n}\n\nvar _default = Resources;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _core = require(\"./utils/core\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n  constructor(xml) {\n    this.pages = [];\n    this.locations = [];\n    this.epubcfi = new _epubcfi.default();\n    this.firstPage = 0;\n    this.lastPage = 0;\n    this.totalPages = 0;\n    this.toc = undefined;\n    this.ncx = undefined;\n\n    if (xml) {\n      this.pageList = this.parse(xml);\n    }\n\n    if (this.pageList && this.pageList.length) {\n      this.process(this.pageList);\n    }\n  }\n  /**\n   * Parse PageList Xml\n   * @param  {document} xml\n   */\n\n\n  parse(xml) {\n    var html = (0, _core.qs)(xml, \"html\");\n    var ncx = (0, _core.qs)(xml, \"ncx\");\n\n    if (html) {\n      return this.parseNav(xml);\n    } else if (ncx) {\n      return this.parseNcx(xml);\n    }\n  }\n  /**\n   * Parse a Nav PageList\n   * @private\n   * @param  {node} navHtml\n   * @return {PageList.item[]} list\n   */\n\n\n  parseNav(navHtml) {\n    var navElement = (0, _core.querySelectorByType)(navHtml, \"nav\", \"page-list\");\n    var navItems = navElement ? (0, _core.qsa)(navElement, \"li\") : [];\n    var length = navItems.length;\n    var i;\n    var list = [];\n    var item;\n    if (!navItems || length === 0) return list;\n\n    for (i = 0; i < length; ++i) {\n      item = this.item(navItems[i]);\n      list.push(item);\n    }\n\n    return list;\n  }\n\n  parseNcx(navXml) {\n    var list = [];\n    var i = 0;\n    var item;\n    var pageList;\n    var pageTargets;\n    var length = 0;\n    pageList = (0, _core.qs)(navXml, \"pageList\");\n    if (!pageList) return list;\n    pageTargets = (0, _core.qsa)(pageList, \"pageTarget\");\n    length = pageTargets.length;\n\n    if (!pageTargets || pageTargets.length === 0) {\n      return list;\n    }\n\n    for (i = 0; i < length; ++i) {\n      item = this.ncxItem(pageTargets[i]);\n      list.push(item);\n    }\n\n    return list;\n  }\n\n  ncxItem(item) {\n    var navLabel = (0, _core.qs)(item, \"navLabel\");\n    var navLabelText = (0, _core.qs)(navLabel, \"text\");\n    var pageText = navLabelText.textContent;\n    var content = (0, _core.qs)(item, \"content\");\n    var href = content.getAttribute(\"src\");\n    var page = parseInt(pageText, 10);\n    return {\n      \"href\": href,\n      \"page\": page\n    };\n  }\n  /**\n   * Page List Item\n   * @private\n   * @param  {node} item\n   * @return {object} pageListItem\n   */\n\n\n  item(item) {\n    var content = (0, _core.qs)(item, \"a\"),\n        href = content.getAttribute(\"href\") || \"\",\n        text = content.textContent || \"\",\n        page = parseInt(text),\n        isCfi = href.indexOf(\"epubcfi\"),\n        split,\n        packageUrl,\n        cfi;\n\n    if (isCfi != -1) {\n      split = href.split(\"#\");\n      packageUrl = split[0];\n      cfi = split.length > 1 ? split[1] : false;\n      return {\n        \"cfi\": cfi,\n        \"href\": href,\n        \"packageUrl\": packageUrl,\n        \"page\": page\n      };\n    } else {\n      return {\n        \"href\": href,\n        \"page\": page\n      };\n    }\n  }\n  /**\n   * Process pageList items\n   * @private\n   * @param  {array} pageList\n   */\n\n\n  process(pageList) {\n    pageList.forEach(function (item) {\n      this.pages.push(item.page);\n\n      if (item.cfi) {\n        this.locations.push(item.cfi);\n      }\n    }, this);\n    this.firstPage = parseInt(this.pages[0]);\n    this.lastPage = parseInt(this.pages[this.pages.length - 1]);\n    this.totalPages = this.lastPage - this.firstPage;\n  }\n  /**\n   * Get a PageList result from a EpubCFI\n   * @param  {string} cfi EpubCFI String\n   * @return {number} page\n   */\n\n\n  pageFromCfi(cfi) {\n    var pg = -1; // Check if the pageList has not been set yet\n\n    if (this.locations.length === 0) {\n      return -1;\n    } // TODO: check if CFI is valid?\n    // check if the cfi is in the location list\n    // var index = this.locations.indexOf(cfi);\n\n\n    var index = (0, _core.indexOfSorted)(cfi, this.locations, this.epubcfi.compare);\n\n    if (index != -1) {\n      pg = this.pages[index];\n    } else {\n      // Otherwise add it to the list of locations\n      // Insert it in the correct position in the locations page\n      //index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n      index = (0, _core.locationOf)(cfi, this.locations, this.epubcfi.compare); // Get the page at the location just before the new one, or return the first\n\n      pg = index - 1 >= 0 ? this.pages[index - 1] : this.pages[0];\n\n      if (pg !== undefined) {// Add the new page in so that the locations and page array match up\n        //this.pages.splice(index, 0, pg);\n      } else {\n        pg = -1;\n      }\n    }\n\n    return pg;\n  }\n  /**\n   * Get an EpubCFI from a Page List Item\n   * @param  {string | number} pg\n   * @return {string} cfi\n   */\n\n\n  cfiFromPage(pg) {\n    var cfi = -1; // check that pg is an int\n\n    if (typeof pg != \"number\") {\n      pg = parseInt(pg);\n    } // check if the cfi is in the page list\n    // Pages could be unsorted.\n\n\n    var index = this.pages.indexOf(pg);\n\n    if (index != -1) {\n      cfi = this.locations[index];\n    } // TODO: handle pages not in the list\n\n\n    return cfi;\n  }\n  /**\n   * Get a Page from Book percentage\n   * @param  {number} percent\n   * @return {number} page\n   */\n\n\n  pageFromPercentage(percent) {\n    var pg = Math.round(this.totalPages * percent);\n    return pg;\n  }\n  /**\n   * Returns a value between 0 - 1 corresponding to the location of a page\n   * @param  {number} pg the page\n   * @return {number} percentage\n   */\n\n\n  percentageFromPage(pg) {\n    var percentage = (pg - this.firstPage) / this.totalPages;\n    return Math.round(percentage * 1000) / 1000;\n  }\n  /**\n   * Returns a value between 0 - 1 corresponding to the location of a cfi\n   * @param  {string} cfi EpubCFI String\n   * @return {number} percentage\n   */\n\n\n  percentageFromCfi(cfi) {\n    var pg = this.pageFromCfi(cfi);\n    var percentage = this.percentageFromPage(pg);\n    return percentage;\n  }\n  /**\n   * Destroy\n   */\n\n\n  destroy() {\n    this.pages = undefined;\n    this.locations = undefined;\n    this.epubcfi = undefined;\n    this.pageList = undefined;\n    this.toc = undefined;\n    this.ncx = undefined;\n  }\n\n}\n\nvar _default = PageList;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\nvar _constants = require(\"./utils/constants\");\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Figures out the CSS values to apply for a layout\n * @class\n * @param {object} settings\n * @param {string} [settings.layout='reflowable']\n * @param {string} [settings.spread]\n * @param {number} [settings.minSpreadWidth=800]\n * @param {boolean} [settings.evenSpreads=false]\n */\nclass Layout {\n  constructor(settings) {\n    this.settings = settings;\n    this.name = settings.layout || \"reflowable\";\n    this._spread = settings.spread === \"none\" ? false : true;\n    this._minSpreadWidth = settings.minSpreadWidth || 800;\n    this._evenSpreads = settings.evenSpreads || false;\n\n    if (settings.flow === \"scrolled\" || settings.flow === \"scrolled-continuous\" || settings.flow === \"scrolled-doc\") {\n      this._flow = \"scrolled\";\n    } else {\n      this._flow = \"paginated\";\n    }\n\n    this.width = 0;\n    this.height = 0;\n    this.spreadWidth = 0;\n    this.delta = 0;\n    this.columnWidth = 0;\n    this.gap = 0;\n    this.divisor = 1;\n    this.props = {\n      name: this.name,\n      spread: this._spread,\n      flow: this._flow,\n      width: 0,\n      height: 0,\n      spreadWidth: 0,\n      delta: 0,\n      columnWidth: 0,\n      gap: 0,\n      divisor: 1\n    };\n  }\n  /**\n   * Switch the flow between paginated and scrolled\n   * @param  {string} flow paginated | scrolled\n   * @return {string} simplified flow\n   */\n\n\n  flow(flow) {\n    if (typeof flow != \"undefined\") {\n      if (flow === \"scrolled\" || flow === \"scrolled-continuous\" || flow === \"scrolled-doc\") {\n        this._flow = \"scrolled\";\n      } else {\n        this._flow = \"paginated\";\n      } // this.props.flow = this._flow;\n\n\n      this.update({\n        flow: this._flow\n      });\n    }\n\n    return this._flow;\n  }\n  /**\n   * Switch between using spreads or not, and set the\n   * width at which they switch to single.\n   * @param  {string} spread \"none\" | \"always\" | \"auto\"\n   * @param  {number} min integer in pixels\n   * @return {boolean} spread true | false\n   */\n\n\n  spread(spread, min) {\n    if (spread) {\n      this._spread = spread === \"none\" ? false : true; // this.props.spread = this._spread;\n\n      this.update({\n        spread: this._spread\n      });\n    }\n\n    if (min >= 0) {\n      this._minSpreadWidth = min;\n    }\n\n    return this._spread;\n  }\n  /**\n   * Calculate the dimensions of the pagination\n   * @param  {number} _width  width of the rendering\n   * @param  {number} _height height of the rendering\n   * @param  {number} _gap    width of the gap between columns\n   */\n\n\n  calculate(_width, _height, _gap) {\n    var divisor = 1;\n    var gap = _gap || 0; //-- Check the width and create even width columns\n    // var fullWidth = Math.floor(_width);\n\n    var width = _width;\n    var height = _height;\n    var section = Math.floor(width / 12);\n    var columnWidth;\n    var spreadWidth;\n    var pageWidth;\n    var delta;\n\n    if (this._spread && width >= this._minSpreadWidth) {\n      divisor = 2;\n    } else {\n      divisor = 1;\n    }\n\n    if (this.name === \"reflowable\" && this._flow === \"paginated\" && !(_gap >= 0)) {\n      gap = section % 2 === 0 ? section : section - 1;\n    }\n\n    if (this.name === \"pre-paginated\") {\n      gap = 0;\n    } //-- Double Page\n\n\n    if (divisor > 1) {\n      // width = width - gap;\n      // columnWidth = (width - gap) / divisor;\n      // gap = gap / divisor;\n      columnWidth = width / divisor - gap;\n      pageWidth = columnWidth + gap;\n    } else {\n      columnWidth = width;\n      pageWidth = width;\n    }\n\n    if (this.name === \"pre-paginated\" && divisor > 1) {\n      width = columnWidth;\n    }\n\n    spreadWidth = columnWidth * divisor + gap;\n    delta = width;\n    this.width = width;\n    this.height = height;\n    this.spreadWidth = spreadWidth;\n    this.pageWidth = pageWidth;\n    this.delta = delta;\n    this.columnWidth = columnWidth;\n    this.gap = gap;\n    this.divisor = divisor; // this.props.width = width;\n    // this.props.height = _height;\n    // this.props.spreadWidth = spreadWidth;\n    // this.props.pageWidth = pageWidth;\n    // this.props.delta = delta;\n    //\n    // this.props.columnWidth = colWidth;\n    // this.props.gap = gap;\n    // this.props.divisor = divisor;\n\n    this.update({\n      width,\n      height,\n      spreadWidth,\n      pageWidth,\n      delta,\n      columnWidth,\n      gap,\n      divisor\n    });\n  }\n  /**\n   * Apply Css to a Document\n   * @param  {Contents} contents\n   * @return {Promise}\n   */\n\n\n  format(contents, section, axis) {\n    var formating;\n\n    if (this.name === \"pre-paginated\") {\n      formating = contents.fit(this.columnWidth, this.height, section);\n    } else if (this._flow === \"paginated\") {\n      formating = contents.columns(this.width, this.height, this.columnWidth, this.gap, this.settings.direction);\n    } else if (axis && axis === \"horizontal\") {\n      formating = contents.size(null, this.height);\n    } else {\n      formating = contents.size(this.width, null);\n    }\n\n    return formating; // might be a promise in some View Managers\n  }\n  /**\n   * Count number of pages\n   * @param  {number} totalLength\n   * @param  {number} pageLength\n   * @return {{spreads: Number, pages: Number}}\n   */\n\n\n  count(totalLength, pageLength) {\n    let spreads, pages;\n\n    if (this.name === \"pre-paginated\") {\n      spreads = 1;\n      pages = 1;\n    } else if (this._flow === \"paginated\") {\n      pageLength = pageLength || this.delta;\n      spreads = Math.ceil(totalLength / pageLength);\n      pages = spreads * this.divisor;\n    } else {\n      // scrolled\n      pageLength = pageLength || this.height;\n      spreads = Math.ceil(totalLength / pageLength);\n      pages = spreads;\n    }\n\n    return {\n      spreads,\n      pages\n    };\n  }\n  /**\n   * Update props that have changed\n   * @private\n   * @param  {object} props\n   */\n\n\n  update(props) {\n    // Remove props that haven't changed\n    Object.keys(props).forEach(propName => {\n      if (this.props[propName] === props[propName]) {\n        delete props[propName];\n      }\n    });\n\n    if (Object.keys(props).length > 0) {\n      let newProps = (0, _core.extend)(this.props, props);\n      this.emit(_constants.EVENTS.LAYOUT.UPDATED, newProps, props);\n    }\n  }\n\n}\n\n(0, _eventEmitter.default)(Layout.prototype);\nvar _default = Layout;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _url = _interopRequireDefault(require(\"./utils/url\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Themes to apply to displayed content\n * @class\n * @param {Rendition} rendition\n */\nclass Themes {\n  constructor(rendition) {\n    this.rendition = rendition;\n    this._themes = {\n      \"default\": {\n        \"rules\": {},\n        \"url\": \"\",\n        \"serialized\": \"\"\n      }\n    };\n    this._overrides = {};\n    this._current = \"default\";\n    this._injected = [];\n    this.rendition.hooks.content.register(this.inject.bind(this));\n    this.rendition.hooks.content.register(this.overrides.bind(this));\n  }\n  /**\n   * Add themes to be used by a rendition\n   * @param {object | Array<object> | string}\n   * @example themes.register(\"light\", \"http://example.com/light.css\")\n   * @example themes.register(\"light\", { \"body\": { \"color\": \"purple\"}})\n   * @example themes.register({ \"light\" : {...}, \"dark\" : {...}})\n   */\n\n\n  register() {\n    if (arguments.length === 0) {\n      return;\n    }\n\n    if (arguments.length === 1 && typeof arguments[0] === \"object\") {\n      return this.registerThemes(arguments[0]);\n    }\n\n    if (arguments.length === 1 && typeof arguments[0] === \"string\") {\n      return this.default(arguments[0]);\n    }\n\n    if (arguments.length === 2 && typeof arguments[1] === \"string\") {\n      return this.registerUrl(arguments[0], arguments[1]);\n    }\n\n    if (arguments.length === 2 && typeof arguments[1] === \"object\") {\n      return this.registerRules(arguments[0], arguments[1]);\n    }\n  }\n  /**\n   * Add a default theme to be used by a rendition\n   * @param {object | string} theme\n   * @example themes.register(\"http://example.com/default.css\")\n   * @example themes.register({ \"body\": { \"color\": \"purple\"}})\n   */\n\n\n  default(theme) {\n    if (!theme) {\n      return;\n    }\n\n    if (typeof theme === \"string\") {\n      return this.registerUrl(\"default\", theme);\n    }\n\n    if (typeof theme === \"object\") {\n      return this.registerRules(\"default\", theme);\n    }\n  }\n  /**\n   * Register themes object\n   * @param {object} themes\n   */\n\n\n  registerThemes(themes) {\n    for (var theme in themes) {\n      if (themes.hasOwnProperty(theme)) {\n        if (typeof themes[theme] === \"string\") {\n          this.registerUrl(theme, themes[theme]);\n        } else {\n          this.registerRules(theme, themes[theme]);\n        }\n      }\n    }\n  }\n  /**\n   * Register a theme by passing its css as string\n   * @param {string} name \n   * @param {string} css \n   */\n\n\n  registerCss(name, css) {\n    this._themes[name] = {\n      \"serialized\": css\n    };\n\n    if (this._injected[name] || name == 'default') {\n      this.update(name);\n    }\n  }\n  /**\n   * Register a url\n   * @param {string} name\n   * @param {string} input\n   */\n\n\n  registerUrl(name, input) {\n    var url = new _url.default(input);\n    this._themes[name] = {\n      \"url\": url.toString()\n    };\n\n    if (this._injected[name] || name == 'default') {\n      this.update(name);\n    }\n  }\n  /**\n   * Register rule\n   * @param {string} name\n   * @param {object} rules\n   */\n\n\n  registerRules(name, rules) {\n    this._themes[name] = {\n      \"rules\": rules\n    }; // TODO: serialize css rules\n\n    if (this._injected[name] || name == 'default') {\n      this.update(name);\n    }\n  }\n  /**\n   * Select a theme\n   * @param {string} name\n   */\n\n\n  select(name) {\n    var prev = this._current;\n    var contents;\n    this._current = name;\n    this.update(name);\n    contents = this.rendition.getContents();\n    contents.forEach(content => {\n      content.removeClass(prev);\n      content.addClass(name);\n    });\n  }\n  /**\n   * Update a theme\n   * @param {string} name\n   */\n\n\n  update(name) {\n    var contents = this.rendition.getContents();\n    contents.forEach(content => {\n      this.add(name, content);\n    });\n  }\n  /**\n   * Inject all themes into contents\n   * @param {Contents} contents\n   */\n\n\n  inject(contents) {\n    var links = [];\n    var themes = this._themes;\n    var theme;\n\n    for (var name in themes) {\n      if (themes.hasOwnProperty(name) && (name === this._current || name === \"default\")) {\n        theme = themes[name];\n\n        if (theme.rules && Object.keys(theme.rules).length > 0 || theme.url && links.indexOf(theme.url) === -1) {\n          this.add(name, contents);\n        }\n\n        this._injected.push(name);\n      }\n    }\n\n    if (this._current != \"default\") {\n      contents.addClass(this._current);\n    }\n  }\n  /**\n   * Add Theme to contents\n   * @param {string} name\n   * @param {Contents} contents\n   */\n\n\n  add(name, contents) {\n    var theme = this._themes[name];\n\n    if (!theme || !contents) {\n      return;\n    }\n\n    if (theme.url) {\n      contents.addStylesheet(theme.url);\n    } else if (theme.serialized) {\n      contents.addStylesheetCss(theme.serialized, name);\n      theme.injected = true;\n    } else if (theme.rules) {\n      contents.addStylesheetRules(theme.rules, name);\n      theme.injected = true;\n    }\n  }\n  /**\n   * Add override\n   * @param {string} name\n   * @param {string} value\n   * @param {boolean} priority\n   */\n\n\n  override(name, value, priority) {\n    var contents = this.rendition.getContents();\n    this._overrides[name] = {\n      value: value,\n      priority: priority === true\n    };\n    contents.forEach(content => {\n      content.css(name, this._overrides[name].value, this._overrides[name].priority);\n    });\n  }\n\n  removeOverride(name) {\n    var contents = this.rendition.getContents();\n    delete this._overrides[name];\n    contents.forEach(content => {\n      content.css(name);\n    });\n  }\n  /**\n   * Add all overrides\n   * @param {Content} content\n   */\n\n\n  overrides(contents) {\n    var overrides = this._overrides;\n\n    for (var rule in overrides) {\n      if (overrides.hasOwnProperty(rule)) {\n        contents.css(rule, overrides[rule].value, overrides[rule].priority);\n      }\n    }\n  }\n  /**\n   * Adjust the font size of a rendition\n   * @param {number} size\n   */\n\n\n  fontSize(size) {\n    this.override(\"font-size\", size);\n  }\n  /**\n   * Adjust the font-family of a rendition\n   * @param {string} f\n   */\n\n\n  font(f) {\n    this.override(\"font-family\", f, true);\n  }\n\n  destroy() {\n    this.rendition = undefined;\n    this._themes = undefined;\n    this._overrides = undefined;\n    this._current = undefined;\n    this._injected = undefined;\n  }\n\n}\n\nvar _default = Themes;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _core = require(\"./utils/core\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Map text locations to CFI ranges\n * @class\n * @param {Layout} layout Layout to apply\n * @param {string} [direction=\"ltr\"] Text direction\n * @param {string} [axis=\"horizontal\"] vertical or horizontal axis\n * @param {boolean} [dev] toggle developer highlighting\n */\nclass Mapping {\n  constructor(layout, direction, axis, dev = false) {\n    this.layout = layout;\n    this.horizontal = axis === \"horizontal\" ? true : false;\n    this.direction = direction || \"ltr\";\n    this._dev = dev;\n  }\n  /**\n   * Find CFI pairs for entire section at once\n   */\n\n\n  section(view) {\n    var ranges = this.findRanges(view);\n    var map = this.rangeListToCfiList(view.section.cfiBase, ranges);\n    return map;\n  }\n  /**\n   * Find CFI pairs for a page\n   * @param {Contents} contents Contents from view\n   * @param {string} cfiBase string of the base for a cfi\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   */\n\n\n  page(contents, cfiBase, start, end) {\n    var root = contents && contents.document ? contents.document.body : false;\n    var result;\n\n    if (!root) {\n      return;\n    }\n\n    result = this.rangePairToCfiPair(cfiBase, {\n      start: this.findStart(root, start, end),\n      end: this.findEnd(root, start, end)\n    });\n\n    if (this._dev === true) {\n      let doc = contents.document;\n      let startRange = new _epubcfi.default(result.start).toRange(doc);\n      let endRange = new _epubcfi.default(result.end).toRange(doc);\n      let selection = doc.defaultView.getSelection();\n      let r = doc.createRange();\n      selection.removeAllRanges();\n      r.setStart(startRange.startContainer, startRange.startOffset);\n      r.setEnd(endRange.endContainer, endRange.endOffset);\n      selection.addRange(r);\n    }\n\n    return result;\n  }\n  /**\n   * Walk a node, preforming a function on each node it finds\n   * @private\n   * @param {Node} root Node to walkToNode\n   * @param {function} func walk function\n   * @return {*} returns the result of the walk function\n   */\n\n\n  walk(root, func) {\n    // IE11 has strange issue, if root is text node IE throws exception on\n    // calling treeWalker.nextNode(), saying\n    // Unexpected call to method or property access instead of returning null value\n    if (root && root.nodeType === Node.TEXT_NODE) {\n      return;\n    } // safeFilter is required so that it can work in IE as filter is a function for IE\n    // and for other browser filter is an object.\n\n\n    var filter = {\n      acceptNode: function (node) {\n        if (node.data.trim().length > 0) {\n          return NodeFilter.FILTER_ACCEPT;\n        } else {\n          return NodeFilter.FILTER_REJECT;\n        }\n      }\n    };\n    var safeFilter = filter.acceptNode;\n    safeFilter.acceptNode = filter.acceptNode;\n    var treeWalker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, safeFilter, false);\n    var node;\n    var result;\n\n    while (node = treeWalker.nextNode()) {\n      result = func(node);\n      if (result) break;\n    }\n\n    return result;\n  }\n\n  findRanges(view) {\n    var columns = [];\n    var scrollWidth = view.contents.scrollWidth();\n    var spreads = Math.ceil(scrollWidth / this.layout.spreadWidth);\n    var count = spreads * this.layout.divisor;\n    var columnWidth = this.layout.columnWidth;\n    var gap = this.layout.gap;\n    var start, end;\n\n    for (var i = 0; i < count.pages; i++) {\n      start = (columnWidth + gap) * i;\n      end = columnWidth * (i + 1) + gap * i;\n      columns.push({\n        start: this.findStart(view.document.body, start, end),\n        end: this.findEnd(view.document.body, start, end)\n      });\n    }\n\n    return columns;\n  }\n  /**\n   * Find Start Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n\n\n  findStart(root, start, end) {\n    var stack = [root];\n    var $el;\n    var found;\n    var $prev = root;\n\n    while (stack.length) {\n      $el = stack.shift();\n      found = this.walk($el, node => {\n        var left, right, top, bottom;\n        var elPos;\n        var elRange;\n        elPos = (0, _core.nodeBounds)(node);\n\n        if (this.horizontal && this.direction === \"ltr\") {\n          left = this.horizontal ? elPos.left : elPos.top;\n          right = this.horizontal ? elPos.right : elPos.bottom;\n\n          if (left >= start && left <= end) {\n            return node;\n          } else if (right > start) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else if (this.horizontal && this.direction === \"rtl\") {\n          left = elPos.left;\n          right = elPos.right;\n\n          if (right <= end && right >= start) {\n            return node;\n          } else if (left < end) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else {\n          top = elPos.top;\n          bottom = elPos.bottom;\n\n          if (top >= start && top <= end) {\n            return node;\n          } else if (bottom > start) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        }\n      });\n\n      if (found) {\n        return this.findTextStartRange(found, start, end);\n      }\n    } // Return last element\n\n\n    return this.findTextStartRange($prev, start, end);\n  }\n  /**\n   * Find End Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n\n\n  findEnd(root, start, end) {\n    var stack = [root];\n    var $el;\n    var $prev = root;\n    var found;\n\n    while (stack.length) {\n      $el = stack.shift();\n      found = this.walk($el, node => {\n        var left, right, top, bottom;\n        var elPos;\n        var elRange;\n        elPos = (0, _core.nodeBounds)(node);\n\n        if (this.horizontal && this.direction === \"ltr\") {\n          left = Math.round(elPos.left);\n          right = Math.round(elPos.right);\n\n          if (left > end && $prev) {\n            return $prev;\n          } else if (right > end) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else if (this.horizontal && this.direction === \"rtl\") {\n          left = Math.round(this.horizontal ? elPos.left : elPos.top);\n          right = Math.round(this.horizontal ? elPos.right : elPos.bottom);\n\n          if (right < start && $prev) {\n            return $prev;\n          } else if (left < start) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        } else {\n          top = Math.round(elPos.top);\n          bottom = Math.round(elPos.bottom);\n\n          if (top > end && $prev) {\n            return $prev;\n          } else if (bottom > end) {\n            return node;\n          } else {\n            $prev = node;\n            stack.push(node);\n          }\n        }\n      });\n\n      if (found) {\n        return this.findTextEndRange(found, start, end);\n      }\n    } // end of chapter\n\n\n    return this.findTextEndRange($prev, start, end);\n  }\n  /**\n   * Find Text Start Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n\n\n  findTextStartRange(node, start, end) {\n    var ranges = this.splitTextNodeIntoRanges(node);\n    var range;\n    var pos;\n    var left, top, right;\n\n    for (var i = 0; i < ranges.length; i++) {\n      range = ranges[i];\n      pos = range.getBoundingClientRect();\n\n      if (this.horizontal && this.direction === \"ltr\") {\n        left = pos.left;\n\n        if (left >= start) {\n          return range;\n        }\n      } else if (this.horizontal && this.direction === \"rtl\") {\n        right = pos.right;\n\n        if (right <= end) {\n          return range;\n        }\n      } else {\n        top = pos.top;\n\n        if (top >= start) {\n          return range;\n        }\n      } // prev = range;\n\n    }\n\n    return ranges[0];\n  }\n  /**\n   * Find Text End Range\n   * @private\n   * @param {Node} root root node\n   * @param {number} start position to start at\n   * @param {number} end position to end at\n   * @return {Range}\n   */\n\n\n  findTextEndRange(node, start, end) {\n    var ranges = this.splitTextNodeIntoRanges(node);\n    var prev;\n    var range;\n    var pos;\n    var left, right, top, bottom;\n\n    for (var i = 0; i < ranges.length; i++) {\n      range = ranges[i];\n      pos = range.getBoundingClientRect();\n\n      if (this.horizontal && this.direction === \"ltr\") {\n        left = pos.left;\n        right = pos.right;\n\n        if (left > end && prev) {\n          return prev;\n        } else if (right > end) {\n          return range;\n        }\n      } else if (this.horizontal && this.direction === \"rtl\") {\n        left = pos.left;\n        right = pos.right;\n\n        if (right < start && prev) {\n          return prev;\n        } else if (left < start) {\n          return range;\n        }\n      } else {\n        top = pos.top;\n        bottom = pos.bottom;\n\n        if (top > end && prev) {\n          return prev;\n        } else if (bottom > end) {\n          return range;\n        }\n      }\n\n      prev = range;\n    } // Ends before limit\n\n\n    return ranges[ranges.length - 1];\n  }\n  /**\n   * Split up a text node into ranges for each word\n   * @private\n   * @param {Node} root root node\n   * @param {string} [_splitter] what to split on\n   * @return {Range[]}\n   */\n\n\n  splitTextNodeIntoRanges(node, _splitter) {\n    var ranges = [];\n    var textContent = node.textContent || \"\";\n    var text = textContent.trim();\n    var range;\n    var doc = node.ownerDocument;\n    var splitter = _splitter || \" \";\n    var pos = text.indexOf(splitter);\n\n    if (pos === -1 || node.nodeType != Node.TEXT_NODE) {\n      range = doc.createRange();\n      range.selectNodeContents(node);\n      return [range];\n    }\n\n    range = doc.createRange();\n    range.setStart(node, 0);\n    range.setEnd(node, pos);\n    ranges.push(range);\n    range = false;\n\n    while (pos != -1) {\n      pos = text.indexOf(splitter, pos + 1);\n\n      if (pos > 0) {\n        if (range) {\n          range.setEnd(node, pos);\n          ranges.push(range);\n        }\n\n        range = doc.createRange();\n        range.setStart(node, pos + 1);\n      }\n    }\n\n    if (range) {\n      range.setEnd(node, text.length);\n      ranges.push(range);\n    }\n\n    return ranges;\n  }\n  /**\n   * Turn a pair of ranges into a pair of CFIs\n   * @private\n   * @param {string} cfiBase base string for an EpubCFI\n   * @param {object} rangePair { start: Range, end: Range }\n   * @return {object} { start: \"epubcfi(...)\", end: \"epubcfi(...)\" }\n   */\n\n\n  rangePairToCfiPair(cfiBase, rangePair) {\n    var startRange = rangePair.start;\n    var endRange = rangePair.end;\n    startRange.collapse(true);\n    endRange.collapse(false);\n    let startCfi = new _epubcfi.default(startRange, cfiBase).toString();\n    let endCfi = new _epubcfi.default(endRange, cfiBase).toString();\n    return {\n      start: startCfi,\n      end: endCfi\n    };\n  }\n\n  rangeListToCfiList(cfiBase, columns) {\n    var map = [];\n    var cifPair;\n\n    for (var i = 0; i < columns.length; i++) {\n      cifPair = this.rangePairToCfiPair(cfiBase, columns[i]);\n      map.push(cifPair);\n    }\n\n    return map;\n  }\n  /**\n   * Set the axis for mapping\n   * @param {string} axis horizontal | vertical\n   * @return {boolean} is it horizontal?\n   */\n\n\n  axis(axis) {\n    if (axis) {\n      this.horizontal = axis === \"horizontal\" ? true : false;\n    }\n\n    return this.horizontal;\n  }\n\n}\n\nvar _default = Mapping;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _core = require(\"./utils/core\");\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _mapping = _interopRequireDefault(require(\"./mapping\"));\n\nvar _replacements = require(\"./utils/replacements\");\n\nvar _constants = require(\"./utils/constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst hasNavigator = typeof navigator !== \"undefined\";\nconst isChrome = hasNavigator && /Chrome/.test(navigator.userAgent);\nconst isWebkit = hasNavigator && !isChrome && /AppleWebKit/.test(navigator.userAgent);\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\n/**\n\t* Handles DOM manipulation, queries and events for View contents\n\t* @class\n\t* @param {document} doc Document\n\t* @param {element} content Parent Element (typically Body)\n\t* @param {string} cfiBase Section component of CFIs\n\t* @param {number} sectionIndex Index in Spine of Conntent's Section\n\t*/\n\nclass Contents {\n  constructor(doc, content, cfiBase, sectionIndex) {\n    // Blank Cfi for Parsing\n    this.epubcfi = new _epubcfi.default();\n    this.document = doc;\n    this.documentElement = this.document.documentElement;\n    this.content = content || this.document.body;\n    this.window = this.document.defaultView;\n    this._size = {\n      width: 0,\n      height: 0\n    };\n    this.sectionIndex = sectionIndex || 0;\n    this.cfiBase = cfiBase || \"\";\n    this.epubReadingSystem(\"epub.js\", _constants.EPUBJS_VERSION);\n    this.called = 0;\n    this.active = true;\n    this.listeners();\n  }\n  /**\n  \t* Get DOM events that are listened for and passed along\n  \t*/\n\n\n  static get listenedEvents() {\n    return _constants.DOM_EVENTS;\n  }\n  /**\n  \t* Get or Set width\n  \t* @param {number} [w]\n  \t* @returns {number} width\n  \t*/\n\n\n  width(w) {\n    // var frame = this.documentElement;\n    var frame = this.content;\n\n    if (w && (0, _core.isNumber)(w)) {\n      w = w + \"px\";\n    }\n\n    if (w) {\n      frame.style.width = w; // this.content.style.width = w;\n    }\n\n    return parseInt(this.window.getComputedStyle(frame)[\"width\"]);\n  }\n  /**\n  \t* Get or Set height\n  \t* @param {number} [h]\n  \t* @returns {number} height\n  \t*/\n\n\n  height(h) {\n    // var frame = this.documentElement;\n    var frame = this.content;\n\n    if (h && (0, _core.isNumber)(h)) {\n      h = h + \"px\";\n    }\n\n    if (h) {\n      frame.style.height = h; // this.content.style.height = h;\n    }\n\n    return parseInt(this.window.getComputedStyle(frame)[\"height\"]);\n  }\n  /**\n  \t* Get or Set width of the contents\n  \t* @param {number} [w]\n  \t* @returns {number} width\n  \t*/\n\n\n  contentWidth(w) {\n    var content = this.content || this.document.body;\n\n    if (w && (0, _core.isNumber)(w)) {\n      w = w + \"px\";\n    }\n\n    if (w) {\n      content.style.width = w;\n    }\n\n    return parseInt(this.window.getComputedStyle(content)[\"width\"]);\n  }\n  /**\n  \t* Get or Set height of the contents\n  \t* @param {number} [h]\n  \t* @returns {number} height\n  \t*/\n\n\n  contentHeight(h) {\n    var content = this.content || this.document.body;\n\n    if (h && (0, _core.isNumber)(h)) {\n      h = h + \"px\";\n    }\n\n    if (h) {\n      content.style.height = h;\n    }\n\n    return parseInt(this.window.getComputedStyle(content)[\"height\"]);\n  }\n  /**\n  \t* Get the width of the text using Range\n  \t* @returns {number} width\n  \t*/\n\n\n  textWidth() {\n    let rect;\n    let width;\n    let range = this.document.createRange();\n    let content = this.content || this.document.body;\n    let border = (0, _core.borders)(content); // Select the contents of frame\n\n    range.selectNodeContents(content); // get the width of the text content\n\n    rect = range.getBoundingClientRect();\n    width = rect.width;\n\n    if (border && border.width) {\n      width += border.width;\n    }\n\n    return Math.round(width);\n  }\n  /**\n  \t* Get the height of the text using Range\n  \t* @returns {number} height\n  \t*/\n\n\n  textHeight() {\n    let rect;\n    let height;\n    let range = this.document.createRange();\n    let content = this.content || this.document.body;\n    range.selectNodeContents(content);\n    rect = range.getBoundingClientRect();\n    height = rect.bottom;\n    return Math.round(height);\n  }\n  /**\n  \t* Get documentElement scrollWidth\n  \t* @returns {number} width\n  \t*/\n\n\n  scrollWidth() {\n    var width = this.documentElement.scrollWidth;\n    return width;\n  }\n  /**\n  \t* Get documentElement scrollHeight\n  \t* @returns {number} height\n  \t*/\n\n\n  scrollHeight() {\n    var height = this.documentElement.scrollHeight;\n    return height;\n  }\n  /**\n  \t* Set overflow css style of the contents\n  \t* @param {string} [overflow]\n  \t*/\n\n\n  overflow(overflow) {\n    if (overflow) {\n      this.documentElement.style.overflow = overflow;\n    }\n\n    return this.window.getComputedStyle(this.documentElement)[\"overflow\"];\n  }\n  /**\n  \t* Set overflowX css style of the documentElement\n  \t* @param {string} [overflow]\n  \t*/\n\n\n  overflowX(overflow) {\n    if (overflow) {\n      this.documentElement.style.overflowX = overflow;\n    }\n\n    return this.window.getComputedStyle(this.documentElement)[\"overflowX\"];\n  }\n  /**\n  \t* Set overflowY css style of the documentElement\n  \t* @param {string} [overflow]\n  \t*/\n\n\n  overflowY(overflow) {\n    if (overflow) {\n      this.documentElement.style.overflowY = overflow;\n    }\n\n    return this.window.getComputedStyle(this.documentElement)[\"overflowY\"];\n  }\n  /**\n  \t* Set Css styles on the contents element (typically Body)\n  \t* @param {string} property\n  \t* @param {string} value\n  \t* @param {boolean} [priority] set as \"important\"\n  \t*/\n\n\n  css(property, value, priority) {\n    var content = this.content || this.document.body;\n\n    if (value) {\n      content.style.setProperty(property, value, priority ? \"important\" : \"\");\n    } else {\n      content.style.removeProperty(property);\n    }\n\n    return this.window.getComputedStyle(content)[property];\n  }\n  /**\n  \t* Get or Set the viewport element\n  \t* @param {object} [options]\n  \t* @param {string} [options.width]\n  \t* @param {string} [options.height]\n  \t* @param {string} [options.scale]\n  \t* @param {string} [options.minimum]\n  \t* @param {string} [options.maximum]\n  \t* @param {string} [options.scalable]\n  \t*/\n\n\n  viewport(options) {\n    var _width, _height, _scale, _minimum, _maximum, _scalable; // var width, height, scale, minimum, maximum, scalable;\n\n\n    var $viewport = this.document.querySelector(\"meta[name='viewport']\");\n    var parsed = {\n      \"width\": undefined,\n      \"height\": undefined,\n      \"scale\": undefined,\n      \"minimum\": undefined,\n      \"maximum\": undefined,\n      \"scalable\": undefined\n    };\n    var newContent = [];\n    var settings = {};\n    /*\n    * check for the viewport size\n    * <meta name=\"viewport\" content=\"width=1024,height=697\" />\n    */\n\n    if ($viewport && $viewport.hasAttribute(\"content\")) {\n      let content = $viewport.getAttribute(\"content\");\n\n      let _width = content.match(/width\\s*=\\s*([^,]*)/);\n\n      let _height = content.match(/height\\s*=\\s*([^,]*)/);\n\n      let _scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\n      let _minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\n      let _maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\n      let _scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n      if (_width && _width.length && typeof _width[1] !== \"undefined\") {\n        parsed.width = _width[1];\n      }\n\n      if (_height && _height.length && typeof _height[1] !== \"undefined\") {\n        parsed.height = _height[1];\n      }\n\n      if (_scale && _scale.length && typeof _scale[1] !== \"undefined\") {\n        parsed.scale = _scale[1];\n      }\n\n      if (_minimum && _minimum.length && typeof _minimum[1] !== \"undefined\") {\n        parsed.minimum = _minimum[1];\n      }\n\n      if (_maximum && _maximum.length && typeof _maximum[1] !== \"undefined\") {\n        parsed.maximum = _maximum[1];\n      }\n\n      if (_scalable && _scalable.length && typeof _scalable[1] !== \"undefined\") {\n        parsed.scalable = _scalable[1];\n      }\n    }\n\n    settings = (0, _core.defaults)(options || {}, parsed);\n\n    if (options) {\n      if (settings.width) {\n        newContent.push(\"width=\" + settings.width);\n      }\n\n      if (settings.height) {\n        newContent.push(\"height=\" + settings.height);\n      }\n\n      if (settings.scale) {\n        newContent.push(\"initial-scale=\" + settings.scale);\n      }\n\n      if (settings.scalable === \"no\") {\n        newContent.push(\"minimum-scale=\" + settings.scale);\n        newContent.push(\"maximum-scale=\" + settings.scale);\n        newContent.push(\"user-scalable=\" + settings.scalable);\n      } else {\n        if (settings.scalable) {\n          newContent.push(\"user-scalable=\" + settings.scalable);\n        }\n\n        if (settings.minimum) {\n          newContent.push(\"minimum-scale=\" + settings.minimum);\n        }\n\n        if (settings.maximum) {\n          newContent.push(\"minimum-scale=\" + settings.maximum);\n        }\n      }\n\n      if (!$viewport) {\n        $viewport = this.document.createElement(\"meta\");\n        $viewport.setAttribute(\"name\", \"viewport\");\n        this.document.querySelector(\"head\").appendChild($viewport);\n      }\n\n      $viewport.setAttribute(\"content\", newContent.join(\", \"));\n      this.window.scrollTo(0, 0);\n    }\n\n    return settings;\n  }\n  /**\n   * Event emitter for when the contents has expanded\n   * @private\n   */\n\n\n  expand() {\n    this.emit(_constants.EVENTS.CONTENTS.EXPAND);\n  }\n  /**\n   * Add DOM listeners\n   * @private\n   */\n\n\n  listeners() {\n    this.imageLoadListeners();\n    this.mediaQueryListeners(); // this.fontLoadListeners();\n\n    this.addEventListeners();\n    this.addSelectionListeners(); // this.transitionListeners();\n\n    if (typeof ResizeObserver === \"undefined\") {\n      this.resizeListeners();\n      this.visibilityListeners();\n    } else {\n      this.resizeObservers();\n    } // this.mutationObservers();\n\n\n    this.linksHandler();\n  }\n  /**\n   * Remove DOM listeners\n   * @private\n   */\n\n\n  removeListeners() {\n    this.removeEventListeners();\n    this.removeSelectionListeners();\n\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n\n    clearTimeout(this.expanding);\n  }\n  /**\n   * Check if size of contents has changed and\n   * emit 'resize' event if it has.\n   * @private\n   */\n\n\n  resizeCheck() {\n    let width = this.textWidth();\n    let height = this.textHeight();\n\n    if (width != this._size.width || height != this._size.height) {\n      this._size = {\n        width: width,\n        height: height\n      };\n      this.onResize && this.onResize(this._size);\n      this.emit(_constants.EVENTS.CONTENTS.RESIZE, this._size);\n    }\n  }\n  /**\n   * Poll for resize detection\n   * @private\n   */\n\n\n  resizeListeners() {\n    var width, height; // Test size again\n\n    clearTimeout(this.expanding);\n    requestAnimationFrame(this.resizeCheck.bind(this));\n    this.expanding = setTimeout(this.resizeListeners.bind(this), 350);\n  }\n  /**\n   * Listen for visibility of tab to change\n   * @private\n   */\n\n\n  visibilityListeners() {\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === \"visible\" && this.active === false) {\n        this.active = true;\n        this.resizeListeners();\n      } else {\n        this.active = false;\n        clearTimeout(this.expanding);\n      }\n    });\n  }\n  /**\n   * Use css transitions to detect resize\n   * @private\n   */\n\n\n  transitionListeners() {\n    let body = this.content;\n    body.style['transitionProperty'] = \"font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height\";\n    body.style['transitionDuration'] = \"0.001ms\";\n    body.style['transitionTimingFunction'] = \"linear\";\n    body.style['transitionDelay'] = \"0\";\n    this._resizeCheck = this.resizeCheck.bind(this);\n    this.document.addEventListener('transitionend', this._resizeCheck);\n  }\n  /**\n   * Listen for media query changes and emit 'expand' event\n   * Adapted from: https://github.com/tylergaw/media-query-events/blob/master/js/mq-events.js\n   * @private\n   */\n\n\n  mediaQueryListeners() {\n    var sheets = this.document.styleSheets;\n\n    var mediaChangeHandler = function (m) {\n      if (m.matches && !this._expanding) {\n        setTimeout(this.expand.bind(this), 1);\n      }\n    }.bind(this);\n\n    for (var i = 0; i < sheets.length; i += 1) {\n      var rules; // Firefox errors if we access cssRules cross-domain\n\n      try {\n        rules = sheets[i].cssRules;\n      } catch (e) {\n        return;\n      }\n\n      if (!rules) return; // Stylesheets changed\n\n      for (var j = 0; j < rules.length; j += 1) {\n        //if (rules[j].constructor === CSSMediaRule) {\n        if (rules[j].media) {\n          var mql = this.window.matchMedia(rules[j].media.mediaText);\n          mql.addListener(mediaChangeHandler); //mql.onchange = mediaChangeHandler;\n        }\n      }\n    }\n  }\n  /**\n   * Use ResizeObserver to listen for changes in the DOM and check for resize\n   * @private\n   */\n\n\n  resizeObservers() {\n    // create an observer instance\n    this.observer = new ResizeObserver(e => {\n      requestAnimationFrame(this.resizeCheck.bind(this));\n    }); // pass in the target node\n\n    this.observer.observe(this.document.documentElement);\n  }\n  /**\n   * Use MutationObserver to listen for changes in the DOM and check for resize\n   * @private\n   */\n\n\n  mutationObservers() {\n    // create an observer instance\n    this.observer = new MutationObserver(mutations => {\n      this.resizeCheck();\n    }); // configuration of the observer:\n\n    let config = {\n      attributes: true,\n      childList: true,\n      characterData: true,\n      subtree: true\n    }; // pass in the target node, as well as the observer options\n\n    this.observer.observe(this.document, config);\n  }\n  /**\n   * Test if images are loaded or add listener for when they load\n   * @private\n   */\n\n\n  imageLoadListeners() {\n    var images = this.document.querySelectorAll(\"img\");\n    var img;\n\n    for (var i = 0; i < images.length; i++) {\n      img = images[i];\n\n      if (typeof img.naturalWidth !== \"undefined\" && img.naturalWidth === 0) {\n        img.onload = this.expand.bind(this);\n      }\n    }\n  }\n  /**\n   * Listen for font load and check for resize when loaded\n   * @private\n   */\n\n\n  fontLoadListeners() {\n    if (!this.document || !this.document.fonts) {\n      return;\n    }\n\n    this.document.fonts.ready.then(function () {\n      this.resizeCheck();\n    }.bind(this));\n  }\n  /**\n   * Get the documentElement\n   * @returns {element} documentElement\n   */\n\n\n  root() {\n    if (!this.document) return null;\n    return this.document.documentElement;\n  }\n  /**\n   * Get the location offset of a EpubCFI or an #id\n   * @param {string | EpubCFI} target\n   * @param {string} [ignoreClass] for the cfi\n   * @returns { {left: Number, top: Number }\n   */\n\n\n  locationOf(target, ignoreClass) {\n    var position;\n    var targetPos = {\n      \"left\": 0,\n      \"top\": 0\n    };\n    if (!this.document) return targetPos;\n\n    if (this.epubcfi.isCfiString(target)) {\n      let range = new _epubcfi.default(target).toRange(this.document, ignoreClass);\n\n      if (range) {\n        try {\n          if (!range.endContainer || range.startContainer == range.endContainer && range.startOffset == range.endOffset) {\n            // If the end for the range is not set, it results in collapsed becoming\n            // true. This in turn leads to inconsistent behaviour when calling\n            // getBoundingRect. Wrong bounds lead to the wrong page being displayed.\n            // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/15684911/\n            let pos = range.startContainer.textContent.indexOf(\" \", range.startOffset);\n\n            if (pos == -1) {\n              pos = range.startContainer.textContent.length;\n            }\n\n            range.setEnd(range.startContainer, pos);\n          }\n        } catch (e) {\n          console.error(\"setting end offset to start container length failed\", e);\n        }\n\n        if (range.startContainer.nodeType === Node.ELEMENT_NODE) {\n          position = range.startContainer.getBoundingClientRect();\n          targetPos.left = position.left;\n          targetPos.top = position.top;\n        } else {\n          // Webkit does not handle collapsed range bounds correctly\n          // https://bugs.webkit.org/show_bug.cgi?id=138949\n          // Construct a new non-collapsed range\n          if (isWebkit) {\n            let container = range.startContainer;\n            let newRange = new Range();\n\n            try {\n              if (container.nodeType === ELEMENT_NODE) {\n                position = container.getBoundingClientRect();\n              } else if (range.startOffset + 2 < container.length) {\n                newRange.setStart(container, range.startOffset);\n                newRange.setEnd(container, range.startOffset + 2);\n                position = newRange.getBoundingClientRect();\n              } else if (range.startOffset - 2 > 0) {\n                newRange.setStart(container, range.startOffset - 2);\n                newRange.setEnd(container, range.startOffset);\n                position = newRange.getBoundingClientRect();\n              } else {\n                // empty, return the parent element\n                position = container.parentNode.getBoundingClientRect();\n              }\n            } catch (e) {\n              console.error(e, e.stack);\n            }\n          } else {\n            position = range.getBoundingClientRect();\n          }\n        }\n      }\n    } else if (typeof target === \"string\" && target.indexOf(\"#\") > -1) {\n      let id = target.substring(target.indexOf(\"#\") + 1);\n      let el = this.document.getElementById(id);\n\n      if (el) {\n        if (isWebkit) {\n          // Webkit reports incorrect bounding rects in Columns\n          let newRange = new Range();\n          newRange.selectNode(el);\n          position = newRange.getBoundingClientRect();\n        } else {\n          position = el.getBoundingClientRect();\n        }\n      }\n    }\n\n    if (position) {\n      targetPos.left = position.left;\n      targetPos.top = position.top;\n    }\n\n    return targetPos;\n  }\n  /**\n   * Append a stylesheet link to the document head\n   * @param {string} src url\n   */\n\n\n  addStylesheet(src) {\n    return new Promise(function (resolve, reject) {\n      var $stylesheet;\n      var ready = false;\n\n      if (!this.document) {\n        resolve(false);\n        return;\n      } // Check if link already exists\n\n\n      $stylesheet = this.document.querySelector(\"link[href='\" + src + \"']\");\n\n      if ($stylesheet) {\n        resolve(true);\n        return; // already present\n      }\n\n      $stylesheet = this.document.createElement(\"link\");\n      $stylesheet.type = \"text/css\";\n      $stylesheet.rel = \"stylesheet\";\n      $stylesheet.href = src;\n\n      $stylesheet.onload = $stylesheet.onreadystatechange = function () {\n        if (!ready && (!this.readyState || this.readyState == \"complete\")) {\n          ready = true; // Let apply\n\n          setTimeout(() => {\n            resolve(true);\n          }, 1);\n        }\n      };\n\n      this.document.head.appendChild($stylesheet);\n    }.bind(this));\n  }\n\n  _getStylesheetNode(key) {\n    var styleEl;\n    key = \"epubjs-inserted-css-\" + (key || '');\n    if (!this.document) return false; // Check if link already exists\n\n    styleEl = this.document.getElementById(key);\n\n    if (!styleEl) {\n      styleEl = this.document.createElement(\"style\");\n      styleEl.id = key; // Append style element to head\n\n      this.document.head.appendChild(styleEl);\n    }\n\n    return styleEl;\n  }\n  /**\n   * Append stylesheet css\n   * @param {string} serializedCss\n   * @param {string} key If the key is the same, the CSS will be replaced instead of inserted\n   */\n\n\n  addStylesheetCss(serializedCss, key) {\n    if (!this.document || !serializedCss) return false;\n    var styleEl;\n    styleEl = this._getStylesheetNode(key);\n    styleEl.innerHTML = serializedCss;\n    return true;\n  }\n  /**\n   * Append stylesheet rules to a generate stylesheet\n   * Array: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet/insertRule\n   * Object: https://github.com/desirable-objects/json-to-css\n   * @param {array | object} rules\n   * @param {string} key If the key is the same, the CSS will be replaced instead of inserted\n   */\n\n\n  addStylesheetRules(rules, key) {\n    var styleSheet;\n    if (!this.document || !rules || rules.length === 0) return; // Grab style sheet\n\n    styleSheet = this._getStylesheetNode(key).sheet;\n\n    if (Object.prototype.toString.call(rules) === \"[object Array]\") {\n      for (var i = 0, rl = rules.length; i < rl; i++) {\n        var j = 1,\n            rule = rules[i],\n            selector = rules[i][0],\n            propStr = \"\"; // If the second argument of a rule is an array of arrays, correct our variables.\n\n        if (Object.prototype.toString.call(rule[1][0]) === \"[object Array]\") {\n          rule = rule[1];\n          j = 0;\n        }\n\n        for (var pl = rule.length; j < pl; j++) {\n          var prop = rule[j];\n          propStr += prop[0] + \":\" + prop[1] + (prop[2] ? \" !important\" : \"\") + \";\\n\";\n        } // Insert CSS Rule\n\n\n        styleSheet.insertRule(selector + \"{\" + propStr + \"}\", styleSheet.cssRules.length);\n      }\n    } else {\n      const selectors = Object.keys(rules);\n      selectors.forEach(selector => {\n        const definition = rules[selector];\n\n        if (Array.isArray(definition)) {\n          definition.forEach(item => {\n            const _rules = Object.keys(item);\n\n            const result = _rules.map(rule => {\n              return `${rule}:${item[rule]}`;\n            }).join(';');\n\n            styleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n          });\n        } else {\n          const _rules = Object.keys(definition);\n\n          const result = _rules.map(rule => {\n            return `${rule}:${definition[rule]}`;\n          }).join(';');\n\n          styleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n        }\n      });\n    }\n  }\n  /**\n   * Append a script tag to the document head\n   * @param {string} src url\n   * @returns {Promise} loaded\n   */\n\n\n  addScript(src) {\n    return new Promise(function (resolve, reject) {\n      var $script;\n      var ready = false;\n\n      if (!this.document) {\n        resolve(false);\n        return;\n      }\n\n      $script = this.document.createElement(\"script\");\n      $script.type = \"text/javascript\";\n      $script.async = true;\n      $script.src = src;\n\n      $script.onload = $script.onreadystatechange = function () {\n        if (!ready && (!this.readyState || this.readyState == \"complete\")) {\n          ready = true;\n          setTimeout(function () {\n            resolve(true);\n          }, 1);\n        }\n      };\n\n      this.document.head.appendChild($script);\n    }.bind(this));\n  }\n  /**\n   * Add a class to the contents container\n   * @param {string} className\n   */\n\n\n  addClass(className) {\n    var content;\n    if (!this.document) return;\n    content = this.content || this.document.body;\n\n    if (content) {\n      content.classList.add(className);\n    }\n  }\n  /**\n   * Remove a class from the contents container\n   * @param {string} removeClass\n   */\n\n\n  removeClass(className) {\n    var content;\n    if (!this.document) return;\n    content = this.content || this.document.body;\n\n    if (content) {\n      content.classList.remove(className);\n    }\n  }\n  /**\n   * Add DOM event listeners\n   * @private\n   */\n\n\n  addEventListeners() {\n    if (!this.document) {\n      return;\n    }\n\n    this._triggerEvent = this.triggerEvent.bind(this);\n\n    _constants.DOM_EVENTS.forEach(function (eventName) {\n      this.document.addEventListener(eventName, this._triggerEvent, {\n        passive: true\n      });\n    }, this);\n  }\n  /**\n   * Remove DOM event listeners\n   * @private\n   */\n\n\n  removeEventListeners() {\n    if (!this.document) {\n      return;\n    }\n\n    _constants.DOM_EVENTS.forEach(function (eventName) {\n      this.document.removeEventListener(eventName, this._triggerEvent, {\n        passive: true\n      });\n    }, this);\n\n    this._triggerEvent = undefined;\n  }\n  /**\n   * Emit passed browser events\n   * @private\n   */\n\n\n  triggerEvent(e) {\n    this.emit(e.type, e);\n  }\n  /**\n   * Add listener for text selection\n   * @private\n   */\n\n\n  addSelectionListeners() {\n    if (!this.document) {\n      return;\n    }\n\n    this._onSelectionChange = this.onSelectionChange.bind(this);\n    this.document.addEventListener(\"selectionchange\", this._onSelectionChange, {\n      passive: true\n    });\n  }\n  /**\n   * Remove listener for text selection\n   * @private\n   */\n\n\n  removeSelectionListeners() {\n    if (!this.document) {\n      return;\n    }\n\n    this.document.removeEventListener(\"selectionchange\", this._onSelectionChange, {\n      passive: true\n    });\n    this._onSelectionChange = undefined;\n  }\n  /**\n   * Handle getting text on selection\n   * @private\n   */\n\n\n  onSelectionChange(e) {\n    if (this.selectionEndTimeout) {\n      clearTimeout(this.selectionEndTimeout);\n    }\n\n    this.selectionEndTimeout = setTimeout(function () {\n      var selection = this.window.getSelection();\n      this.triggerSelectedEvent(selection);\n    }.bind(this), 250);\n  }\n  /**\n   * Emit event on text selection\n   * @private\n   */\n\n\n  triggerSelectedEvent(selection) {\n    var range, cfirange;\n\n    if (selection && selection.rangeCount > 0) {\n      range = selection.getRangeAt(0);\n\n      if (!range.collapsed) {\n        // cfirange = this.section.cfiFromRange(range);\n        cfirange = new _epubcfi.default(range, this.cfiBase).toString();\n        this.emit(_constants.EVENTS.CONTENTS.SELECTED, cfirange);\n        this.emit(_constants.EVENTS.CONTENTS.SELECTED_RANGE, range);\n      }\n    }\n  }\n  /**\n   * Get a Dom Range from EpubCFI\n   * @param {EpubCFI} _cfi\n   * @param {string} [ignoreClass]\n   * @returns {Range} range\n   */\n\n\n  range(_cfi, ignoreClass) {\n    var cfi = new _epubcfi.default(_cfi);\n    return cfi.toRange(this.document, ignoreClass);\n  }\n  /**\n   * Get an EpubCFI from a Dom Range\n   * @param {Range} range\n   * @param {string} [ignoreClass]\n   * @returns {EpubCFI} cfi\n   */\n\n\n  cfiFromRange(range, ignoreClass) {\n    return new _epubcfi.default(range, this.cfiBase, ignoreClass).toString();\n  }\n  /**\n   * Get an EpubCFI from a Dom node\n   * @param {node} node\n   * @param {string} [ignoreClass]\n   * @returns {EpubCFI} cfi\n   */\n\n\n  cfiFromNode(node, ignoreClass) {\n    return new _epubcfi.default(node, this.cfiBase, ignoreClass).toString();\n  } // TODO: find where this is used - remove?\n\n\n  map(layout) {\n    var map = new _mapping.default(layout);\n    return map.section();\n  }\n  /**\n   * Size the contents to a given width and height\n   * @param {number} [width]\n   * @param {number} [height]\n   */\n\n\n  size(width, height) {\n    var viewport = {\n      scale: 1.0,\n      scalable: \"no\"\n    };\n    this.layoutStyle(\"scrolling\");\n\n    if (width >= 0) {\n      this.width(width);\n      viewport.width = width;\n      this.css(\"padding\", \"0 \" + width / 12 + \"px\");\n    }\n\n    if (height >= 0) {\n      this.height(height);\n      viewport.height = height;\n    }\n\n    this.css(\"margin\", \"0\");\n    this.css(\"box-sizing\", \"border-box\");\n    this.viewport(viewport);\n  }\n  /**\n   * Apply columns to the contents for pagination\n   * @param {number} width\n   * @param {number} height\n   * @param {number} columnWidth\n   * @param {number} gap\n   */\n\n\n  columns(width, height, columnWidth, gap, dir) {\n    let COLUMN_AXIS = (0, _core.prefixed)(\"column-axis\");\n    let COLUMN_GAP = (0, _core.prefixed)(\"column-gap\");\n    let COLUMN_WIDTH = (0, _core.prefixed)(\"column-width\");\n    let COLUMN_FILL = (0, _core.prefixed)(\"column-fill\");\n    let writingMode = this.writingMode();\n    let axis = writingMode.indexOf(\"vertical\") === 0 ? \"vertical\" : \"horizontal\";\n    this.layoutStyle(\"paginated\");\n\n    if (dir === \"rtl\" && axis === \"horizontal\") {\n      this.direction(dir);\n    }\n\n    this.width(width);\n    this.height(height); // Deal with Mobile trying to scale to viewport\n\n    this.viewport({\n      width: width,\n      height: height,\n      scale: 1.0,\n      scalable: \"no\"\n    }); // TODO: inline-block needs more testing\n    // Fixes Safari column cut offs, but causes RTL issues\n    // this.css(\"display\", \"inline-block\");\n\n    this.css(\"overflow-y\", \"hidden\");\n    this.css(\"margin\", \"0\", true);\n\n    if (axis === \"vertical\") {\n      this.css(\"padding-top\", gap / 2 + \"px\", true);\n      this.css(\"padding-bottom\", gap / 2 + \"px\", true);\n      this.css(\"padding-left\", \"20px\");\n      this.css(\"padding-right\", \"20px\");\n      this.css(COLUMN_AXIS, \"vertical\");\n    } else {\n      this.css(\"padding-top\", \"20px\");\n      this.css(\"padding-bottom\", \"20px\");\n      this.css(\"padding-left\", gap / 2 + \"px\", true);\n      this.css(\"padding-right\", gap / 2 + \"px\", true);\n      this.css(COLUMN_AXIS, \"horizontal\");\n    }\n\n    this.css(\"box-sizing\", \"border-box\");\n    this.css(\"max-width\", \"inherit\");\n    this.css(COLUMN_FILL, \"auto\");\n    this.css(COLUMN_GAP, gap + \"px\");\n    this.css(COLUMN_WIDTH, columnWidth + \"px\"); // Fix glyph clipping in WebKit\n    // https://github.com/futurepress/epub.js/issues/983\n\n    this.css(\"-webkit-line-box-contain\", \"block glyphs replaced\");\n  }\n  /**\n   * Scale contents from center\n   * @param {number} scale\n   * @param {number} offsetX\n   * @param {number} offsetY\n   */\n\n\n  scaler(scale, offsetX, offsetY) {\n    var scaleStr = \"scale(\" + scale + \")\";\n    var translateStr = \"\"; // this.css(\"position\", \"absolute\"));\n\n    this.css(\"transform-origin\", \"top left\");\n\n    if (offsetX >= 0 || offsetY >= 0) {\n      translateStr = \" translate(\" + (offsetX || 0) + \"px, \" + (offsetY || 0) + \"px )\";\n    }\n\n    this.css(\"transform\", scaleStr + translateStr);\n  }\n  /**\n   * Fit contents into a fixed width and height\n   * @param {number} width\n   * @param {number} height\n   */\n\n\n  fit(width, height, section) {\n    var viewport = this.viewport();\n    var viewportWidth = parseInt(viewport.width);\n    var viewportHeight = parseInt(viewport.height);\n    var widthScale = width / viewportWidth;\n    var heightScale = height / viewportHeight;\n    var scale = widthScale < heightScale ? widthScale : heightScale; // the translate does not work as intended, elements can end up unaligned\n    // var offsetY = (height - (viewportHeight * scale)) / 2;\n    // var offsetX = 0;\n    // if (this.sectionIndex % 2 === 1) {\n    // \toffsetX = width - (viewportWidth * scale);\n    // }\n\n    this.layoutStyle(\"paginated\"); // scale needs width and height to be set\n\n    this.width(viewportWidth);\n    this.height(viewportHeight);\n    this.overflow(\"hidden\"); // Scale to the correct size\n\n    this.scaler(scale, 0, 0); // this.scaler(scale, offsetX > 0 ? offsetX : 0, offsetY);\n    // background images are not scaled by transform\n\n    this.css(\"background-size\", viewportWidth * scale + \"px \" + viewportHeight * scale + \"px\");\n    this.css(\"background-color\", \"transparent\");\n\n    if (section && section.properties.includes(\"page-spread-left\")) {\n      // set margin since scale is weird\n      var marginLeft = width - viewportWidth * scale;\n      this.css(\"margin-left\", marginLeft + \"px\");\n    }\n  }\n  /**\n   * Set the direction of the text\n   * @param {string} [dir=\"ltr\"] \"rtl\" | \"ltr\"\n   */\n\n\n  direction(dir) {\n    if (this.documentElement) {\n      this.documentElement.style[\"direction\"] = dir;\n    }\n  }\n\n  mapPage(cfiBase, layout, start, end, dev) {\n    var mapping = new _mapping.default(layout, dev);\n    return mapping.page(this, cfiBase, start, end);\n  }\n  /**\n   * Emit event when link in content is clicked\n   * @private\n   */\n\n\n  linksHandler() {\n    (0, _replacements.replaceLinks)(this.content, href => {\n      this.emit(_constants.EVENTS.CONTENTS.LINK_CLICKED, href);\n    });\n  }\n  /**\n   * Set the writingMode of the text\n   * @param {string} [mode=\"horizontal-tb\"] \"horizontal-tb\" | \"vertical-rl\" | \"vertical-lr\"\n   */\n\n\n  writingMode(mode) {\n    let WRITING_MODE = (0, _core.prefixed)(\"writing-mode\");\n\n    if (mode && this.documentElement) {\n      this.documentElement.style[WRITING_MODE] = mode;\n    }\n\n    return this.window.getComputedStyle(this.documentElement)[WRITING_MODE] || '';\n  }\n  /**\n   * Set the layoutStyle of the content\n   * @param {string} [style=\"paginated\"] \"scrolling\" | \"paginated\"\n   * @private\n   */\n\n\n  layoutStyle(style) {\n    if (style) {\n      this._layoutStyle = style;\n      navigator.epubReadingSystem.layoutStyle = this._layoutStyle;\n    }\n\n    return this._layoutStyle || \"paginated\";\n  }\n  /**\n   * Add the epubReadingSystem object to the navigator\n   * @param {string} name\n   * @param {string} version\n   * @private\n   */\n\n\n  epubReadingSystem(name, version) {\n    navigator.epubReadingSystem = {\n      name: name,\n      version: version,\n      layoutStyle: this.layoutStyle(),\n      hasFeature: function (feature) {\n        switch (feature) {\n          case \"dom-manipulation\":\n            return true;\n\n          case \"layout-changes\":\n            return true;\n\n          case \"touch-events\":\n            return true;\n\n          case \"mouse-events\":\n            return true;\n\n          case \"keyboard-events\":\n            return true;\n\n          case \"spine-scripting\":\n            return false;\n\n          default:\n            return false;\n        }\n      }\n    };\n    return navigator.epubReadingSystem;\n  }\n\n  destroy() {\n    // this.document.removeEventListener('transitionend', this._resizeCheck);\n    this.removeListeners();\n  }\n\n}\n\n(0, _eventEmitter.default)(Contents.prototype);\nvar _default = Contents;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _constants = require(\"./utils/constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n\t* Handles managing adding & removing Annotations\n\t* @param {Rendition} rendition\n\t* @class\n\t*/\nclass Annotations {\n  constructor(rendition) {\n    this.rendition = rendition;\n    this.highlights = [];\n    this.underlines = [];\n    this.marks = [];\n    this._annotations = {};\n    this._annotationsBySectionIndex = {};\n    this.rendition.hooks.render.register(this.inject.bind(this));\n    this.rendition.hooks.unloaded.register(this.clear.bind(this));\n  }\n  /**\n   * Add an annotation to store\n   * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n   * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n   * @param {object} data Data to assign to annotation\n   * @param {function} [cb] Callback after annotation is added\n   * @param {string} className CSS class to assign to annotation\n   * @param {object} styles CSS styles to assign to annotation\n   * @returns {Annotation} annotation\n   */\n\n\n  add(type, cfiRange, data, cb, className, styles) {\n    let hash = encodeURI(cfiRange + type);\n    let cfi = new _epubcfi.default(cfiRange);\n    let sectionIndex = cfi.spinePos;\n    let annotation = new Annotation({\n      type,\n      cfiRange,\n      data,\n      sectionIndex,\n      cb,\n      className,\n      styles\n    });\n    this._annotations[hash] = annotation;\n\n    if (sectionIndex in this._annotationsBySectionIndex) {\n      this._annotationsBySectionIndex[sectionIndex].push(hash);\n    } else {\n      this._annotationsBySectionIndex[sectionIndex] = [hash];\n    }\n\n    let views = this.rendition.views();\n    views.forEach(view => {\n      if (annotation.sectionIndex === view.index) {\n        annotation.attach(view);\n      }\n    });\n    return annotation;\n  }\n  /**\n   * Remove an annotation from store\n   * @param {EpubCFI} cfiRange EpubCFI range the annotation is attached to\n   * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n   */\n\n\n  remove(cfiRange, type) {\n    let hash = encodeURI(cfiRange + type);\n\n    if (hash in this._annotations) {\n      let annotation = this._annotations[hash];\n\n      if (type && annotation.type !== type) {\n        return;\n      }\n\n      let views = this.rendition.views();\n      views.forEach(view => {\n        this._removeFromAnnotationBySectionIndex(annotation.sectionIndex, hash);\n\n        if (annotation.sectionIndex === view.index) {\n          annotation.detach(view);\n        }\n      });\n      delete this._annotations[hash];\n    }\n  }\n  /**\n   * Remove an annotations by Section Index\n   * @private\n   */\n\n\n  _removeFromAnnotationBySectionIndex(sectionIndex, hash) {\n    this._annotationsBySectionIndex[sectionIndex] = this._annotationsAt(sectionIndex).filter(h => h !== hash);\n  }\n  /**\n   * Get annotations by Section Index\n   * @private\n   */\n\n\n  _annotationsAt(index) {\n    return this._annotationsBySectionIndex[index];\n  }\n  /**\n   * Add a highlight to the store\n   * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n   * @param {object} data Data to assign to annotation\n   * @param {function} cb Callback after annotation is clicked\n   * @param {string} className CSS class to assign to annotation\n   * @param {object} styles CSS styles to assign to annotation\n   */\n\n\n  highlight(cfiRange, data, cb, className, styles) {\n    return this.add(\"highlight\", cfiRange, data, cb, className, styles);\n  }\n  /**\n   * Add a underline to the store\n   * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n   * @param {object} data Data to assign to annotation\n   * @param {function} cb Callback after annotation is clicked\n   * @param {string} className CSS class to assign to annotation\n   * @param {object} styles CSS styles to assign to annotation\n   */\n\n\n  underline(cfiRange, data, cb, className, styles) {\n    return this.add(\"underline\", cfiRange, data, cb, className, styles);\n  }\n  /**\n   * Add a mark to the store\n   * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n   * @param {object} data Data to assign to annotation\n   * @param {function} cb Callback after annotation is clicked\n   */\n\n\n  mark(cfiRange, data, cb) {\n    return this.add(\"mark\", cfiRange, data, cb);\n  }\n  /**\n   * iterate over annotations in the store\n   */\n\n\n  each() {\n    return this._annotations.forEach.apply(this._annotations, arguments);\n  }\n  /**\n   * Hook for injecting annotation into a view\n   * @param {View} view\n   * @private\n   */\n\n\n  inject(view) {\n    let sectionIndex = view.index;\n\n    if (sectionIndex in this._annotationsBySectionIndex) {\n      let annotations = this._annotationsBySectionIndex[sectionIndex];\n      annotations.forEach(hash => {\n        let annotation = this._annotations[hash];\n        annotation.attach(view);\n      });\n    }\n  }\n  /**\n   * Hook for removing annotation from a view\n   * @param {View} view\n   * @private\n   */\n\n\n  clear(view) {\n    let sectionIndex = view.index;\n\n    if (sectionIndex in this._annotationsBySectionIndex) {\n      let annotations = this._annotationsBySectionIndex[sectionIndex];\n      annotations.forEach(hash => {\n        let annotation = this._annotations[hash];\n        annotation.detach(view);\n      });\n    }\n  }\n  /**\n   * [Not Implemented] Show annotations\n   * @TODO: needs implementation in View\n   */\n\n\n  show() {}\n  /**\n   * [Not Implemented] Hide annotations\n   * @TODO: needs implementation in View\n   */\n\n\n  hide() {}\n\n}\n/**\n * Annotation object\n * @class\n * @param {object} options\n * @param {string} options.type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n * @param {EpubCFI} options.cfiRange EpubCFI range to attach annotation to\n * @param {object} options.data Data to assign to annotation\n * @param {int} options.sectionIndex Index in the Spine of the Section annotation belongs to\n * @param {function} [options.cb] Callback after annotation is clicked\n * @param {string} className CSS class to assign to annotation\n * @param {object} styles CSS styles to assign to annotation\n * @returns {Annotation} annotation\n */\n\n\nclass Annotation {\n  constructor({\n    type,\n    cfiRange,\n    data,\n    sectionIndex,\n    cb,\n    className,\n    styles\n  }) {\n    this.type = type;\n    this.cfiRange = cfiRange;\n    this.data = data;\n    this.sectionIndex = sectionIndex;\n    this.mark = undefined;\n    this.cb = cb;\n    this.className = className;\n    this.styles = styles;\n  }\n  /**\n   * Update stored data\n   * @param {object} data\n   */\n\n\n  update(data) {\n    this.data = data;\n  }\n  /**\n   * Add to a view\n   * @param {View} view\n   */\n\n\n  attach(view) {\n    let {\n      cfiRange,\n      data,\n      type,\n      mark,\n      cb,\n      className,\n      styles\n    } = this;\n    let result;\n\n    if (type === \"highlight\") {\n      result = view.highlight(cfiRange, data, cb, className, styles);\n    } else if (type === \"underline\") {\n      result = view.underline(cfiRange, data, cb, className, styles);\n    } else if (type === \"mark\") {\n      result = view.mark(cfiRange, data, cb);\n    }\n\n    this.mark = result;\n    this.emit(_constants.EVENTS.ANNOTATION.ATTACH, result);\n    return result;\n  }\n  /**\n   * Remove from a view\n   * @param {View} view\n   */\n\n\n  detach(view) {\n    let {\n      cfiRange,\n      type\n    } = this;\n    let result;\n\n    if (view) {\n      if (type === \"highlight\") {\n        result = view.unhighlight(cfiRange);\n      } else if (type === \"underline\") {\n        result = view.ununderline(cfiRange);\n      } else if (type === \"mark\") {\n        result = view.unmark(cfiRange);\n      }\n    }\n\n    this.mark = undefined;\n    this.emit(_constants.EVENTS.ANNOTATION.DETACH, result);\n    return result;\n  }\n  /**\n   * [Not Implemented] Get text of an annotation\n   * @TODO: needs implementation in contents\n   */\n\n\n  text() {}\n\n}\n\n(0, _eventEmitter.default)(Annotation.prototype);\nvar _default = Annotations;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _core = require(\"../../utils/core\");\n\nvar _epubcfi = _interopRequireDefault(require(\"../../epubcfi\"));\n\nvar _contents = _interopRequireDefault(require(\"../../contents\"));\n\nvar _constants = require(\"../../utils/constants\");\n\nvar _marksPane = require(\"marks-pane\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass IframeView {\n  constructor(section, options) {\n    this.settings = (0, _core.extend)({\n      ignoreClass: \"\",\n      axis: undefined,\n      //options.layout && options.layout.props.flow === \"scrolled\" ? \"vertical\" : \"horizontal\",\n      direction: undefined,\n      width: 0,\n      height: 0,\n      layout: undefined,\n      globalLayoutProperties: {},\n      method: undefined,\n      forceRight: false,\n      allowScriptedContent: false,\n      allowPopups: false\n    }, options || {});\n    this.id = \"epubjs-view-\" + (0, _core.uuid)();\n    this.section = section;\n    this.index = section.index;\n    this.element = this.container(this.settings.axis);\n    this.added = false;\n    this.displayed = false;\n    this.rendered = false; // this.width  = this.settings.width;\n    // this.height = this.settings.height;\n\n    this.fixedWidth = 0;\n    this.fixedHeight = 0; // Blank Cfi for Parsing\n\n    this.epubcfi = new _epubcfi.default();\n    this.layout = this.settings.layout; // Dom events to listen for\n    // this.listenedEvents = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\"];\n\n    this.pane = undefined;\n    this.highlights = {};\n    this.underlines = {};\n    this.marks = {};\n  }\n\n  container(axis) {\n    var element = document.createElement(\"div\");\n    element.classList.add(\"epub-view\"); // this.element.style.minHeight = \"100px\";\n\n    element.style.height = \"0px\";\n    element.style.width = \"0px\";\n    element.style.overflow = \"hidden\";\n    element.style.position = \"relative\";\n    element.style.display = \"block\";\n\n    if (axis && axis == \"horizontal\") {\n      element.style.flex = \"none\";\n    } else {\n      element.style.flex = \"initial\";\n    }\n\n    return element;\n  }\n\n  create() {\n    if (this.iframe) {\n      return this.iframe;\n    }\n\n    if (!this.element) {\n      this.element = this.createContainer();\n    }\n\n    this.iframe = document.createElement(\"iframe\");\n    this.iframe.id = this.id;\n    this.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n\n    this.iframe.style.overflow = \"hidden\";\n    this.iframe.seamless = \"seamless\"; // Back up if seamless isn't supported\n\n    this.iframe.style.border = \"none\"; // sandbox\n\n    this.iframe.sandbox = \"allow-same-origin\";\n\n    if (this.settings.allowScriptedContent) {\n      this.iframe.sandbox += \" allow-scripts\";\n    }\n\n    if (this.settings.allowPopups) {\n      this.iframe.sandbox += \" allow-popups\";\n    }\n\n    this.iframe.setAttribute(\"enable-annotation\", \"true\");\n    this.resizing = true; // this.iframe.style.display = \"none\";\n\n    this.element.style.visibility = \"hidden\";\n    this.iframe.style.visibility = \"hidden\";\n    this.iframe.style.width = \"0\";\n    this.iframe.style.height = \"0\";\n    this._width = 0;\n    this._height = 0;\n    this.element.setAttribute(\"ref\", this.index);\n    this.added = true;\n    this.elementBounds = (0, _core.bounds)(this.element); // if(width || height){\n    //   this.resize(width, height);\n    // } else if(this.width && this.height){\n    //   this.resize(this.width, this.height);\n    // } else {\n    //   this.iframeBounds = bounds(this.iframe);\n    // }\n\n    if (\"srcdoc\" in this.iframe) {\n      this.supportsSrcdoc = true;\n    } else {\n      this.supportsSrcdoc = false;\n    }\n\n    if (!this.settings.method) {\n      this.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n    }\n\n    return this.iframe;\n  }\n\n  render(request, show) {\n    // view.onLayout = this.layout.format.bind(this.layout);\n    this.create(); // Fit to size of the container, apply padding\n\n    this.size();\n\n    if (!this.sectionRender) {\n      this.sectionRender = this.section.render(request);\n    } // Render Chain\n\n\n    return this.sectionRender.then(function (contents) {\n      return this.load(contents);\n    }.bind(this)).then(function () {\n      // find and report the writingMode axis\n      let writingMode = this.contents.writingMode(); // Set the axis based on the flow and writing mode\n\n      let axis;\n\n      if (this.settings.flow === \"scrolled\") {\n        axis = writingMode.indexOf(\"vertical\") === 0 ? \"horizontal\" : \"vertical\";\n      } else {\n        axis = writingMode.indexOf(\"vertical\") === 0 ? \"vertical\" : \"horizontal\";\n      }\n\n      if (writingMode.indexOf(\"vertical\") === 0 && this.settings.flow === \"paginated\") {\n        this.layout.delta = this.layout.height;\n      }\n\n      this.setAxis(axis);\n      this.emit(_constants.EVENTS.VIEWS.AXIS, axis);\n      this.setWritingMode(writingMode);\n      this.emit(_constants.EVENTS.VIEWS.WRITING_MODE, writingMode); // apply the layout function to the contents\n\n      this.layout.format(this.contents, this.section, this.axis); // Listen for events that require an expansion of the iframe\n\n      this.addListeners();\n      return new Promise((resolve, reject) => {\n        // Expand the iframe to the full size of the content\n        this.expand();\n\n        if (this.settings.forceRight) {\n          this.element.style.marginLeft = this.width() + \"px\";\n        }\n\n        resolve();\n      });\n    }.bind(this), function (e) {\n      this.emit(_constants.EVENTS.VIEWS.LOAD_ERROR, e);\n      return new Promise((resolve, reject) => {\n        reject(e);\n      });\n    }.bind(this)).then(function () {\n      this.emit(_constants.EVENTS.VIEWS.RENDERED, this.section);\n    }.bind(this));\n  }\n\n  reset() {\n    if (this.iframe) {\n      this.iframe.style.width = \"0\";\n      this.iframe.style.height = \"0\";\n      this._width = 0;\n      this._height = 0;\n      this._textWidth = undefined;\n      this._contentWidth = undefined;\n      this._textHeight = undefined;\n      this._contentHeight = undefined;\n    }\n\n    this._needsReframe = true;\n  } // Determine locks base on settings\n\n\n  size(_width, _height) {\n    var width = _width || this.settings.width;\n    var height = _height || this.settings.height;\n\n    if (this.layout.name === \"pre-paginated\") {\n      this.lock(\"both\", width, height);\n    } else if (this.settings.axis === \"horizontal\") {\n      this.lock(\"height\", width, height);\n    } else {\n      this.lock(\"width\", width, height);\n    }\n\n    this.settings.width = width;\n    this.settings.height = height;\n  } // Lock an axis to element dimensions, taking borders into account\n\n\n  lock(what, width, height) {\n    var elBorders = (0, _core.borders)(this.element);\n    var iframeBorders;\n\n    if (this.iframe) {\n      iframeBorders = (0, _core.borders)(this.iframe);\n    } else {\n      iframeBorders = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (what == \"width\" && (0, _core.isNumber)(width)) {\n      this.lockedWidth = width - elBorders.width - iframeBorders.width; // this.resize(this.lockedWidth, width); //  width keeps ratio correct\n    }\n\n    if (what == \"height\" && (0, _core.isNumber)(height)) {\n      this.lockedHeight = height - elBorders.height - iframeBorders.height; // this.resize(width, this.lockedHeight);\n    }\n\n    if (what === \"both\" && (0, _core.isNumber)(width) && (0, _core.isNumber)(height)) {\n      this.lockedWidth = width - elBorders.width - iframeBorders.width;\n      this.lockedHeight = height - elBorders.height - iframeBorders.height; // this.resize(this.lockedWidth, this.lockedHeight);\n    }\n\n    if (this.displayed && this.iframe) {\n      // this.contents.layout();\n      this.expand();\n    }\n  } // Resize a single axis based on content dimensions\n\n\n  expand(force) {\n    var width = this.lockedWidth;\n    var height = this.lockedHeight;\n    var columns;\n    var textWidth, textHeight;\n    if (!this.iframe || this._expanding) return;\n    this._expanding = true;\n\n    if (this.layout.name === \"pre-paginated\") {\n      width = this.layout.columnWidth;\n      height = this.layout.height;\n    } // Expand Horizontally\n    else if (this.settings.axis === \"horizontal\") {\n      // Get the width of the text\n      width = this.contents.textWidth();\n\n      if (width % this.layout.pageWidth > 0) {\n        width = Math.ceil(width / this.layout.pageWidth) * this.layout.pageWidth;\n      }\n\n      if (this.settings.forceEvenPages) {\n        columns = width / this.layout.pageWidth;\n\n        if (this.layout.divisor > 1 && this.layout.name === \"reflowable\" && columns % 2 > 0) {\n          // add a blank page\n          width += this.layout.pageWidth;\n        }\n      }\n    } // Expand Vertically\n    else if (this.settings.axis === \"vertical\") {\n      height = this.contents.textHeight();\n\n      if (this.settings.flow === \"paginated\" && height % this.layout.height > 0) {\n        height = Math.ceil(height / this.layout.height) * this.layout.height;\n      }\n    } // Only Resize if dimensions have changed or\n    // if Frame is still hidden, so needs reframing\n\n\n    if (this._needsReframe || width != this._width || height != this._height) {\n      this.reframe(width, height);\n    }\n\n    this._expanding = false;\n  }\n\n  reframe(width, height) {\n    var size;\n\n    if ((0, _core.isNumber)(width)) {\n      this.element.style.width = width + \"px\";\n      this.iframe.style.width = width + \"px\";\n      this._width = width;\n    }\n\n    if ((0, _core.isNumber)(height)) {\n      this.element.style.height = height + \"px\";\n      this.iframe.style.height = height + \"px\";\n      this._height = height;\n    }\n\n    let widthDelta = this.prevBounds ? width - this.prevBounds.width : width;\n    let heightDelta = this.prevBounds ? height - this.prevBounds.height : height;\n    size = {\n      width: width,\n      height: height,\n      widthDelta: widthDelta,\n      heightDelta: heightDelta\n    };\n    this.pane && this.pane.render();\n    requestAnimationFrame(() => {\n      let mark;\n\n      for (let m in this.marks) {\n        if (this.marks.hasOwnProperty(m)) {\n          mark = this.marks[m];\n          this.placeMark(mark.element, mark.range);\n        }\n      }\n    });\n    this.onResize(this, size);\n    this.emit(_constants.EVENTS.VIEWS.RESIZED, size);\n    this.prevBounds = size;\n    this.elementBounds = (0, _core.bounds)(this.element);\n  }\n\n  load(contents) {\n    var loading = new _core.defer();\n    var loaded = loading.promise;\n\n    if (!this.iframe) {\n      loading.reject(new Error(\"No Iframe Available\"));\n      return loaded;\n    }\n\n    this.iframe.onload = function (event) {\n      this.onLoad(event, loading);\n    }.bind(this);\n\n    if (this.settings.method === \"blobUrl\") {\n      this.blobUrl = (0, _core.createBlobUrl)(contents, \"application/xhtml+xml\");\n      this.iframe.src = this.blobUrl;\n      this.element.appendChild(this.iframe);\n    } else if (this.settings.method === \"srcdoc\") {\n      this.iframe.srcdoc = contents;\n      this.element.appendChild(this.iframe);\n    } else {\n      this.element.appendChild(this.iframe);\n      this.document = this.iframe.contentDocument;\n\n      if (!this.document) {\n        loading.reject(new Error(\"No Document Available\"));\n        return loaded;\n      }\n\n      this.iframe.contentDocument.open(); // For Cordova windows platform\n\n      if (window.MSApp && MSApp.execUnsafeLocalFunction) {\n        var outerThis = this;\n        MSApp.execUnsafeLocalFunction(function () {\n          outerThis.iframe.contentDocument.write(contents);\n        });\n      } else {\n        this.iframe.contentDocument.write(contents);\n      }\n\n      this.iframe.contentDocument.close();\n    }\n\n    return loaded;\n  }\n\n  onLoad(event, promise) {\n    this.window = this.iframe.contentWindow;\n    this.document = this.iframe.contentDocument;\n    this.contents = new _contents.default(this.document, this.document.body, this.section.cfiBase, this.section.index);\n    this.rendering = false;\n    var link = this.document.querySelector(\"link[rel='canonical']\");\n\n    if (link) {\n      link.setAttribute(\"href\", this.section.canonical);\n    } else {\n      link = this.document.createElement(\"link\");\n      link.setAttribute(\"rel\", \"canonical\");\n      link.setAttribute(\"href\", this.section.canonical);\n      this.document.querySelector(\"head\").appendChild(link);\n    }\n\n    this.contents.on(_constants.EVENTS.CONTENTS.EXPAND, () => {\n      if (this.displayed && this.iframe) {\n        this.expand();\n\n        if (this.contents) {\n          this.layout.format(this.contents);\n        }\n      }\n    });\n    this.contents.on(_constants.EVENTS.CONTENTS.RESIZE, e => {\n      if (this.displayed && this.iframe) {\n        this.expand();\n\n        if (this.contents) {\n          this.layout.format(this.contents);\n        }\n      }\n    });\n    promise.resolve(this.contents);\n  }\n\n  setLayout(layout) {\n    this.layout = layout;\n\n    if (this.contents) {\n      this.layout.format(this.contents);\n      this.expand();\n    }\n  }\n\n  setAxis(axis) {\n    this.settings.axis = axis;\n\n    if (axis == \"horizontal\") {\n      this.element.style.flex = \"none\";\n    } else {\n      this.element.style.flex = \"initial\";\n    }\n\n    this.size();\n  }\n\n  setWritingMode(mode) {\n    // this.element.style.writingMode = writingMode;\n    this.writingMode = mode;\n  }\n\n  addListeners() {//TODO: Add content listeners for expanding\n  }\n\n  removeListeners(layoutFunc) {//TODO: remove content listeners for expanding\n  }\n\n  display(request) {\n    var displayed = new _core.defer();\n\n    if (!this.displayed) {\n      this.render(request).then(function () {\n        this.emit(_constants.EVENTS.VIEWS.DISPLAYED, this);\n        this.onDisplayed(this);\n        this.displayed = true;\n        displayed.resolve(this);\n      }.bind(this), function (err) {\n        displayed.reject(err, this);\n      });\n    } else {\n      displayed.resolve(this);\n    }\n\n    return displayed.promise;\n  }\n\n  show() {\n    this.element.style.visibility = \"visible\";\n\n    if (this.iframe) {\n      this.iframe.style.visibility = \"visible\"; // Remind Safari to redraw the iframe\n\n      this.iframe.style.transform = \"translateZ(0)\";\n      this.iframe.offsetWidth;\n      this.iframe.style.transform = null;\n    }\n\n    this.emit(_constants.EVENTS.VIEWS.SHOWN, this);\n  }\n\n  hide() {\n    // this.iframe.style.display = \"none\";\n    this.element.style.visibility = \"hidden\";\n    this.iframe.style.visibility = \"hidden\";\n    this.stopExpanding = true;\n    this.emit(_constants.EVENTS.VIEWS.HIDDEN, this);\n  }\n\n  offset() {\n    return {\n      top: this.element.offsetTop,\n      left: this.element.offsetLeft\n    };\n  }\n\n  width() {\n    return this._width;\n  }\n\n  height() {\n    return this._height;\n  }\n\n  position() {\n    return this.element.getBoundingClientRect();\n  }\n\n  locationOf(target) {\n    var parentPos = this.iframe.getBoundingClientRect();\n    var targetPos = this.contents.locationOf(target, this.settings.ignoreClass);\n    return {\n      \"left\": targetPos.left,\n      \"top\": targetPos.top\n    };\n  }\n\n  onDisplayed(view) {// Stub, override with a custom functions\n  }\n\n  onResize(view, e) {// Stub, override with a custom functions\n  }\n\n  bounds(force) {\n    if (force || !this.elementBounds) {\n      this.elementBounds = (0, _core.bounds)(this.element);\n    }\n\n    return this.elementBounds;\n  }\n\n  highlight(cfiRange, data = {}, cb, className = \"epubjs-hl\", styles = {}) {\n    if (!this.contents) {\n      return;\n    }\n\n    const attributes = Object.assign({\n      \"fill\": \"yellow\",\n      \"fill-opacity\": \"0.3\",\n      \"mix-blend-mode\": \"multiply\"\n    }, styles);\n    let range = this.contents.range(cfiRange);\n\n    let emitter = () => {\n      this.emit(_constants.EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n    };\n\n    data[\"epubcfi\"] = cfiRange;\n\n    if (!this.pane) {\n      this.pane = new _marksPane.Pane(this.iframe, this.element);\n    }\n\n    let m = new _marksPane.Highlight(range, className, data, attributes);\n    let h = this.pane.addMark(m);\n    this.highlights[cfiRange] = {\n      \"mark\": h,\n      \"element\": h.element,\n      \"listeners\": [emitter, cb]\n    };\n    h.element.setAttribute(\"ref\", className);\n    h.element.addEventListener(\"click\", emitter);\n    h.element.addEventListener(\"touchstart\", emitter);\n\n    if (cb) {\n      h.element.addEventListener(\"click\", cb);\n      h.element.addEventListener(\"touchstart\", cb);\n    }\n\n    return h;\n  }\n\n  underline(cfiRange, data = {}, cb, className = \"epubjs-ul\", styles = {}) {\n    if (!this.contents) {\n      return;\n    }\n\n    const attributes = Object.assign({\n      \"stroke\": \"black\",\n      \"stroke-opacity\": \"0.3\",\n      \"mix-blend-mode\": \"multiply\"\n    }, styles);\n    let range = this.contents.range(cfiRange);\n\n    let emitter = () => {\n      this.emit(_constants.EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n    };\n\n    data[\"epubcfi\"] = cfiRange;\n\n    if (!this.pane) {\n      this.pane = new _marksPane.Pane(this.iframe, this.element);\n    }\n\n    let m = new _marksPane.Underline(range, className, data, attributes);\n    let h = this.pane.addMark(m);\n    this.underlines[cfiRange] = {\n      \"mark\": h,\n      \"element\": h.element,\n      \"listeners\": [emitter, cb]\n    };\n    h.element.setAttribute(\"ref\", className);\n    h.element.addEventListener(\"click\", emitter);\n    h.element.addEventListener(\"touchstart\", emitter);\n\n    if (cb) {\n      h.element.addEventListener(\"click\", cb);\n      h.element.addEventListener(\"touchstart\", cb);\n    }\n\n    return h;\n  }\n\n  mark(cfiRange, data = {}, cb) {\n    if (!this.contents) {\n      return;\n    }\n\n    if (cfiRange in this.marks) {\n      let item = this.marks[cfiRange];\n      return item;\n    }\n\n    let range = this.contents.range(cfiRange);\n\n    if (!range) {\n      return;\n    }\n\n    let container = range.commonAncestorContainer;\n    let parent = container.nodeType === 1 ? container : container.parentNode;\n\n    let emitter = e => {\n      this.emit(_constants.EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n    };\n\n    if (range.collapsed && container.nodeType === 1) {\n      range = new Range();\n      range.selectNodeContents(container);\n    } else if (range.collapsed) {\n      // Webkit doesn't like collapsed ranges\n      range = new Range();\n      range.selectNodeContents(parent);\n    }\n\n    let mark = this.document.createElement(\"a\");\n    mark.setAttribute(\"ref\", \"epubjs-mk\");\n    mark.style.position = \"absolute\";\n    mark.dataset[\"epubcfi\"] = cfiRange;\n\n    if (data) {\n      Object.keys(data).forEach(key => {\n        mark.dataset[key] = data[key];\n      });\n    }\n\n    if (cb) {\n      mark.addEventListener(\"click\", cb);\n      mark.addEventListener(\"touchstart\", cb);\n    }\n\n    mark.addEventListener(\"click\", emitter);\n    mark.addEventListener(\"touchstart\", emitter);\n    this.placeMark(mark, range);\n    this.element.appendChild(mark);\n    this.marks[cfiRange] = {\n      \"element\": mark,\n      \"range\": range,\n      \"listeners\": [emitter, cb]\n    };\n    return parent;\n  }\n\n  placeMark(element, range) {\n    let top, right, left;\n\n    if (this.layout.name === \"pre-paginated\" || this.settings.axis !== \"horizontal\") {\n      let pos = range.getBoundingClientRect();\n      top = pos.top;\n      right = pos.right;\n    } else {\n      // Element might break columns, so find the left most element\n      let rects = range.getClientRects();\n      let rect;\n\n      for (var i = 0; i != rects.length; i++) {\n        rect = rects[i];\n\n        if (!left || rect.left < left) {\n          left = rect.left; // right = rect.right;\n\n          right = Math.ceil(left / this.layout.props.pageWidth) * this.layout.props.pageWidth - this.layout.gap / 2;\n          top = rect.top;\n        }\n      }\n    }\n\n    element.style.top = `${top}px`;\n    element.style.left = `${right}px`;\n  }\n\n  unhighlight(cfiRange) {\n    let item;\n\n    if (cfiRange in this.highlights) {\n      item = this.highlights[cfiRange];\n      this.pane.removeMark(item.mark);\n      item.listeners.forEach(l => {\n        if (l) {\n          item.element.removeEventListener(\"click\", l);\n          item.element.removeEventListener(\"touchstart\", l);\n        }\n\n        ;\n      });\n      delete this.highlights[cfiRange];\n    }\n  }\n\n  ununderline(cfiRange) {\n    let item;\n\n    if (cfiRange in this.underlines) {\n      item = this.underlines[cfiRange];\n      this.pane.removeMark(item.mark);\n      item.listeners.forEach(l => {\n        if (l) {\n          item.element.removeEventListener(\"click\", l);\n          item.element.removeEventListener(\"touchstart\", l);\n        }\n\n        ;\n      });\n      delete this.underlines[cfiRange];\n    }\n  }\n\n  unmark(cfiRange) {\n    let item;\n\n    if (cfiRange in this.marks) {\n      item = this.marks[cfiRange];\n      this.element.removeChild(item.element);\n      item.listeners.forEach(l => {\n        if (l) {\n          item.element.removeEventListener(\"click\", l);\n          item.element.removeEventListener(\"touchstart\", l);\n        }\n\n        ;\n      });\n      delete this.marks[cfiRange];\n    }\n  }\n\n  destroy() {\n    for (let cfiRange in this.highlights) {\n      this.unhighlight(cfiRange);\n    }\n\n    for (let cfiRange in this.underlines) {\n      this.ununderline(cfiRange);\n    }\n\n    for (let cfiRange in this.marks) {\n      this.unmark(cfiRange);\n    }\n\n    if (this.blobUrl) {\n      (0, _core.revokeBlobUrl)(this.blobUrl);\n    }\n\n    if (this.displayed) {\n      this.displayed = false;\n      this.removeListeners();\n      this.contents.destroy();\n      this.stopExpanding = true;\n      this.element.removeChild(this.iframe);\n\n      if (this.pane) {\n        this.pane.element.remove();\n        this.pane = undefined;\n      }\n\n      this.iframe = undefined;\n      this.contents = undefined;\n      this._textWidth = null;\n      this._textHeight = null;\n      this._width = null;\n      this._height = null;\n    } // this.element.style.height = \"0px\";\n    // this.element.style.width = \"0px\";\n\n  }\n\n}\n\n(0, _eventEmitter.default)(IframeView.prototype);\nvar _default = IframeView;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createDefiner = createDefiner;\nexports.default = scrollType;\n\n// Detect RTL scroll type\n// Based on https://github.com/othree/jquery.rtl-scroll-type/blob/master/src/jquery.rtl-scroll.js\nfunction scrollType() {\n  var type = \"reverse\";\n  var definer = createDefiner();\n  document.body.appendChild(definer);\n\n  if (definer.scrollLeft > 0) {\n    type = \"default\";\n  } else {\n    if (typeof Element !== 'undefined' && Element.prototype.scrollIntoView) {\n      definer.children[0].children[1].scrollIntoView();\n\n      if (definer.scrollLeft < 0) {\n        type = \"negative\";\n      }\n    } else {\n      definer.scrollLeft = 1;\n\n      if (definer.scrollLeft === 0) {\n        type = \"negative\";\n      }\n    }\n  }\n\n  document.body.removeChild(definer);\n  return type;\n}\n\nfunction createDefiner() {\n  var definer = document.createElement('div');\n  definer.dir = \"rtl\";\n  definer.style.position = \"fixed\";\n  definer.style.width = \"1px\";\n  definer.style.height = \"1px\";\n  definer.style.top = \"0px\";\n  definer.style.left = \"0px\";\n  definer.style.overflow = \"hidden\";\n  var innerDiv = document.createElement('div');\n  innerDiv.style.width = \"2px\";\n  var spanA = document.createElement('span');\n  spanA.style.width = \"1px\";\n  spanA.style.display = \"inline-block\";\n  var spanB = document.createElement('span');\n  spanB.style.width = \"1px\";\n  spanB.style.display = \"inline-block\";\n  innerDiv.appendChild(spanA);\n  innerDiv.appendChild(spanB);\n  definer.appendChild(innerDiv);\n  return definer;\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"../../utils/core\");\n\nvar _throttle = _interopRequireDefault(require(\"lodash/throttle\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Stage {\n  constructor(_options) {\n    this.settings = _options || {};\n    this.id = \"epubjs-container-\" + (0, _core.uuid)();\n    this.container = this.create(this.settings);\n\n    if (this.settings.hidden) {\n      this.wrapper = this.wrap(this.container);\n    }\n  }\n  /*\n  * Creates an element to render to.\n  * Resizes to passed width and height or to the elements size\n  */\n\n\n  create(options) {\n    let height = options.height; // !== false ? options.height : \"100%\";\n\n    let width = options.width; // !== false ? options.width : \"100%\";\n\n    let overflow = options.overflow || false;\n    let axis = options.axis || \"vertical\";\n    let direction = options.direction;\n    (0, _core.extend)(this.settings, options);\n\n    if (options.height && (0, _core.isNumber)(options.height)) {\n      height = options.height + \"px\";\n    }\n\n    if (options.width && (0, _core.isNumber)(options.width)) {\n      width = options.width + \"px\";\n    } // Create new container element\n\n\n    let container = document.createElement(\"div\");\n    container.id = this.id;\n    container.classList.add(\"epub-container\"); // Style Element\n    // container.style.fontSize = \"0\";\n\n    container.style.wordSpacing = \"0\";\n    container.style.lineHeight = \"0\";\n    container.style.verticalAlign = \"top\";\n    container.style.position = \"relative\";\n\n    if (axis === \"horizontal\") {\n      // container.style.whiteSpace = \"nowrap\";\n      container.style.display = \"flex\";\n      container.style.flexDirection = \"row\";\n      container.style.flexWrap = \"nowrap\";\n    }\n\n    if (width) {\n      container.style.width = width;\n    }\n\n    if (height) {\n      container.style.height = height;\n    }\n\n    if (overflow) {\n      if (overflow === \"scroll\" && axis === \"vertical\") {\n        container.style[\"overflow-y\"] = overflow;\n        container.style[\"overflow-x\"] = \"hidden\";\n      } else if (overflow === \"scroll\" && axis === \"horizontal\") {\n        container.style[\"overflow-y\"] = \"hidden\";\n        container.style[\"overflow-x\"] = overflow;\n      } else {\n        container.style[\"overflow\"] = overflow;\n      }\n    }\n\n    if (direction) {\n      container.dir = direction;\n      container.style[\"direction\"] = direction;\n    }\n\n    if (direction && this.settings.fullsize) {\n      document.body.style[\"direction\"] = direction;\n    }\n\n    return container;\n  }\n\n  wrap(container) {\n    var wrapper = document.createElement(\"div\");\n    wrapper.style.visibility = \"hidden\";\n    wrapper.style.overflow = \"hidden\";\n    wrapper.style.width = \"0\";\n    wrapper.style.height = \"0\";\n    wrapper.appendChild(container);\n    return wrapper;\n  }\n\n  getElement(_element) {\n    var element;\n\n    if ((0, _core.isElement)(_element)) {\n      element = _element;\n    } else if (typeof _element === \"string\") {\n      element = document.getElementById(_element);\n    }\n\n    if (!element) {\n      throw new Error(\"Not an Element\");\n    }\n\n    return element;\n  }\n\n  attachTo(what) {\n    var element = this.getElement(what);\n    var base;\n\n    if (!element) {\n      return;\n    }\n\n    if (this.settings.hidden) {\n      base = this.wrapper;\n    } else {\n      base = this.container;\n    }\n\n    element.appendChild(base);\n    this.element = element;\n    return element;\n  }\n\n  getContainer() {\n    return this.container;\n  }\n\n  onResize(func) {\n    // Only listen to window for resize event if width and height are not fixed.\n    // This applies if it is set to a percent or auto.\n    if (!(0, _core.isNumber)(this.settings.width) || !(0, _core.isNumber)(this.settings.height)) {\n      this.resizeFunc = (0, _throttle.default)(func, 50);\n      window.addEventListener(\"resize\", this.resizeFunc, false);\n    }\n  }\n\n  onOrientationChange(func) {\n    this.orientationChangeFunc = func;\n    window.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n  }\n\n  size(width, height) {\n    var bounds;\n\n    let _width = width || this.settings.width;\n\n    let _height = height || this.settings.height; // If width or height are set to false, inherit them from containing element\n\n\n    if (width === null) {\n      bounds = this.element.getBoundingClientRect();\n\n      if (bounds.width) {\n        width = Math.floor(bounds.width);\n        this.container.style.width = width + \"px\";\n      }\n    } else {\n      if ((0, _core.isNumber)(width)) {\n        this.container.style.width = width + \"px\";\n      } else {\n        this.container.style.width = width;\n      }\n    }\n\n    if (height === null) {\n      bounds = bounds || this.element.getBoundingClientRect();\n\n      if (bounds.height) {\n        height = bounds.height;\n        this.container.style.height = height + \"px\";\n      }\n    } else {\n      if ((0, _core.isNumber)(height)) {\n        this.container.style.height = height + \"px\";\n      } else {\n        this.container.style.height = height;\n      }\n    }\n\n    if (!(0, _core.isNumber)(width)) {\n      width = this.container.clientWidth;\n    }\n\n    if (!(0, _core.isNumber)(height)) {\n      height = this.container.clientHeight;\n    }\n\n    this.containerStyles = window.getComputedStyle(this.container);\n    this.containerPadding = {\n      left: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n      right: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n      top: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n      bottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n    }; // Bounds not set, get them from window\n\n    let _windowBounds = (0, _core.windowBounds)();\n\n    let bodyStyles = window.getComputedStyle(document.body);\n    let bodyPadding = {\n      left: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n      right: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n      top: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n      bottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n    };\n\n    if (!_width) {\n      width = _windowBounds.width - bodyPadding.left - bodyPadding.right;\n    }\n\n    if (this.settings.fullsize && !_height || !_height) {\n      height = _windowBounds.height - bodyPadding.top - bodyPadding.bottom;\n    }\n\n    return {\n      width: width - this.containerPadding.left - this.containerPadding.right,\n      height: height - this.containerPadding.top - this.containerPadding.bottom\n    };\n  }\n\n  bounds() {\n    let box;\n\n    if (this.container.style.overflow !== \"visible\") {\n      box = this.container && this.container.getBoundingClientRect();\n    }\n\n    if (!box || !box.width || !box.height) {\n      return (0, _core.windowBounds)();\n    } else {\n      return box;\n    }\n  }\n\n  getSheet() {\n    var style = document.createElement(\"style\"); // WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n\n    style.appendChild(document.createTextNode(\"\"));\n    document.head.appendChild(style);\n    return style.sheet;\n  }\n\n  addStyleRules(selector, rulesArray) {\n    var scope = \"#\" + this.id + \" \";\n    var rules = \"\";\n\n    if (!this.sheet) {\n      this.sheet = this.getSheet();\n    }\n\n    rulesArray.forEach(function (set) {\n      for (var prop in set) {\n        if (set.hasOwnProperty(prop)) {\n          rules += prop + \":\" + set[prop] + \";\";\n        }\n      }\n    });\n    this.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n  }\n\n  axis(axis) {\n    if (axis === \"horizontal\") {\n      this.container.style.display = \"flex\";\n      this.container.style.flexDirection = \"row\";\n      this.container.style.flexWrap = \"nowrap\";\n    } else {\n      this.container.style.display = \"block\";\n    }\n\n    this.settings.axis = axis;\n  } // orientation(orientation) {\n  // \tif (orientation === \"landscape\") {\n  //\n  // \t} else {\n  //\n  // \t}\n  //\n  // \tthis.orientation = orientation;\n  // }\n\n\n  direction(dir) {\n    if (this.container) {\n      this.container.dir = dir;\n      this.container.style[\"direction\"] = dir;\n    }\n\n    if (this.settings.fullsize) {\n      document.body.style[\"direction\"] = dir;\n    }\n\n    this.settings.dir = dir;\n  }\n\n  overflow(overflow) {\n    if (this.container) {\n      if (overflow === \"scroll\" && this.settings.axis === \"vertical\") {\n        this.container.style[\"overflow-y\"] = overflow;\n        this.container.style[\"overflow-x\"] = \"hidden\";\n      } else if (overflow === \"scroll\" && this.settings.axis === \"horizontal\") {\n        this.container.style[\"overflow-y\"] = \"hidden\";\n        this.container.style[\"overflow-x\"] = overflow;\n      } else {\n        this.container.style[\"overflow\"] = overflow;\n      }\n    }\n\n    this.settings.overflow = overflow;\n  }\n\n  destroy() {\n    var base;\n\n    if (this.element) {\n      if (this.settings.hidden) {\n        base = this.wrapper;\n      } else {\n        base = this.container;\n      }\n\n      if (this.element.contains(this.container)) {\n        this.element.removeChild(this.container);\n      }\n\n      window.removeEventListener(\"resize\", this.resizeFunc);\n      window.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n    }\n  }\n\n}\n\nvar _default = Stage;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nclass Views {\n  constructor(container) {\n    this.container = container;\n    this._views = [];\n    this.length = 0;\n    this.hidden = false;\n  }\n\n  all() {\n    return this._views;\n  }\n\n  first() {\n    return this._views[0];\n  }\n\n  last() {\n    return this._views[this._views.length - 1];\n  }\n\n  indexOf(view) {\n    return this._views.indexOf(view);\n  }\n\n  slice() {\n    return this._views.slice.apply(this._views, arguments);\n  }\n\n  get(i) {\n    return this._views[i];\n  }\n\n  append(view) {\n    this._views.push(view);\n\n    if (this.container) {\n      this.container.appendChild(view.element);\n    }\n\n    this.length++;\n    return view;\n  }\n\n  prepend(view) {\n    this._views.unshift(view);\n\n    if (this.container) {\n      this.container.insertBefore(view.element, this.container.firstChild);\n    }\n\n    this.length++;\n    return view;\n  }\n\n  insert(view, index) {\n    this._views.splice(index, 0, view);\n\n    if (this.container) {\n      if (index < this.container.children.length) {\n        this.container.insertBefore(view.element, this.container.children[index]);\n      } else {\n        this.container.appendChild(view.element);\n      }\n    }\n\n    this.length++;\n    return view;\n  }\n\n  remove(view) {\n    var index = this._views.indexOf(view);\n\n    if (index > -1) {\n      this._views.splice(index, 1);\n    }\n\n    this.destroy(view);\n    this.length--;\n  }\n\n  destroy(view) {\n    if (view.displayed) {\n      view.destroy();\n    }\n\n    if (this.container) {\n      this.container.removeChild(view.element);\n    }\n\n    view = null;\n  } // Iterators\n\n\n  forEach() {\n    return this._views.forEach.apply(this._views, arguments);\n  }\n\n  clear() {\n    // Remove all views\n    var view;\n    var len = this.length;\n    if (!this.length) return;\n\n    for (var i = 0; i < len; i++) {\n      view = this._views[i];\n      this.destroy(view);\n    }\n\n    this._views = [];\n    this.length = 0;\n  }\n\n  find(section) {\n    var view;\n    var len = this.length;\n\n    for (var i = 0; i < len; i++) {\n      view = this._views[i];\n\n      if (view.displayed && view.section.index == section.index) {\n        return view;\n      }\n    }\n  }\n\n  displayed() {\n    var displayed = [];\n    var view;\n    var len = this.length;\n\n    for (var i = 0; i < len; i++) {\n      view = this._views[i];\n\n      if (view.displayed) {\n        displayed.push(view);\n      }\n    }\n\n    return displayed;\n  }\n\n  show() {\n    var view;\n    var len = this.length;\n\n    for (var i = 0; i < len; i++) {\n      view = this._views[i];\n\n      if (view.displayed) {\n        view.show();\n      }\n    }\n\n    this.hidden = false;\n  }\n\n  hide() {\n    var view;\n    var len = this.length;\n\n    for (var i = 0; i < len; i++) {\n      view = this._views[i];\n\n      if (view.displayed) {\n        view.hide();\n      }\n    }\n\n    this.hidden = true;\n  }\n\n}\n\nvar _default = Views;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _core = require(\"../../utils/core\");\n\nvar _scrolltype = _interopRequireDefault(require(\"../../utils/scrolltype\"));\n\nvar _mapping = _interopRequireDefault(require(\"../../mapping\"));\n\nvar _queue = _interopRequireDefault(require(\"../../utils/queue\"));\n\nvar _stage = _interopRequireDefault(require(\"../helpers/stage\"));\n\nvar _views = _interopRequireDefault(require(\"../helpers/views\"));\n\nvar _constants = require(\"../../utils/constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass DefaultViewManager {\n  constructor(options) {\n    this.name = \"default\";\n    this.optsSettings = options.settings;\n    this.View = options.view;\n    this.request = options.request;\n    this.renditionQueue = options.queue;\n    this.q = new _queue.default(this);\n    this.settings = (0, _core.extend)(this.settings || {}, {\n      infinite: true,\n      hidden: false,\n      width: undefined,\n      height: undefined,\n      axis: undefined,\n      writingMode: undefined,\n      flow: \"scrolled\",\n      ignoreClass: \"\",\n      fullsize: undefined,\n      allowScriptedContent: false,\n      allowPopups: false\n    });\n    (0, _core.extend)(this.settings, options.settings || {});\n    this.viewSettings = {\n      ignoreClass: this.settings.ignoreClass,\n      axis: this.settings.axis,\n      flow: this.settings.flow,\n      layout: this.layout,\n      method: this.settings.method,\n      // srcdoc, blobUrl, write\n      width: 0,\n      height: 0,\n      forceEvenPages: true,\n      allowScriptedContent: this.settings.allowScriptedContent,\n      allowPopups: this.settings.allowPopups\n    };\n    this.rendered = false;\n  }\n\n  render(element, size) {\n    let tag = element.tagName;\n\n    if (typeof this.settings.fullsize === \"undefined\" && tag && (tag.toLowerCase() == \"body\" || tag.toLowerCase() == \"html\")) {\n      this.settings.fullsize = true;\n    }\n\n    if (this.settings.fullsize) {\n      this.settings.overflow = \"visible\";\n      this.overflow = this.settings.overflow;\n    }\n\n    this.settings.size = size;\n    this.settings.rtlScrollType = (0, _scrolltype.default)(); // Save the stage\n\n    this.stage = new _stage.default({\n      width: size.width,\n      height: size.height,\n      overflow: this.overflow,\n      hidden: this.settings.hidden,\n      axis: this.settings.axis,\n      fullsize: this.settings.fullsize,\n      direction: this.settings.direction\n    });\n    this.stage.attachTo(element); // Get this stage container div\n\n    this.container = this.stage.getContainer(); // Views array methods\n\n    this.views = new _views.default(this.container); // Calculate Stage Size\n\n    this._bounds = this.bounds();\n    this._stageSize = this.stage.size(); // Set the dimensions for views\n\n    this.viewSettings.width = this._stageSize.width;\n    this.viewSettings.height = this._stageSize.height; // Function to handle a resize event.\n    // Will only attach if width and height are both fixed.\n\n    this.stage.onResize(this.onResized.bind(this));\n    this.stage.onOrientationChange(this.onOrientationChange.bind(this)); // Add Event Listeners\n\n    this.addEventListeners(); // Add Layout method\n    // this.applyLayoutMethod();\n\n    if (this.layout) {\n      this.updateLayout();\n    }\n\n    this.rendered = true;\n  }\n\n  addEventListeners() {\n    var scroller;\n    window.addEventListener(\"unload\", function (e) {\n      this.destroy();\n    }.bind(this));\n\n    if (!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    this._onScroll = this.onScroll.bind(this);\n    scroller.addEventListener(\"scroll\", this._onScroll);\n  }\n\n  removeEventListeners() {\n    var scroller;\n\n    if (!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    scroller.removeEventListener(\"scroll\", this._onScroll);\n    this._onScroll = undefined;\n  }\n\n  destroy() {\n    clearTimeout(this.orientationTimeout);\n    clearTimeout(this.resizeTimeout);\n    clearTimeout(this.afterScrolled);\n    this.clear();\n    this.removeEventListeners();\n    this.stage.destroy();\n    this.rendered = false;\n    /*\n    \t\tclearTimeout(this.trimTimeout);\n    \tif(this.settings.hidden) {\n    \t\tthis.element.removeChild(this.wrapper);\n    \t} else {\n    \t\tthis.element.removeChild(this.container);\n    \t}\n    */\n  }\n\n  onOrientationChange(e) {\n    let {\n      orientation\n    } = window;\n\n    if (this.optsSettings.resizeOnOrientationChange) {\n      this.resize();\n    } // Per ampproject:\n    // In IOS 10.3, the measured size of an element is incorrect if the\n    // element size depends on window size directly and the measurement\n    // happens in window.resize event. Adding a timeout for correct\n    // measurement. See https://github.com/ampproject/amphtml/issues/8479\n\n\n    clearTimeout(this.orientationTimeout);\n    this.orientationTimeout = setTimeout(function () {\n      this.orientationTimeout = undefined;\n\n      if (this.optsSettings.resizeOnOrientationChange) {\n        this.resize();\n      }\n\n      this.emit(_constants.EVENTS.MANAGERS.ORIENTATION_CHANGE, orientation);\n    }.bind(this), 500);\n  }\n\n  onResized(e) {\n    this.resize();\n  }\n\n  resize(width, height, epubcfi) {\n    let stageSize = this.stage.size(width, height); // For Safari, wait for orientation to catch up\n    // if the window is a square\n\n    this.winBounds = (0, _core.windowBounds)();\n\n    if (this.orientationTimeout && this.winBounds.width === this.winBounds.height) {\n      // reset the stage size for next resize\n      this._stageSize = undefined;\n      return;\n    }\n\n    if (this._stageSize && this._stageSize.width === stageSize.width && this._stageSize.height === stageSize.height) {\n      // Size is the same, no need to resize\n      return;\n    }\n\n    this._stageSize = stageSize;\n    this._bounds = this.bounds(); // Clear current views\n\n    this.clear(); // Update for new views\n\n    this.viewSettings.width = this._stageSize.width;\n    this.viewSettings.height = this._stageSize.height;\n    this.updateLayout();\n    this.emit(_constants.EVENTS.MANAGERS.RESIZED, {\n      width: this._stageSize.width,\n      height: this._stageSize.height\n    }, epubcfi);\n  }\n\n  createView(section, forceRight) {\n    return new this.View(section, (0, _core.extend)(this.viewSettings, {\n      forceRight\n    }));\n  }\n\n  handleNextPrePaginated(forceRight, section, action) {\n    let next;\n\n    if (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n      if (forceRight || section.index === 0) {\n        // First page (cover) should stand alone for pre-paginated books\n        return;\n      }\n\n      next = section.next();\n\n      if (next && !next.properties.includes(\"page-spread-left\")) {\n        return action.call(this, next);\n      }\n    }\n  }\n\n  display(section, target) {\n    var displaying = new _core.defer();\n    var displayed = displaying.promise; // Check if moving to target is needed\n\n    if (target === section.href || (0, _core.isNumber)(target)) {\n      target = undefined;\n    } // Check to make sure the section we want isn't already shown\n\n\n    var visible = this.views.find(section); // View is already shown, just move to correct location in view\n\n    if (visible && section && this.layout.name !== \"pre-paginated\") {\n      let offset = visible.offset();\n\n      if (this.settings.direction === \"ltr\") {\n        this.scrollTo(offset.left, offset.top, true);\n      } else {\n        let width = visible.width();\n        this.scrollTo(offset.left + width, offset.top, true);\n      }\n\n      if (target) {\n        let offset = visible.locationOf(target);\n        let width = visible.width();\n        this.moveTo(offset, width);\n      }\n\n      displaying.resolve();\n      return displayed;\n    } // Hide all current views\n\n\n    this.clear();\n    let forceRight = false;\n\n    if (this.layout.name === \"pre-paginated\" && this.layout.divisor === 2 && section.properties.includes(\"page-spread-right\")) {\n      forceRight = true;\n    }\n\n    this.add(section, forceRight).then(function (view) {\n      // Move to correct place within the section, if needed\n      if (target) {\n        let offset = view.locationOf(target);\n        let width = view.width();\n        this.moveTo(offset, width);\n      }\n    }.bind(this), err => {\n      displaying.reject(err);\n    }).then(function () {\n      return this.handleNextPrePaginated(forceRight, section, this.add);\n    }.bind(this)).then(function () {\n      this.views.show();\n      displaying.resolve();\n    }.bind(this)); // .then(function(){\n    // \treturn this.hooks.display.trigger(view);\n    // }.bind(this))\n    // .then(function(){\n    // \tthis.views.show();\n    // }.bind(this));\n\n    return displayed;\n  }\n\n  afterDisplayed(view) {\n    this.emit(_constants.EVENTS.MANAGERS.ADDED, view);\n  }\n\n  afterResized(view) {\n    this.emit(_constants.EVENTS.MANAGERS.RESIZE, view.section);\n  }\n\n  moveTo(offset, width) {\n    var distX = 0,\n        distY = 0;\n\n    if (!this.isPaginated) {\n      distY = offset.top;\n    } else {\n      distX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\n      if (distX + this.layout.delta > this.container.scrollWidth) {\n        distX = this.container.scrollWidth - this.layout.delta;\n      }\n\n      distY = Math.floor(offset.top / this.layout.delta) * this.layout.delta;\n\n      if (distY + this.layout.delta > this.container.scrollHeight) {\n        distY = this.container.scrollHeight - this.layout.delta;\n      }\n    }\n\n    if (this.settings.direction === 'rtl') {\n      /***\n      \tthe `floor` function above (L343) is on positive values, so we should add one `layout.delta`\n      \tto distX or use `Math.ceil` function, or multiply offset.left by -1\n      \tbefore `Math.floor`\n      */\n      distX = distX + this.layout.delta;\n      distX = distX - width;\n    }\n\n    this.scrollTo(distX, distY, true);\n  }\n\n  add(section, forceRight) {\n    var view = this.createView(section, forceRight);\n    this.views.append(view); // view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    view.onResize = this.afterResized.bind(this);\n    view.on(_constants.EVENTS.VIEWS.AXIS, axis => {\n      this.updateAxis(axis);\n    });\n    view.on(_constants.EVENTS.VIEWS.WRITING_MODE, mode => {\n      this.updateWritingMode(mode);\n    });\n    return view.display(this.request);\n  }\n\n  append(section, forceRight) {\n    var view = this.createView(section, forceRight);\n    this.views.append(view);\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    view.onResize = this.afterResized.bind(this);\n    view.on(_constants.EVENTS.VIEWS.AXIS, axis => {\n      this.updateAxis(axis);\n    });\n    view.on(_constants.EVENTS.VIEWS.WRITING_MODE, mode => {\n      this.updateWritingMode(mode);\n    });\n    return view.display(this.request);\n  }\n\n  prepend(section, forceRight) {\n    var view = this.createView(section, forceRight);\n    view.on(_constants.EVENTS.VIEWS.RESIZED, bounds => {\n      this.counter(bounds);\n    });\n    this.views.prepend(view);\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    view.onResize = this.afterResized.bind(this);\n    view.on(_constants.EVENTS.VIEWS.AXIS, axis => {\n      this.updateAxis(axis);\n    });\n    view.on(_constants.EVENTS.VIEWS.WRITING_MODE, mode => {\n      this.updateWritingMode(mode);\n    });\n    return view.display(this.request);\n  }\n\n  counter(bounds) {\n    if (this.settings.axis === \"vertical\") {\n      this.scrollBy(0, bounds.heightDelta, true);\n    } else {\n      this.scrollBy(bounds.widthDelta, 0, true);\n    }\n  } // resizeView(view) {\n  //\n  // \tif(this.settings.globalLayoutProperties.layout === \"pre-paginated\") {\n  // \t\tview.lock(\"both\", this.bounds.width, this.bounds.height);\n  // \t} else {\n  // \t\tview.lock(\"width\", this.bounds.width, this.bounds.height);\n  // \t}\n  //\n  // };\n\n\n  next() {\n    var next;\n    var left;\n    let dir = this.settings.direction;\n    if (!this.views.length) return;\n\n    if (this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n      this.scrollLeft = this.container.scrollLeft;\n      left = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n      if (left <= this.container.scrollWidth) {\n        this.scrollBy(this.layout.delta, 0, true);\n      } else {\n        next = this.views.last().section.next();\n      }\n    } else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n      this.scrollLeft = this.container.scrollLeft;\n\n      if (this.settings.rtlScrollType === \"default\") {\n        left = this.container.scrollLeft;\n\n        if (left > 0) {\n          this.scrollBy(this.layout.delta, 0, true);\n        } else {\n          next = this.views.last().section.next();\n        }\n      } else {\n        left = this.container.scrollLeft + this.layout.delta * -1;\n\n        if (left > this.container.scrollWidth * -1) {\n          this.scrollBy(this.layout.delta, 0, true);\n        } else {\n          next = this.views.last().section.next();\n        }\n      }\n    } else if (this.isPaginated && this.settings.axis === \"vertical\") {\n      this.scrollTop = this.container.scrollTop;\n      let top = this.container.scrollTop + this.container.offsetHeight;\n\n      if (top < this.container.scrollHeight) {\n        this.scrollBy(0, this.layout.height, true);\n      } else {\n        next = this.views.last().section.next();\n      }\n    } else {\n      next = this.views.last().section.next();\n    }\n\n    if (next) {\n      this.clear(); // The new section may have a different writing-mode from the old section. Thus, we need to update layout.\n\n      this.updateLayout();\n      let forceRight = false;\n\n      if (this.layout.name === \"pre-paginated\" && this.layout.divisor === 2 && next.properties.includes(\"page-spread-right\")) {\n        forceRight = true;\n      }\n\n      return this.append(next, forceRight).then(function () {\n        return this.handleNextPrePaginated(forceRight, next, this.append);\n      }.bind(this), err => {\n        return err;\n      }).then(function () {\n        // Reset position to start for scrolled-doc vertical-rl in default mode\n        if (!this.isPaginated && this.settings.axis === \"horizontal\" && this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\") {\n          this.scrollTo(this.container.scrollWidth, 0, true);\n        }\n\n        this.views.show();\n      }.bind(this));\n    }\n  }\n\n  prev() {\n    var prev;\n    var left;\n    let dir = this.settings.direction;\n    if (!this.views.length) return;\n\n    if (this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n      this.scrollLeft = this.container.scrollLeft;\n      left = this.container.scrollLeft;\n\n      if (left > 0) {\n        this.scrollBy(-this.layout.delta, 0, true);\n      } else {\n        prev = this.views.first().section.prev();\n      }\n    } else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n      this.scrollLeft = this.container.scrollLeft;\n\n      if (this.settings.rtlScrollType === \"default\") {\n        left = this.container.scrollLeft + this.container.offsetWidth;\n\n        if (left < this.container.scrollWidth) {\n          this.scrollBy(-this.layout.delta, 0, true);\n        } else {\n          prev = this.views.first().section.prev();\n        }\n      } else {\n        left = this.container.scrollLeft;\n\n        if (left < 0) {\n          this.scrollBy(-this.layout.delta, 0, true);\n        } else {\n          prev = this.views.first().section.prev();\n        }\n      }\n    } else if (this.isPaginated && this.settings.axis === \"vertical\") {\n      this.scrollTop = this.container.scrollTop;\n      let top = this.container.scrollTop;\n\n      if (top > 0) {\n        this.scrollBy(0, -this.layout.height, true);\n      } else {\n        prev = this.views.first().section.prev();\n      }\n    } else {\n      prev = this.views.first().section.prev();\n    }\n\n    if (prev) {\n      this.clear(); // The new section may have a different writing-mode from the old section. Thus, we need to update layout.\n\n      this.updateLayout();\n      let forceRight = false;\n\n      if (this.layout.name === \"pre-paginated\" && this.layout.divisor === 2 && typeof prev.prev() !== \"object\") {\n        forceRight = true;\n      }\n\n      return this.prepend(prev, forceRight).then(function () {\n        var left;\n\n        if (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n          left = prev.prev();\n\n          if (left) {\n            return this.prepend(left);\n          }\n        }\n      }.bind(this), err => {\n        return err;\n      }).then(function () {\n        if (this.isPaginated && this.settings.axis === \"horizontal\") {\n          if (this.settings.direction === \"rtl\") {\n            if (this.settings.rtlScrollType === \"default\") {\n              this.scrollTo(0, 0, true);\n            } else {\n              this.scrollTo(this.container.scrollWidth * -1 + this.layout.delta, 0, true);\n            }\n          } else {\n            this.scrollTo(this.container.scrollWidth - this.layout.delta, 0, true);\n          }\n        }\n\n        this.views.show();\n      }.bind(this));\n    }\n  }\n\n  current() {\n    var visible = this.visible();\n\n    if (visible.length) {\n      // Current is the last visible view\n      return visible[visible.length - 1];\n    }\n\n    return null;\n  }\n\n  clear() {\n    // this.q.clear();\n    if (this.views) {\n      this.views.hide();\n      this.scrollTo(0, 0, true);\n      this.views.clear();\n    }\n  }\n\n  currentLocation() {\n    this.updateLayout();\n\n    if (this.isPaginated && this.settings.axis === \"horizontal\") {\n      this.location = this.paginatedLocation();\n    } else {\n      this.location = this.scrolledLocation();\n    }\n\n    return this.location;\n  }\n\n  scrolledLocation() {\n    let visible = this.visible();\n    let container = this.container.getBoundingClientRect();\n    let pageHeight = container.height < window.innerHeight ? container.height : window.innerHeight;\n    let pageWidth = container.width < window.innerWidth ? container.width : window.innerWidth;\n    let vertical = this.settings.axis === \"vertical\";\n    let rtl = this.settings.direction === \"rtl\";\n    let offset = 0;\n    let used = 0;\n\n    if (this.settings.fullsize) {\n      offset = vertical ? window.scrollY : window.scrollX;\n    }\n\n    let sections = visible.map(view => {\n      let {\n        index,\n        href\n      } = view.section;\n      let position = view.position();\n      let width = view.width();\n      let height = view.height();\n      let startPos;\n      let endPos;\n      let stopPos;\n      let totalPages;\n\n      if (vertical) {\n        startPos = offset + container.top - position.top + used;\n        endPos = startPos + pageHeight - used;\n        totalPages = this.layout.count(height, pageHeight).pages;\n        stopPos = pageHeight;\n      } else {\n        startPos = offset + container.left - position.left + used;\n        endPos = startPos + pageWidth - used;\n        totalPages = this.layout.count(width, pageWidth).pages;\n        stopPos = pageWidth;\n      }\n\n      let currPage = Math.ceil(startPos / stopPos);\n      let pages = [];\n      let endPage = Math.ceil(endPos / stopPos); // Reverse page counts for horizontal rtl\n\n      if (this.settings.direction === \"rtl\" && !vertical) {\n        let tempStartPage = currPage;\n        currPage = totalPages - endPage;\n        endPage = totalPages - tempStartPage;\n      }\n\n      pages = [];\n\n      for (var i = currPage; i <= endPage; i++) {\n        let pg = i + 1;\n        pages.push(pg);\n      }\n\n      let mapping = this.mapping.page(view.contents, view.section.cfiBase, startPos, endPos);\n      return {\n        index,\n        href,\n        pages,\n        totalPages,\n        mapping\n      };\n    });\n    return sections;\n  }\n\n  paginatedLocation() {\n    let visible = this.visible();\n    let container = this.container.getBoundingClientRect();\n    let left = 0;\n    let used = 0;\n\n    if (this.settings.fullsize) {\n      left = window.scrollX;\n    }\n\n    let sections = visible.map(view => {\n      let {\n        index,\n        href\n      } = view.section;\n      let offset;\n      let position = view.position();\n      let width = view.width(); // Find mapping\n\n      let start;\n      let end;\n      let pageWidth;\n\n      if (this.settings.direction === \"rtl\") {\n        offset = container.right - left;\n        pageWidth = Math.min(Math.abs(offset - position.left), this.layout.width) - used;\n        end = position.width - (position.right - offset) - used;\n        start = end - pageWidth;\n      } else {\n        offset = container.left + left;\n        pageWidth = Math.min(position.right - offset, this.layout.width) - used;\n        start = offset - position.left + used;\n        end = start + pageWidth;\n      }\n\n      used += pageWidth;\n      let mapping = this.mapping.page(view.contents, view.section.cfiBase, start, end);\n      let totalPages = this.layout.count(width).pages;\n      let startPage = Math.floor(start / this.layout.pageWidth);\n      let pages = [];\n      let endPage = Math.floor(end / this.layout.pageWidth); // start page should not be negative\n\n      if (startPage < 0) {\n        startPage = 0;\n        endPage = endPage + 1;\n      } // Reverse page counts for rtl\n\n\n      if (this.settings.direction === \"rtl\") {\n        let tempStartPage = startPage;\n        startPage = totalPages - endPage;\n        endPage = totalPages - tempStartPage;\n      }\n\n      for (var i = startPage + 1; i <= endPage; i++) {\n        let pg = i;\n        pages.push(pg);\n      }\n\n      return {\n        index,\n        href,\n        pages,\n        totalPages,\n        mapping\n      };\n    });\n    return sections;\n  }\n\n  isVisible(view, offsetPrev, offsetNext, _container) {\n    var position = view.position();\n\n    var container = _container || this.bounds();\n\n    if (this.settings.axis === \"horizontal\" && position.right > container.left - offsetPrev && position.left < container.right + offsetNext) {\n      return true;\n    } else if (this.settings.axis === \"vertical\" && position.bottom > container.top - offsetPrev && position.top < container.bottom + offsetNext) {\n      return true;\n    }\n\n    return false;\n  }\n\n  visible() {\n    var container = this.bounds();\n    var views = this.views.displayed();\n    var viewsLength = views.length;\n    var visible = [];\n    var isVisible;\n    var view;\n\n    for (var i = 0; i < viewsLength; i++) {\n      view = views[i];\n      isVisible = this.isVisible(view, 0, 0, container);\n\n      if (isVisible === true) {\n        visible.push(view);\n      }\n    }\n\n    return visible;\n  }\n\n  scrollBy(x, y, silent) {\n    let dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n    if (silent) {\n      this.ignore = true;\n    }\n\n    if (!this.settings.fullsize) {\n      if (x) this.container.scrollLeft += x * dir;\n      if (y) this.container.scrollTop += y;\n    } else {\n      window.scrollBy(x * dir, y * dir);\n    }\n\n    this.scrolled = true;\n  }\n\n  scrollTo(x, y, silent) {\n    if (silent) {\n      this.ignore = true;\n    }\n\n    if (!this.settings.fullsize) {\n      this.container.scrollLeft = x;\n      this.container.scrollTop = y;\n    } else {\n      window.scrollTo(x, y);\n    }\n\n    this.scrolled = true;\n  }\n\n  onScroll() {\n    let scrollTop;\n    let scrollLeft;\n\n    if (!this.settings.fullsize) {\n      scrollTop = this.container.scrollTop;\n      scrollLeft = this.container.scrollLeft;\n    } else {\n      scrollTop = window.scrollY;\n      scrollLeft = window.scrollX;\n    }\n\n    this.scrollTop = scrollTop;\n    this.scrollLeft = scrollLeft;\n\n    if (!this.ignore) {\n      this.emit(_constants.EVENTS.MANAGERS.SCROLL, {\n        top: scrollTop,\n        left: scrollLeft\n      });\n      clearTimeout(this.afterScrolled);\n      this.afterScrolled = setTimeout(function () {\n        this.emit(_constants.EVENTS.MANAGERS.SCROLLED, {\n          top: this.scrollTop,\n          left: this.scrollLeft\n        });\n      }.bind(this), 20);\n    } else {\n      this.ignore = false;\n    }\n  }\n\n  bounds() {\n    var bounds;\n    bounds = this.stage.bounds();\n    return bounds;\n  }\n\n  applyLayout(layout) {\n    this.layout = layout;\n    this.updateLayout();\n\n    if (this.views && this.views.length > 0 && this.layout.name === \"pre-paginated\") {\n      this.display(this.views.first().section);\n    } // this.manager.layout(this.layout.format);\n\n  }\n\n  updateLayout() {\n    if (!this.stage) {\n      return;\n    }\n\n    this._stageSize = this.stage.size();\n\n    if (!this.isPaginated) {\n      this.layout.calculate(this._stageSize.width, this._stageSize.height);\n    } else {\n      this.layout.calculate(this._stageSize.width, this._stageSize.height, this.settings.gap); // Set the look ahead offset for what is visible\n\n      this.settings.offset = this.layout.delta / this.layout.divisor; // this.stage.addStyleRules(\"iframe\", [{\"margin-right\" : this.layout.gap + \"px\"}]);\n    } // Set the dimensions for views\n\n\n    this.viewSettings.width = this.layout.width;\n    this.viewSettings.height = this.layout.height;\n    this.setLayout(this.layout);\n  }\n\n  setLayout(layout) {\n    this.viewSettings.layout = layout;\n    this.mapping = new _mapping.default(layout.props, this.settings.direction, this.settings.axis);\n\n    if (this.views) {\n      this.views.forEach(function (view) {\n        if (view) {\n          view.setLayout(layout);\n        }\n      });\n    }\n  }\n\n  updateWritingMode(mode) {\n    this.writingMode = mode;\n  }\n\n  updateAxis(axis, forceUpdate) {\n    if (!forceUpdate && axis === this.settings.axis) {\n      return;\n    }\n\n    this.settings.axis = axis;\n    this.stage && this.stage.axis(axis);\n    this.viewSettings.axis = axis;\n\n    if (this.mapping) {\n      this.mapping = new _mapping.default(this.layout.props, this.settings.direction, this.settings.axis);\n    }\n\n    if (this.layout) {\n      if (axis === \"vertical\") {\n        this.layout.spread(\"none\");\n      } else {\n        this.layout.spread(this.layout.settings.spread);\n      }\n    }\n  }\n\n  updateFlow(flow, defaultScrolledOverflow = \"auto\") {\n    let isPaginated = flow === \"paginated\" || flow === \"auto\";\n    this.isPaginated = isPaginated;\n\n    if (flow === \"scrolled-doc\" || flow === \"scrolled-continuous\" || flow === \"scrolled\") {\n      this.updateAxis(\"vertical\");\n    } else {\n      this.updateAxis(\"horizontal\");\n    }\n\n    this.viewSettings.flow = flow;\n\n    if (!this.settings.overflow) {\n      this.overflow = isPaginated ? \"hidden\" : defaultScrolledOverflow;\n    } else {\n      this.overflow = this.settings.overflow;\n    }\n\n    this.stage && this.stage.overflow(this.overflow);\n    this.updateLayout();\n  }\n\n  getContents() {\n    var contents = [];\n\n    if (!this.views) {\n      return contents;\n    }\n\n    this.views.forEach(function (view) {\n      const viewContents = view && view.contents;\n\n      if (viewContents) {\n        contents.push(viewContents);\n      }\n    });\n    return contents;\n  }\n\n  direction(dir = \"ltr\") {\n    this.settings.direction = dir;\n    this.stage && this.stage.direction(dir);\n    this.viewSettings.direction = dir;\n    this.updateLayout();\n  }\n\n  isRendered() {\n    return this.rendered;\n  }\n\n} //-- Enable binding events to Manager\n\n\n(0, _eventEmitter.default)(DefaultViewManager.prototype);\nvar _default = DefaultViewManager;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"../../utils/core\");\n\nvar _constants = require(\"../../utils/constants\");\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = Math.PI / 2;\nconst EASING_EQUATIONS = {\n  easeOutSine: function (pos) {\n    return Math.sin(pos * PI_D2);\n  },\n  easeInOutSine: function (pos) {\n    return -0.5 * (Math.cos(Math.PI * pos) - 1);\n  },\n  easeInOutQuint: function (pos) {\n    if ((pos /= 0.5) < 1) {\n      return 0.5 * Math.pow(pos, 5);\n    }\n\n    return 0.5 * (Math.pow(pos - 2, 5) + 2);\n  },\n  easeInCubic: function (pos) {\n    return Math.pow(pos, 3);\n  }\n};\n\nclass Snap {\n  constructor(manager, options) {\n    this.settings = (0, _core.extend)({\n      duration: 80,\n      minVelocity: 0.2,\n      minDistance: 10,\n      easing: EASING_EQUATIONS['easeInCubic']\n    }, options || {});\n    this.supportsTouch = this.supportsTouch();\n\n    if (this.supportsTouch) {\n      this.setup(manager);\n    }\n  }\n\n  setup(manager) {\n    this.manager = manager;\n    this.layout = this.manager.layout;\n    this.fullsize = this.manager.settings.fullsize;\n\n    if (this.fullsize) {\n      this.element = this.manager.stage.element;\n      this.scroller = window;\n      this.disableScroll();\n    } else {\n      this.element = this.manager.stage.container;\n      this.scroller = this.element;\n      this.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n    } // this.overflow = this.manager.overflow;\n    // set lookahead offset to page width\n\n\n    this.manager.settings.offset = this.layout.width;\n    this.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n    this.isVertical = this.manager.settings.axis === \"vertical\"; // disable snapping if not paginated or axis in not horizontal\n\n    if (!this.manager.isPaginated || this.isVertical) {\n      return;\n    }\n\n    this.touchCanceler = false;\n    this.resizeCanceler = false;\n    this.snapping = false;\n    this.scrollLeft;\n    this.scrollTop;\n    this.startTouchX = undefined;\n    this.startTouchY = undefined;\n    this.startTime = undefined;\n    this.endTouchX = undefined;\n    this.endTouchY = undefined;\n    this.endTime = undefined;\n    this.addListeners();\n  }\n\n  supportsTouch() {\n    if ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch) {\n      return true;\n    }\n\n    return false;\n  }\n\n  disableScroll() {\n    this.element.style.overflow = \"hidden\";\n  }\n\n  enableScroll() {\n    this.element.style.overflow = \"\";\n  }\n\n  addListeners() {\n    this._onResize = this.onResize.bind(this);\n    window.addEventListener('resize', this._onResize);\n    this._onScroll = this.onScroll.bind(this);\n    this.scroller.addEventListener('scroll', this._onScroll);\n    this._onTouchStart = this.onTouchStart.bind(this);\n    this.scroller.addEventListener('touchstart', this._onTouchStart, {\n      passive: true\n    });\n    this.on('touchstart', this._onTouchStart);\n    this._onTouchMove = this.onTouchMove.bind(this);\n    this.scroller.addEventListener('touchmove', this._onTouchMove, {\n      passive: true\n    });\n    this.on('touchmove', this._onTouchMove);\n    this._onTouchEnd = this.onTouchEnd.bind(this);\n    this.scroller.addEventListener('touchend', this._onTouchEnd, {\n      passive: true\n    });\n    this.on('touchend', this._onTouchEnd);\n    this._afterDisplayed = this.afterDisplayed.bind(this);\n    this.manager.on(_constants.EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n  }\n\n  removeListeners() {\n    window.removeEventListener('resize', this._onResize);\n    this._onResize = undefined;\n    this.scroller.removeEventListener('scroll', this._onScroll);\n    this._onScroll = undefined;\n    this.scroller.removeEventListener('touchstart', this._onTouchStart, {\n      passive: true\n    });\n    this.off('touchstart', this._onTouchStart);\n    this._onTouchStart = undefined;\n    this.scroller.removeEventListener('touchmove', this._onTouchMove, {\n      passive: true\n    });\n    this.off('touchmove', this._onTouchMove);\n    this._onTouchMove = undefined;\n    this.scroller.removeEventListener('touchend', this._onTouchEnd, {\n      passive: true\n    });\n    this.off('touchend', this._onTouchEnd);\n    this._onTouchEnd = undefined;\n    this.manager.off(_constants.EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n    this._afterDisplayed = undefined;\n  }\n\n  afterDisplayed(view) {\n    let contents = view.contents;\n    [\"touchstart\", \"touchmove\", \"touchend\"].forEach(e => {\n      contents.on(e, ev => this.triggerViewEvent(ev, contents));\n    });\n  }\n\n  triggerViewEvent(e, contents) {\n    this.emit(e.type, e, contents);\n  }\n\n  onScroll(e) {\n    this.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n    this.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n  }\n\n  onResize(e) {\n    this.resizeCanceler = true;\n  }\n\n  onTouchStart(e) {\n    let {\n      screenX,\n      screenY\n    } = e.touches[0];\n\n    if (this.fullsize) {\n      this.enableScroll();\n    }\n\n    this.touchCanceler = true;\n\n    if (!this.startTouchX) {\n      this.startTouchX = screenX;\n      this.startTouchY = screenY;\n      this.startTime = this.now();\n    }\n\n    this.endTouchX = screenX;\n    this.endTouchY = screenY;\n    this.endTime = this.now();\n  }\n\n  onTouchMove(e) {\n    let {\n      screenX,\n      screenY\n    } = e.touches[0];\n    let deltaY = Math.abs(screenY - this.endTouchY);\n    this.touchCanceler = true;\n\n    if (!this.fullsize && deltaY < 10) {\n      this.element.scrollLeft -= screenX - this.endTouchX;\n    }\n\n    this.endTouchX = screenX;\n    this.endTouchY = screenY;\n    this.endTime = this.now();\n  }\n\n  onTouchEnd(e) {\n    if (this.fullsize) {\n      this.disableScroll();\n    }\n\n    this.touchCanceler = false;\n    let swipped = this.wasSwiped();\n\n    if (swipped !== 0) {\n      this.snap(swipped);\n    } else {\n      this.snap();\n    }\n\n    this.startTouchX = undefined;\n    this.startTouchY = undefined;\n    this.startTime = undefined;\n    this.endTouchX = undefined;\n    this.endTouchY = undefined;\n    this.endTime = undefined;\n  }\n\n  wasSwiped() {\n    let snapWidth = this.layout.pageWidth * this.layout.divisor;\n    let distance = this.endTouchX - this.startTouchX;\n    let absolute = Math.abs(distance);\n    let time = this.endTime - this.startTime;\n    let velocity = distance / time;\n    let minVelocity = this.settings.minVelocity;\n\n    if (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n      return 0;\n    }\n\n    if (velocity > minVelocity) {\n      // previous\n      return -1;\n    } else if (velocity < -minVelocity) {\n      // next\n      return 1;\n    }\n  }\n\n  needsSnap() {\n    let left = this.scrollLeft;\n    let snapWidth = this.layout.pageWidth * this.layout.divisor;\n    return left % snapWidth !== 0;\n  }\n\n  snap(howMany = 0) {\n    let left = this.scrollLeft;\n    let snapWidth = this.layout.pageWidth * this.layout.divisor;\n    let snapTo = Math.round(left / snapWidth) * snapWidth;\n\n    if (howMany) {\n      snapTo += howMany * snapWidth;\n    }\n\n    return this.smoothScrollTo(snapTo);\n  }\n\n  smoothScrollTo(destination) {\n    const deferred = new _core.defer();\n    const start = this.scrollLeft;\n    const startTime = this.now();\n    const duration = this.settings.duration;\n    const easing = this.settings.easing;\n    this.snapping = true; // add animation loop\n\n    function tick() {\n      const now = this.now();\n      const time = Math.min(1, (now - startTime) / duration);\n      const timeFunction = easing(time);\n\n      if (this.touchCanceler || this.resizeCanceler) {\n        this.resizeCanceler = false;\n        this.snapping = false;\n        deferred.resolve();\n        return;\n      }\n\n      if (time < 1) {\n        window.requestAnimationFrame(tick.bind(this));\n        this.scrollTo(start + (destination - start) * time, 0);\n      } else {\n        this.scrollTo(destination, 0);\n        this.snapping = false;\n        deferred.resolve();\n      }\n    }\n\n    tick.call(this);\n    return deferred.promise;\n  }\n\n  scrollTo(left = 0, top = 0) {\n    if (this.fullsize) {\n      window.scroll(left, top);\n    } else {\n      this.scroller.scrollLeft = left;\n      this.scroller.scrollTop = top;\n    }\n  }\n\n  now() {\n    return 'now' in window.performance ? performance.now() : new Date().getTime();\n  }\n\n  destroy() {\n    if (!this.scroller) {\n      return;\n    }\n\n    if (this.fullsize) {\n      this.enableScroll();\n    }\n\n    this.removeListeners();\n    this.scroller = undefined;\n  }\n\n}\n\n(0, _eventEmitter.default)(Snap.prototype);\nvar _default = Snap;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"../../utils/core\");\n\nvar _default2 = _interopRequireDefault(require(\"../default\"));\n\nvar _snap = _interopRequireDefault(require(\"../helpers/snap\"));\n\nvar _constants = require(\"../../utils/constants\");\n\nvar _debounce = _interopRequireDefault(require(\"lodash/debounce\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass ContinuousViewManager extends _default2.default {\n  constructor(options) {\n    super(options);\n    this.name = \"continuous\";\n    this.settings = (0, _core.extend)(this.settings || {}, {\n      infinite: true,\n      overflow: undefined,\n      axis: undefined,\n      writingMode: undefined,\n      flow: \"scrolled\",\n      offset: 500,\n      offsetDelta: 250,\n      width: undefined,\n      height: undefined,\n      snap: false,\n      afterScrolledTimeout: 10,\n      allowScriptedContent: false,\n      allowPopups: false\n    });\n    (0, _core.extend)(this.settings, options.settings || {}); // Gap can be 0, but defaults doesn't handle that\n\n    if (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n      this.settings.gap = options.settings.gap;\n    }\n\n    this.viewSettings = {\n      ignoreClass: this.settings.ignoreClass,\n      axis: this.settings.axis,\n      flow: this.settings.flow,\n      layout: this.layout,\n      width: 0,\n      height: 0,\n      forceEvenPages: false,\n      allowScriptedContent: this.settings.allowScriptedContent,\n      allowPopups: this.settings.allowPopups\n    };\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n  }\n\n  display(section, target) {\n    return _default2.default.prototype.display.call(this, section, target).then(function () {\n      return this.fill();\n    }.bind(this));\n  }\n\n  fill(_full) {\n    var full = _full || new _core.defer();\n    this.q.enqueue(() => {\n      return this.check();\n    }).then(result => {\n      if (result) {\n        this.fill(full);\n      } else {\n        full.resolve();\n      }\n    });\n    return full.promise;\n  }\n\n  moveTo(offset) {\n    // var bounds = this.stage.bounds();\n    // var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n    var distX = 0,\n        distY = 0;\n    var offsetX = 0,\n        offsetY = 0;\n\n    if (!this.isPaginated) {\n      distY = offset.top;\n      offsetY = offset.top + this.settings.offsetDelta;\n    } else {\n      distX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n      offsetX = distX + this.settings.offsetDelta;\n    }\n\n    if (distX > 0 || distY > 0) {\n      this.scrollBy(distX, distY, true);\n    }\n  }\n\n  afterResized(view) {\n    this.emit(_constants.EVENTS.MANAGERS.RESIZE, view.section);\n  } // Remove Previous Listeners if present\n\n\n  removeShownListeners(view) {\n    // view.off(\"shown\", this.afterDisplayed);\n    // view.off(\"shown\", this.afterDisplayedAbove);\n    view.onDisplayed = function () {};\n  }\n\n  add(section) {\n    var view = this.createView(section);\n    this.views.append(view);\n    view.on(_constants.EVENTS.VIEWS.RESIZED, bounds => {\n      view.expanded = true;\n    });\n    view.on(_constants.EVENTS.VIEWS.AXIS, axis => {\n      this.updateAxis(axis);\n    });\n    view.on(_constants.EVENTS.VIEWS.WRITING_MODE, mode => {\n      this.updateWritingMode(mode);\n    }); // view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    view.onResize = this.afterResized.bind(this);\n    return view.display(this.request);\n  }\n\n  append(section) {\n    var view = this.createView(section);\n    view.on(_constants.EVENTS.VIEWS.RESIZED, bounds => {\n      view.expanded = true;\n    });\n    view.on(_constants.EVENTS.VIEWS.AXIS, axis => {\n      this.updateAxis(axis);\n    });\n    view.on(_constants.EVENTS.VIEWS.WRITING_MODE, mode => {\n      this.updateWritingMode(mode);\n    });\n    this.views.append(view);\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    return view;\n  }\n\n  prepend(section) {\n    var view = this.createView(section);\n    view.on(_constants.EVENTS.VIEWS.RESIZED, bounds => {\n      this.counter(bounds);\n      view.expanded = true;\n    });\n    view.on(_constants.EVENTS.VIEWS.AXIS, axis => {\n      this.updateAxis(axis);\n    });\n    view.on(_constants.EVENTS.VIEWS.WRITING_MODE, mode => {\n      this.updateWritingMode(mode);\n    });\n    this.views.prepend(view);\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    return view;\n  }\n\n  counter(bounds) {\n    if (this.settings.axis === \"vertical\") {\n      this.scrollBy(0, bounds.heightDelta, true);\n    } else {\n      this.scrollBy(bounds.widthDelta, 0, true);\n    }\n  }\n\n  update(_offset) {\n    var container = this.bounds();\n    var views = this.views.all();\n    var viewsLength = views.length;\n    var visible = [];\n    var offset = typeof _offset != \"undefined\" ? _offset : this.settings.offset || 0;\n    var isVisible;\n    var view;\n    var updating = new _core.defer();\n    var promises = [];\n\n    for (var i = 0; i < viewsLength; i++) {\n      view = views[i];\n      isVisible = this.isVisible(view, offset, offset, container);\n\n      if (isVisible === true) {\n        // console.log(\"visible \" + view.index, view.displayed);\n        if (!view.displayed) {\n          let displayed = view.display(this.request).then(function (view) {\n            view.show();\n          }, err => {\n            view.hide();\n          });\n          promises.push(displayed);\n        } else {\n          view.show();\n        }\n\n        visible.push(view);\n      } else {\n        this.q.enqueue(view.destroy.bind(view)); // console.log(\"hidden \" + view.index, view.displayed);\n\n        clearTimeout(this.trimTimeout);\n        this.trimTimeout = setTimeout(function () {\n          this.q.enqueue(this.trim.bind(this));\n        }.bind(this), 250);\n      }\n    }\n\n    if (promises.length) {\n      return Promise.all(promises).catch(err => {\n        updating.reject(err);\n      });\n    } else {\n      updating.resolve();\n      return updating.promise;\n    }\n  }\n\n  check(_offsetLeft, _offsetTop) {\n    var checking = new _core.defer();\n    var newViews = [];\n    var horizontal = this.settings.axis === \"horizontal\";\n    var delta = this.settings.offset || 0;\n\n    if (_offsetLeft && horizontal) {\n      delta = _offsetLeft;\n    }\n\n    if (_offsetTop && !horizontal) {\n      delta = _offsetTop;\n    }\n\n    var bounds = this._bounds; // bounds saved this until resize\n\n    let offset = horizontal ? this.scrollLeft : this.scrollTop;\n    let visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n    let contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n    let writingMode = this.writingMode && this.writingMode.indexOf(\"vertical\") === 0 ? \"vertical\" : \"horizontal\";\n    let rtlScrollType = this.settings.rtlScrollType;\n    let rtl = this.settings.direction === \"rtl\";\n\n    if (!this.settings.fullsize) {\n      // Scroll offset starts at width of element\n      if (rtl && rtlScrollType === \"default\" && writingMode === \"horizontal\") {\n        offset = contentLength - visibleLength - offset;\n      } // Scroll offset starts at 0 and goes negative\n\n\n      if (rtl && rtlScrollType === \"negative\" && writingMode === \"horizontal\") {\n        offset = offset * -1;\n      }\n    } else {\n      // Scroll offset starts at 0 and goes negative\n      if (horizontal && rtl && rtlScrollType === \"negative\" || !horizontal && rtl && rtlScrollType === \"default\") {\n        offset = offset * -1;\n      }\n    }\n\n    let prepend = () => {\n      let first = this.views.first();\n      let prev = first && first.section.prev();\n\n      if (prev) {\n        newViews.push(this.prepend(prev));\n      }\n    };\n\n    let append = () => {\n      let last = this.views.last();\n      let next = last && last.section.next();\n\n      if (next) {\n        newViews.push(this.append(next));\n      }\n    };\n\n    let end = offset + visibleLength + delta;\n    let start = offset - delta;\n\n    if (end >= contentLength) {\n      append();\n    }\n\n    if (start < 0) {\n      prepend();\n    }\n\n    let promises = newViews.map(view => {\n      return view.display(this.request);\n    });\n\n    if (newViews.length) {\n      return Promise.all(promises).then(() => {\n        return this.check();\n      }).then(() => {\n        // Check to see if anything new is on screen after rendering\n        return this.update(delta);\n      }, err => {\n        return err;\n      });\n    } else {\n      this.q.enqueue(function () {\n        this.update();\n      }.bind(this));\n      checking.resolve(false);\n      return checking.promise;\n    }\n  }\n\n  trim() {\n    var task = new _core.defer();\n    var displayed = this.views.displayed();\n    var first = displayed[0];\n    var last = displayed[displayed.length - 1];\n    var firstIndex = this.views.indexOf(first);\n    var lastIndex = this.views.indexOf(last);\n    var above = this.views.slice(0, firstIndex);\n    var below = this.views.slice(lastIndex + 1); // Erase all but last above\n\n    for (var i = 0; i < above.length - 1; i++) {\n      this.erase(above[i], above);\n    } // Erase all except first below\n\n\n    for (var j = 1; j < below.length; j++) {\n      this.erase(below[j]);\n    }\n\n    task.resolve();\n    return task.promise;\n  }\n\n  erase(view, above) {\n    //Trim\n    var prevTop;\n    var prevLeft;\n\n    if (!this.settings.fullsize) {\n      prevTop = this.container.scrollTop;\n      prevLeft = this.container.scrollLeft;\n    } else {\n      prevTop = window.scrollY;\n      prevLeft = window.scrollX;\n    }\n\n    var bounds = view.bounds();\n    this.views.remove(view);\n\n    if (above) {\n      if (this.settings.axis === \"vertical\") {\n        this.scrollTo(0, prevTop - bounds.height, true);\n      } else {\n        if (this.settings.direction === 'rtl') {\n          if (!this.settings.fullsize) {\n            this.scrollTo(prevLeft, 0, true);\n          } else {\n            this.scrollTo(prevLeft + Math.floor(bounds.width), 0, true);\n          }\n        } else {\n          this.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n        }\n      }\n    }\n  }\n\n  addEventListeners(stage) {\n    window.addEventListener(\"unload\", function (e) {\n      this.ignore = true; // this.scrollTo(0,0);\n\n      this.destroy();\n    }.bind(this));\n    this.addScrollListeners();\n\n    if (this.isPaginated && this.settings.snap) {\n      this.snapper = new _snap.default(this, this.settings.snap && typeof this.settings.snap === \"object\" && this.settings.snap);\n    }\n  }\n\n  addScrollListeners() {\n    var scroller;\n    this.tick = _core.requestAnimationFrame;\n    let dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n    this.scrollDeltaVert = 0;\n    this.scrollDeltaHorz = 0;\n\n    if (!this.settings.fullsize) {\n      scroller = this.container;\n      this.scrollTop = this.container.scrollTop;\n      this.scrollLeft = this.container.scrollLeft;\n    } else {\n      scroller = window;\n      this.scrollTop = window.scrollY * dir;\n      this.scrollLeft = window.scrollX * dir;\n    }\n\n    this._onScroll = this.onScroll.bind(this);\n    scroller.addEventListener(\"scroll\", this._onScroll);\n    this._scrolled = (0, _debounce.default)(this.scrolled.bind(this), 30); // this.tick.call(window, this.onScroll.bind(this));\n\n    this.didScroll = false;\n  }\n\n  removeEventListeners() {\n    var scroller;\n\n    if (!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    scroller.removeEventListener(\"scroll\", this._onScroll);\n    this._onScroll = undefined;\n  }\n\n  onScroll() {\n    let scrollTop;\n    let scrollLeft;\n    let dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n\n    if (!this.settings.fullsize) {\n      scrollTop = this.container.scrollTop;\n      scrollLeft = this.container.scrollLeft;\n    } else {\n      scrollTop = window.scrollY * dir;\n      scrollLeft = window.scrollX * dir;\n    }\n\n    this.scrollTop = scrollTop;\n    this.scrollLeft = scrollLeft;\n\n    if (!this.ignore) {\n      this._scrolled();\n    } else {\n      this.ignore = false;\n    }\n\n    this.scrollDeltaVert += Math.abs(scrollTop - this.prevScrollTop);\n    this.scrollDeltaHorz += Math.abs(scrollLeft - this.prevScrollLeft);\n    this.prevScrollTop = scrollTop;\n    this.prevScrollLeft = scrollLeft;\n    clearTimeout(this.scrollTimeout);\n    this.scrollTimeout = setTimeout(function () {\n      this.scrollDeltaVert = 0;\n      this.scrollDeltaHorz = 0;\n    }.bind(this), 150);\n    clearTimeout(this.afterScrolled);\n    this.didScroll = false;\n  }\n\n  scrolled() {\n    this.q.enqueue(function () {\n      return this.check();\n    }.bind(this));\n    this.emit(_constants.EVENTS.MANAGERS.SCROLL, {\n      top: this.scrollTop,\n      left: this.scrollLeft\n    });\n    clearTimeout(this.afterScrolled);\n    this.afterScrolled = setTimeout(function () {\n      // Don't report scroll if we are about the snap\n      if (this.snapper && this.snapper.supportsTouch && this.snapper.needsSnap()) {\n        return;\n      }\n\n      this.emit(_constants.EVENTS.MANAGERS.SCROLLED, {\n        top: this.scrollTop,\n        left: this.scrollLeft\n      });\n    }.bind(this), this.settings.afterScrolledTimeout);\n  }\n\n  next() {\n    let delta = this.layout.props.name === \"pre-paginated\" && this.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n    if (!this.views.length) return;\n\n    if (this.isPaginated && this.settings.axis === \"horizontal\") {\n      this.scrollBy(delta, 0, true);\n    } else {\n      this.scrollBy(0, this.layout.height, true);\n    }\n\n    this.q.enqueue(function () {\n      return this.check();\n    }.bind(this));\n  }\n\n  prev() {\n    let delta = this.layout.props.name === \"pre-paginated\" && this.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n    if (!this.views.length) return;\n\n    if (this.isPaginated && this.settings.axis === \"horizontal\") {\n      this.scrollBy(-delta, 0, true);\n    } else {\n      this.scrollBy(0, -this.layout.height, true);\n    }\n\n    this.q.enqueue(function () {\n      return this.check();\n    }.bind(this));\n  }\n\n  updateFlow(flow) {\n    if (this.rendered && this.snapper) {\n      this.snapper.destroy();\n      this.snapper = undefined;\n    }\n\n    super.updateFlow(flow, \"scroll\");\n\n    if (this.rendered && this.isPaginated && this.settings.snap) {\n      this.snapper = new _snap.default(this, this.settings.snap && typeof this.settings.snap === \"object\" && this.settings.snap);\n    }\n  }\n\n  destroy() {\n    super.destroy();\n\n    if (this.snapper) {\n      this.snapper.destroy();\n    }\n  }\n\n}\n\nvar _default = ContinuousViewManager;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _core = require(\"./utils/core\");\n\nvar _hook = _interopRequireDefault(require(\"./utils/hook\"));\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _queue = _interopRequireDefault(require(\"./utils/queue\"));\n\nvar _layout = _interopRequireDefault(require(\"./layout\"));\n\nvar _themes = _interopRequireDefault(require(\"./themes\"));\n\nvar _contents = _interopRequireDefault(require(\"./contents\"));\n\nvar _annotations = _interopRequireDefault(require(\"./annotations\"));\n\nvar _constants = require(\"./utils/constants\");\n\nvar _iframe = _interopRequireDefault(require(\"./managers/views/iframe\"));\n\nvar _index = _interopRequireDefault(require(\"./managers/default/index\"));\n\nvar _index2 = _interopRequireDefault(require(\"./managers/continuous/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import Mapping from \"./mapping\";\n// Default Views\n// Default View Managers\n\n/**\n * Displays an Epub as a series of Views for each Section.\n * Requires Manager and View class to handle specifics of rendering\n * the section content.\n * @class\n * @param {Book} book\n * @param {object} [options]\n * @param {number} [options.width]\n * @param {number} [options.height]\n * @param {string} [options.ignoreClass] class for the cfi parser to ignore\n * @param {string | function | object} [options.manager='default']\n * @param {string | function} [options.view='iframe']\n * @param {string} [options.layout] layout to force\n * @param {string} [options.spread] force spread value\n * @param {number} [options.minSpreadWidth] overridden by spread: none (never) / both (always)\n * @param {string} [options.stylesheet] url of stylesheet to be injected\n * @param {boolean} [options.resizeOnOrientationChange] false to disable orientation events\n * @param {string} [options.script] url of script to be injected\n * @param {boolean | object} [options.snap=false] use snap scrolling\n * @param {string} [options.defaultDirection='ltr'] default text direction\n * @param {boolean} [options.allowScriptedContent=false] enable running scripts in content\n * @param {boolean} [options.allowPopups=false] enable opening popup in content\n */\nclass Rendition {\n  constructor(book, options) {\n    this.settings = (0, _core.extend)(this.settings || {}, {\n      width: null,\n      height: null,\n      ignoreClass: \"\",\n      manager: \"default\",\n      view: \"iframe\",\n      flow: null,\n      layout: null,\n      spread: null,\n      minSpreadWidth: 800,\n      stylesheet: null,\n      resizeOnOrientationChange: true,\n      script: null,\n      snap: false,\n      defaultDirection: \"ltr\",\n      allowScriptedContent: false,\n      allowPopups: false\n    });\n    (0, _core.extend)(this.settings, options);\n\n    if (typeof this.settings.manager === \"object\") {\n      this.manager = this.settings.manager;\n    }\n\n    this.book = book;\n    /**\n     * Adds Hook methods to the Rendition prototype\n     * @member {object} hooks\n     * @property {Hook} hooks.content\n     * @memberof Rendition\n     */\n\n    this.hooks = {};\n    this.hooks.display = new _hook.default(this);\n    this.hooks.serialize = new _hook.default(this);\n    this.hooks.content = new _hook.default(this);\n    this.hooks.unloaded = new _hook.default(this);\n    this.hooks.layout = new _hook.default(this);\n    this.hooks.render = new _hook.default(this);\n    this.hooks.show = new _hook.default(this);\n    this.hooks.content.register(this.handleLinks.bind(this));\n    this.hooks.content.register(this.passEvents.bind(this));\n    this.hooks.content.register(this.adjustImages.bind(this));\n    this.book.spine.hooks.content.register(this.injectIdentifier.bind(this));\n\n    if (this.settings.stylesheet) {\n      this.book.spine.hooks.content.register(this.injectStylesheet.bind(this));\n    }\n\n    if (this.settings.script) {\n      this.book.spine.hooks.content.register(this.injectScript.bind(this));\n    }\n    /**\n     * @member {Themes} themes\n     * @memberof Rendition\n     */\n\n\n    this.themes = new _themes.default(this);\n    /**\n     * @member {Annotations} annotations\n     * @memberof Rendition\n     */\n\n    this.annotations = new _annotations.default(this);\n    this.epubcfi = new _epubcfi.default();\n    this.q = new _queue.default(this);\n    /**\n     * A Rendered Location Range\n     * @typedef location\n     * @type {Object}\n     * @property {object} start\n     * @property {string} start.index\n     * @property {string} start.href\n     * @property {object} start.displayed\n     * @property {EpubCFI} start.cfi\n     * @property {number} start.location\n     * @property {number} start.percentage\n     * @property {number} start.displayed.page\n     * @property {number} start.displayed.total\n     * @property {object} end\n     * @property {string} end.index\n     * @property {string} end.href\n     * @property {object} end.displayed\n     * @property {EpubCFI} end.cfi\n     * @property {number} end.location\n     * @property {number} end.percentage\n     * @property {number} end.displayed.page\n     * @property {number} end.displayed.total\n     * @property {boolean} atStart\n     * @property {boolean} atEnd\n     * @memberof Rendition\n     */\n\n    this.location = undefined; // Hold queue until book is opened\n\n    this.q.enqueue(this.book.opened);\n    this.starting = new _core.defer();\n    /**\n     * @member {promise} started returns after the rendition has started\n     * @memberof Rendition\n     */\n\n    this.started = this.starting.promise; // Block the queue until rendering is started\n\n    this.q.enqueue(this.start);\n  }\n  /**\n   * Set the manager function\n   * @param {function} manager\n   */\n\n\n  setManager(manager) {\n    this.manager = manager;\n  }\n  /**\n   * Require the manager from passed string, or as a class function\n   * @param  {string|object} manager [description]\n   * @return {method}\n   */\n\n\n  requireManager(manager) {\n    var viewManager; // If manager is a string, try to load from imported managers\n\n    if (typeof manager === \"string\" && manager === \"default\") {\n      viewManager = _index.default;\n    } else if (typeof manager === \"string\" && manager === \"continuous\") {\n      viewManager = _index2.default;\n    } else {\n      // otherwise, assume we were passed a class function\n      viewManager = manager;\n    }\n\n    return viewManager;\n  }\n  /**\n   * Require the view from passed string, or as a class function\n   * @param  {string|object} view\n   * @return {view}\n   */\n\n\n  requireView(view) {\n    var View; // If view is a string, try to load from imported views,\n\n    if (typeof view == \"string\" && view === \"iframe\") {\n      View = _iframe.default;\n    } else {\n      // otherwise, assume we were passed a class function\n      View = view;\n    }\n\n    return View;\n  }\n  /**\n   * Start the rendering\n   * @return {Promise} rendering has started\n   */\n\n\n  start() {\n    if (!this.settings.layout && (this.book.package.metadata.layout === \"pre-paginated\" || this.book.displayOptions.fixedLayout === \"true\")) {\n      this.settings.layout = \"pre-paginated\";\n    }\n\n    switch (this.book.package.metadata.spread) {\n      case 'none':\n        this.settings.spread = 'none';\n        break;\n\n      case 'both':\n        this.settings.spread = true;\n        break;\n    }\n\n    if (!this.manager) {\n      this.ViewManager = this.requireManager(this.settings.manager);\n      this.View = this.requireView(this.settings.view);\n      this.manager = new this.ViewManager({\n        view: this.View,\n        queue: this.q,\n        request: this.book.load.bind(this.book),\n        settings: this.settings\n      });\n    }\n\n    this.direction(this.book.package.metadata.direction || this.settings.defaultDirection); // Parse metadata to get layout props\n\n    this.settings.globalLayoutProperties = this.determineLayoutProperties(this.book.package.metadata);\n    this.flow(this.settings.globalLayoutProperties.flow);\n    this.layout(this.settings.globalLayoutProperties); // Listen for displayed views\n\n    this.manager.on(_constants.EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n    this.manager.on(_constants.EVENTS.MANAGERS.REMOVED, this.afterRemoved.bind(this)); // Listen for resizing\n\n    this.manager.on(_constants.EVENTS.MANAGERS.RESIZED, this.onResized.bind(this)); // Listen for rotation\n\n    this.manager.on(_constants.EVENTS.MANAGERS.ORIENTATION_CHANGE, this.onOrientationChange.bind(this)); // Listen for scroll changes\n\n    this.manager.on(_constants.EVENTS.MANAGERS.SCROLLED, this.reportLocation.bind(this));\n    /**\n     * Emit that rendering has started\n     * @event started\n     * @memberof Rendition\n     */\n\n    this.emit(_constants.EVENTS.RENDITION.STARTED); // Start processing queue\n\n    this.starting.resolve();\n  }\n  /**\n   * Call to attach the container to an element in the dom\n   * Container must be attached before rendering can begin\n   * @param  {element} element to attach to\n   * @return {Promise}\n   */\n\n\n  attachTo(element) {\n    return this.q.enqueue(function () {\n      // Start rendering\n      this.manager.render(element, {\n        \"width\": this.settings.width,\n        \"height\": this.settings.height\n      });\n      /**\n       * Emit that rendering has attached to an element\n       * @event attached\n       * @memberof Rendition\n       */\n\n      this.emit(_constants.EVENTS.RENDITION.ATTACHED);\n    }.bind(this));\n  }\n  /**\n   * Display a point in the book\n   * The request will be added to the rendering Queue,\n   * so it will wait until book is opened, rendering started\n   * and all other rendering tasks have finished to be called.\n   * @param  {string} target Url or EpubCFI\n   * @return {Promise}\n   */\n\n\n  display(target) {\n    if (this.displaying) {\n      this.displaying.resolve();\n    }\n\n    return this.q.enqueue(this._display, target);\n  }\n  /**\n   * Tells the manager what to display immediately\n   * @private\n   * @param  {string} target Url or EpubCFI\n   * @return {Promise}\n   */\n\n\n  _display(target) {\n    if (!this.book) {\n      return;\n    }\n\n    var isCfiString = this.epubcfi.isCfiString(target);\n    var displaying = new _core.defer();\n    var displayed = displaying.promise;\n    var section;\n    var moveTo;\n    this.displaying = displaying; // Check if this is a book percentage\n\n    if (this.book.locations.length() && (0, _core.isFloat)(target)) {\n      target = this.book.locations.cfiFromPercentage(parseFloat(target));\n    }\n\n    section = this.book.spine.get(target);\n\n    if (!section) {\n      displaying.reject(new Error(\"No Section Found\"));\n      return displayed;\n    }\n\n    this.manager.display(section, target).then(() => {\n      displaying.resolve(section);\n      this.displaying = undefined;\n      /**\n       * Emit that a section has been displayed\n       * @event displayed\n       * @param {Section} section\n       * @memberof Rendition\n       */\n\n      this.emit(_constants.EVENTS.RENDITION.DISPLAYED, section);\n      this.reportLocation();\n    }, err => {\n      /**\n       * Emit that has been an error displaying\n       * @event displayError\n       * @param {Section} section\n       * @memberof Rendition\n       */\n      this.emit(_constants.EVENTS.RENDITION.DISPLAY_ERROR, err);\n    });\n    return displayed;\n  }\n  /*\n  render(view, show) {\n  \t\t// view.onLayout = this.layout.format.bind(this.layout);\n  \tview.create();\n  \t\t// Fit to size of the container, apply padding\n  \tthis.manager.resizeView(view);\n  \t\t// Render Chain\n  \treturn view.section.render(this.book.request)\n  \t\t.then(function(contents){\n  \t\t\treturn view.load(contents);\n  \t\t}.bind(this))\n  \t\t.then(function(doc){\n  \t\t\treturn this.hooks.content.trigger(view, this);\n  \t\t}.bind(this))\n  \t\t.then(function(){\n  \t\t\tthis.layout.format(view.contents);\n  \t\t\treturn this.hooks.layout.trigger(view, this);\n  \t\t}.bind(this))\n  \t\t.then(function(){\n  \t\t\treturn view.display();\n  \t\t}.bind(this))\n  \t\t.then(function(){\n  \t\t\treturn this.hooks.render.trigger(view, this);\n  \t\t}.bind(this))\n  \t\t.then(function(){\n  \t\t\tif(show !== false) {\n  \t\t\t\tthis.q.enqueue(function(view){\n  \t\t\t\t\tview.show();\n  \t\t\t\t}, view);\n  \t\t\t}\n  \t\t\t// this.map = new Map(view, this.layout);\n  \t\t\tthis.hooks.show.trigger(view, this);\n  \t\t\tthis.trigger(\"rendered\", view.section);\n  \t\t\t}.bind(this))\n  \t\t.catch(function(e){\n  \t\t\tthis.trigger(\"loaderror\", e);\n  \t\t}.bind(this));\n  \t}\n  */\n\n  /**\n   * Report what section has been displayed\n   * @private\n   * @param  {*} view\n   */\n\n\n  afterDisplayed(view) {\n    view.on(_constants.EVENTS.VIEWS.MARK_CLICKED, (cfiRange, data) => this.triggerMarkEvent(cfiRange, data, view.contents));\n    this.hooks.render.trigger(view, this).then(() => {\n      if (view.contents) {\n        this.hooks.content.trigger(view.contents, this).then(() => {\n          /**\n           * Emit that a section has been rendered\n           * @event rendered\n           * @param {Section} section\n           * @param {View} view\n           * @memberof Rendition\n           */\n          this.emit(_constants.EVENTS.RENDITION.RENDERED, view.section, view);\n        });\n      } else {\n        this.emit(_constants.EVENTS.RENDITION.RENDERED, view.section, view);\n      }\n    });\n  }\n  /**\n   * Report what has been removed\n   * @private\n   * @param  {*} view\n   */\n\n\n  afterRemoved(view) {\n    this.hooks.unloaded.trigger(view, this).then(() => {\n      /**\n       * Emit that a section has been removed\n       * @event removed\n       * @param {Section} section\n       * @param {View} view\n       * @memberof Rendition\n       */\n      this.emit(_constants.EVENTS.RENDITION.REMOVED, view.section, view);\n    });\n  }\n  /**\n   * Report resize events and display the last seen location\n   * @private\n   */\n\n\n  onResized(size, epubcfi) {\n    /**\n     * Emit that the rendition has been resized\n     * @event resized\n     * @param {number} width\n     * @param {height} height\n     * @param {string} epubcfi (optional)\n     * @memberof Rendition\n     */\n    this.emit(_constants.EVENTS.RENDITION.RESIZED, {\n      width: size.width,\n      height: size.height\n    }, epubcfi);\n\n    if (this.location && this.location.start) {\n      this.display(epubcfi || this.location.start.cfi);\n    }\n  }\n  /**\n   * Report orientation events and display the last seen location\n   * @private\n   */\n\n\n  onOrientationChange(orientation) {\n    /**\n     * Emit that the rendition has been rotated\n     * @event orientationchange\n     * @param {string} orientation\n     * @memberof Rendition\n     */\n    this.emit(_constants.EVENTS.RENDITION.ORIENTATION_CHANGE, orientation);\n  }\n  /**\n   * Move the Rendition to a specific offset\n   * Usually you would be better off calling display()\n   * @param {object} offset\n   */\n\n\n  moveTo(offset) {\n    this.manager.moveTo(offset);\n  }\n  /**\n   * Trigger a resize of the views\n   * @param {number} [width]\n   * @param {number} [height]\n   * @param {string} [epubcfi] (optional)\n   */\n\n\n  resize(width, height, epubcfi) {\n    if (width) {\n      this.settings.width = width;\n    }\n\n    if (height) {\n      this.settings.height = height;\n    }\n\n    this.manager.resize(width, height, epubcfi);\n  }\n  /**\n   * Clear all rendered views\n   */\n\n\n  clear() {\n    this.manager.clear();\n  }\n  /**\n   * Go to the next \"page\" in the rendition\n   * @return {Promise}\n   */\n\n\n  next() {\n    return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this));\n  }\n  /**\n   * Go to the previous \"page\" in the rendition\n   * @return {Promise}\n   */\n\n\n  prev() {\n    return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this));\n  } //-- http://www.idpf.org/epub/301/spec/epub-publications.html#meta-properties-rendering\n\n  /**\n   * Determine the Layout properties from metadata and settings\n   * @private\n   * @param  {object} metadata\n   * @return {object} properties\n   */\n\n\n  determineLayoutProperties(metadata) {\n    var properties;\n    var layout = this.settings.layout || metadata.layout || \"reflowable\";\n    var spread = this.settings.spread || metadata.spread || \"auto\";\n    var orientation = this.settings.orientation || metadata.orientation || \"auto\";\n    var flow = this.settings.flow || metadata.flow || \"auto\";\n    var viewport = metadata.viewport || \"\";\n    var minSpreadWidth = this.settings.minSpreadWidth || metadata.minSpreadWidth || 800;\n    var direction = this.settings.direction || metadata.direction || \"ltr\";\n\n    if ((this.settings.width === 0 || this.settings.width > 0) && (this.settings.height === 0 || this.settings.height > 0)) {// viewport = \"width=\"+this.settings.width+\", height=\"+this.settings.height+\"\";\n    }\n\n    properties = {\n      layout: layout,\n      spread: spread,\n      orientation: orientation,\n      flow: flow,\n      viewport: viewport,\n      minSpreadWidth: minSpreadWidth,\n      direction: direction\n    };\n    return properties;\n  }\n  /**\n   * Adjust the flow of the rendition to paginated or scrolled\n   * (scrolled-continuous vs scrolled-doc are handled by different view managers)\n   * @param  {string} flow\n   */\n\n\n  flow(flow) {\n    var _flow = flow;\n\n    if (flow === \"scrolled\" || flow === \"scrolled-doc\" || flow === \"scrolled-continuous\") {\n      _flow = \"scrolled\";\n    }\n\n    if (flow === \"auto\" || flow === \"paginated\") {\n      _flow = \"paginated\";\n    }\n\n    this.settings.flow = flow;\n\n    if (this._layout) {\n      this._layout.flow(_flow);\n    }\n\n    if (this.manager && this._layout) {\n      this.manager.applyLayout(this._layout);\n    }\n\n    if (this.manager) {\n      this.manager.updateFlow(_flow);\n    }\n\n    if (this.manager && this.manager.isRendered() && this.location) {\n      this.manager.clear();\n      this.display(this.location.start.cfi);\n    }\n  }\n  /**\n   * Adjust the layout of the rendition to reflowable or pre-paginated\n   * @param  {object} settings\n   */\n\n\n  layout(settings) {\n    if (settings) {\n      this._layout = new _layout.default(settings);\n\n      this._layout.spread(settings.spread, this.settings.minSpreadWidth); // this.mapping = new Mapping(this._layout.props);\n\n\n      this._layout.on(_constants.EVENTS.LAYOUT.UPDATED, (props, changed) => {\n        this.emit(_constants.EVENTS.RENDITION.LAYOUT, props, changed);\n      });\n    }\n\n    if (this.manager && this._layout) {\n      this.manager.applyLayout(this._layout);\n    }\n\n    return this._layout;\n  }\n  /**\n   * Adjust if the rendition uses spreads\n   * @param  {string} spread none | auto (TODO: implement landscape, portrait, both)\n   * @param  {int} [min] min width to use spreads at\n   */\n\n\n  spread(spread, min) {\n    this.settings.spread = spread;\n\n    if (min) {\n      this.settings.minSpreadWidth = min;\n    }\n\n    if (this._layout) {\n      this._layout.spread(spread, min);\n    }\n\n    if (this.manager && this.manager.isRendered()) {\n      this.manager.updateLayout();\n    }\n  }\n  /**\n   * Adjust the direction of the rendition\n   * @param  {string} dir\n   */\n\n\n  direction(dir) {\n    this.settings.direction = dir || \"ltr\";\n\n    if (this.manager) {\n      this.manager.direction(this.settings.direction);\n    }\n\n    if (this.manager && this.manager.isRendered() && this.location) {\n      this.manager.clear();\n      this.display(this.location.start.cfi);\n    }\n  }\n  /**\n   * Report the current location\n   * @fires relocated\n   * @fires locationChanged\n   */\n\n\n  reportLocation() {\n    return this.q.enqueue(function reportedLocation() {\n      requestAnimationFrame(function reportedLocationAfterRAF() {\n        var location = this.manager.currentLocation();\n\n        if (location && location.then && typeof location.then === \"function\") {\n          location.then(function (result) {\n            let located = this.located(result);\n\n            if (!located || !located.start || !located.end) {\n              return;\n            }\n\n            this.location = located;\n            this.emit(_constants.EVENTS.RENDITION.LOCATION_CHANGED, {\n              index: this.location.start.index,\n              href: this.location.start.href,\n              start: this.location.start.cfi,\n              end: this.location.end.cfi,\n              percentage: this.location.start.percentage\n            });\n            this.emit(_constants.EVENTS.RENDITION.RELOCATED, this.location);\n          }.bind(this));\n        } else if (location) {\n          let located = this.located(location);\n\n          if (!located || !located.start || !located.end) {\n            return;\n          }\n\n          this.location = located;\n          /**\n           * @event locationChanged\n           * @deprecated\n           * @type {object}\n           * @property {number} index\n           * @property {string} href\n           * @property {EpubCFI} start\n           * @property {EpubCFI} end\n           * @property {number} percentage\n           * @memberof Rendition\n           */\n\n          this.emit(_constants.EVENTS.RENDITION.LOCATION_CHANGED, {\n            index: this.location.start.index,\n            href: this.location.start.href,\n            start: this.location.start.cfi,\n            end: this.location.end.cfi,\n            percentage: this.location.start.percentage\n          });\n          /**\n           * @event relocated\n           * @type {displayedLocation}\n           * @memberof Rendition\n           */\n\n          this.emit(_constants.EVENTS.RENDITION.RELOCATED, this.location);\n        }\n      }.bind(this));\n    }.bind(this));\n  }\n  /**\n   * Get the Current Location object\n   * @return {displayedLocation | promise} location (may be a promise)\n   */\n\n\n  currentLocation() {\n    var location = this.manager.currentLocation();\n\n    if (location && location.then && typeof location.then === \"function\") {\n      location.then(function (result) {\n        let located = this.located(result);\n        return located;\n      }.bind(this));\n    } else if (location) {\n      let located = this.located(location);\n      return located;\n    }\n  }\n  /**\n   * Creates a Rendition#locationRange from location\n   * passed by the Manager\n   * @returns {displayedLocation}\n   * @private\n   */\n\n\n  located(location) {\n    if (!location.length) {\n      return {};\n    }\n\n    let start = location[0];\n    let end = location[location.length - 1];\n    let located = {\n      start: {\n        index: start.index,\n        href: start.href,\n        cfi: start.mapping.start,\n        displayed: {\n          page: start.pages[0] || 1,\n          total: start.totalPages\n        }\n      },\n      end: {\n        index: end.index,\n        href: end.href,\n        cfi: end.mapping.end,\n        displayed: {\n          page: end.pages[end.pages.length - 1] || 1,\n          total: end.totalPages\n        }\n      }\n    };\n    let locationStart = this.book.locations.locationFromCfi(start.mapping.start);\n    let locationEnd = this.book.locations.locationFromCfi(end.mapping.end);\n\n    if (locationStart != null) {\n      located.start.location = locationStart;\n      located.start.percentage = this.book.locations.percentageFromLocation(locationStart);\n    }\n\n    if (locationEnd != null) {\n      located.end.location = locationEnd;\n      located.end.percentage = this.book.locations.percentageFromLocation(locationEnd);\n    }\n\n    let pageStart = this.book.pageList.pageFromCfi(start.mapping.start);\n    let pageEnd = this.book.pageList.pageFromCfi(end.mapping.end);\n\n    if (pageStart != -1) {\n      located.start.page = pageStart;\n    }\n\n    if (pageEnd != -1) {\n      located.end.page = pageEnd;\n    }\n\n    if (end.index === this.book.spine.last().index && located.end.displayed.page >= located.end.displayed.total) {\n      located.atEnd = true;\n    }\n\n    if (start.index === this.book.spine.first().index && located.start.displayed.page === 1) {\n      located.atStart = true;\n    }\n\n    return located;\n  }\n  /**\n   * Remove and Clean Up the Rendition\n   */\n\n\n  destroy() {\n    // Clear the queue\n    // this.q.clear();\n    // this.q = undefined;\n    this.manager && this.manager.destroy();\n    this.book = undefined; // this.views = null;\n    // this.hooks.display.clear();\n    // this.hooks.serialize.clear();\n    // this.hooks.content.clear();\n    // this.hooks.layout.clear();\n    // this.hooks.render.clear();\n    // this.hooks.show.clear();\n    // this.hooks = {};\n    // this.themes.destroy();\n    // this.themes = undefined;\n    // this.epubcfi = undefined;\n    // this.starting = undefined;\n    // this.started = undefined;\n  }\n  /**\n   * Pass the events from a view's Contents\n   * @private\n   * @param  {Contents} view contents\n   */\n\n\n  passEvents(contents) {\n    _constants.DOM_EVENTS.forEach(e => {\n      contents.on(e, ev => this.triggerViewEvent(ev, contents));\n    });\n\n    contents.on(_constants.EVENTS.CONTENTS.SELECTED, e => this.triggerSelectedEvent(e, contents));\n  }\n  /**\n   * Emit events passed by a view\n   * @private\n   * @param  {event} e\n   */\n\n\n  triggerViewEvent(e, contents) {\n    this.emit(e.type, e, contents);\n  }\n  /**\n   * Emit a selection event's CFI Range passed from a a view\n   * @private\n   * @param  {string} cfirange\n   */\n\n\n  triggerSelectedEvent(cfirange, contents) {\n    /**\n     * Emit that a text selection has occurred\n     * @event selected\n     * @param {string} cfirange\n     * @param {Contents} contents\n     * @memberof Rendition\n     */\n    this.emit(_constants.EVENTS.RENDITION.SELECTED, cfirange, contents);\n  }\n  /**\n   * Emit a markClicked event with the cfiRange and data from a mark\n   * @private\n   * @param  {EpubCFI} cfirange\n   */\n\n\n  triggerMarkEvent(cfiRange, data, contents) {\n    /**\n     * Emit that a mark was clicked\n     * @event markClicked\n     * @param {EpubCFI} cfirange\n     * @param {object} data\n     * @param {Contents} contents\n     * @memberof Rendition\n     */\n    this.emit(_constants.EVENTS.RENDITION.MARK_CLICKED, cfiRange, data, contents);\n  }\n  /**\n   * Get a Range from a Visible CFI\n   * @param  {string} cfi EpubCfi String\n   * @param  {string} ignoreClass\n   * @return {range}\n   */\n\n\n  getRange(cfi, ignoreClass) {\n    var _cfi = new _epubcfi.default(cfi);\n\n    var found = this.manager.visible().filter(function (view) {\n      if (_cfi.spinePos === view.index) return true;\n    }); // Should only every return 1 item\n\n    if (found.length) {\n      return found[0].contents.range(_cfi, ignoreClass);\n    }\n  }\n  /**\n   * Hook to adjust images to fit in columns\n   * @param  {Contents} contents\n   * @private\n   */\n\n\n  adjustImages(contents) {\n    if (this._layout.name === \"pre-paginated\") {\n      return new Promise(function (resolve) {\n        resolve();\n      });\n    }\n\n    let computed = contents.window.getComputedStyle(contents.content, null);\n    let height = (contents.content.offsetHeight - (parseFloat(computed.paddingTop) + parseFloat(computed.paddingBottom))) * .95;\n    let horizontalPadding = parseFloat(computed.paddingLeft) + parseFloat(computed.paddingRight);\n    contents.addStylesheetRules({\n      \"img\": {\n        \"max-width\": (this._layout.columnWidth ? this._layout.columnWidth - horizontalPadding + \"px\" : \"100%\") + \"!important\",\n        \"max-height\": height + \"px\" + \"!important\",\n        \"object-fit\": \"contain\",\n        \"page-break-inside\": \"avoid\",\n        \"break-inside\": \"avoid\",\n        \"box-sizing\": \"border-box\"\n      },\n      \"svg\": {\n        \"max-width\": (this._layout.columnWidth ? this._layout.columnWidth - horizontalPadding + \"px\" : \"100%\") + \"!important\",\n        \"max-height\": height + \"px\" + \"!important\",\n        \"page-break-inside\": \"avoid\",\n        \"break-inside\": \"avoid\"\n      }\n    });\n    return new Promise(function (resolve, reject) {\n      // Wait to apply\n      setTimeout(function () {\n        resolve();\n      }, 1);\n    });\n  }\n  /**\n   * Get the Contents object of each rendered view\n   * @returns {Contents[]}\n   */\n\n\n  getContents() {\n    return this.manager ? this.manager.getContents() : [];\n  }\n  /**\n   * Get the views member from the manager\n   * @returns {Views}\n   */\n\n\n  views() {\n    let views = this.manager ? this.manager.views : undefined;\n    return views || [];\n  }\n  /**\n   * Hook to handle link clicks in rendered content\n   * @param  {Contents} contents\n   * @private\n   */\n\n\n  handleLinks(contents) {\n    if (contents) {\n      contents.on(_constants.EVENTS.CONTENTS.LINK_CLICKED, href => {\n        let relative = this.book.path.relative(href);\n        this.display(relative);\n      });\n    }\n  }\n  /**\n   * Hook to handle injecting stylesheet before\n   * a Section is serialized\n   * @param  {document} doc\n   * @param  {Section} section\n   * @private\n   */\n\n\n  injectStylesheet(doc, section) {\n    let style = doc.createElement(\"link\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"href\", this.settings.stylesheet);\n    doc.getElementsByTagName(\"head\")[0].appendChild(style);\n  }\n  /**\n   * Hook to handle injecting scripts before\n   * a Section is serialized\n   * @param  {document} doc\n   * @param  {Section} section\n   * @private\n   */\n\n\n  injectScript(doc, section) {\n    let script = doc.createElement(\"script\");\n    script.setAttribute(\"type\", \"text/javascript\");\n    script.setAttribute(\"src\", this.settings.script);\n    script.textContent = \" \"; // Needed to prevent self closing tag\n\n    doc.getElementsByTagName(\"head\")[0].appendChild(script);\n  }\n  /**\n   * Hook to handle the document identifier before\n   * a Section is serialized\n   * @param  {document} doc\n   * @param  {Section} section\n   * @private\n   */\n\n\n  injectIdentifier(doc, section) {\n    let ident = this.book.packaging.metadata.identifier;\n    let meta = doc.createElement(\"meta\");\n    meta.setAttribute(\"name\", \"dc.relation.ispartof\");\n\n    if (ident) {\n      meta.setAttribute(\"content\", ident);\n    }\n\n    doc.getElementsByTagName(\"head\")[0].appendChild(meta);\n  }\n\n} //-- Enable binding events to Renderer\n\n\n(0, _eventEmitter.default)(Rendition.prototype);\nvar _default = Rendition;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\nvar _request = _interopRequireDefault(require(\"./utils/request\"));\n\nvar _mime = _interopRequireDefault(require(\"./utils/mime\"));\n\nvar _path = _interopRequireDefault(require(\"./utils/path\"));\n\nvar _jszip = _interopRequireDefault(require(\"jszip/dist/jszip\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Handles Unzipping a requesting files from an Epub Archive\n * @class\n */\nclass Archive {\n  constructor() {\n    this.zip = undefined;\n    this.urlCache = {};\n    this.checkRequirements();\n  }\n  /**\n   * Checks to see if JSZip exists in global namspace,\n   * Requires JSZip if it isn't there\n   * @private\n   */\n\n\n  checkRequirements() {\n    try {\n      this.zip = new _jszip.default();\n    } catch (e) {\n      throw new Error(\"JSZip lib not loaded\");\n    }\n  }\n  /**\n   * Open an archive\n   * @param  {binary} input\n   * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n   * @return {Promise} zipfile\n   */\n\n\n  open(input, isBase64) {\n    return this.zip.loadAsync(input, {\n      \"base64\": isBase64\n    });\n  }\n  /**\n   * Load and Open an archive\n   * @param  {string} zipUrl\n   * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n   * @return {Promise} zipfile\n   */\n\n\n  openUrl(zipUrl, isBase64) {\n    return (0, _request.default)(zipUrl, \"binary\").then(function (data) {\n      return this.zip.loadAsync(data, {\n        \"base64\": isBase64\n      });\n    }.bind(this));\n  }\n  /**\n   * Request a url from the archive\n   * @param  {string} url  a url to request from the archive\n   * @param  {string} [type] specify the type of the returned result\n   * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n   */\n\n\n  request(url, type) {\n    var deferred = new _core.defer();\n    var response;\n    var path = new _path.default(url); // If type isn't set, determine it from the file extension\n\n    if (!type) {\n      type = path.extension;\n    }\n\n    if (type == \"blob\") {\n      response = this.getBlob(url);\n    } else {\n      response = this.getText(url);\n    }\n\n    if (response) {\n      response.then(function (r) {\n        let result = this.handleResponse(r, type);\n        deferred.resolve(result);\n      }.bind(this));\n    } else {\n      deferred.reject({\n        message: \"File not found in the epub: \" + url,\n        stack: new Error().stack\n      });\n    }\n\n    return deferred.promise;\n  }\n  /**\n   * Handle the response from request\n   * @private\n   * @param  {any} response\n   * @param  {string} [type]\n   * @return {any} the parsed result\n   */\n\n\n  handleResponse(response, type) {\n    var r;\n\n    if (type == \"json\") {\n      r = JSON.parse(response);\n    } else if ((0, _core.isXml)(type)) {\n      r = (0, _core.parse)(response, \"text/xml\");\n    } else if (type == \"xhtml\") {\n      r = (0, _core.parse)(response, \"application/xhtml+xml\");\n    } else if (type == \"html\" || type == \"htm\") {\n      r = (0, _core.parse)(response, \"text/html\");\n    } else {\n      r = response;\n    }\n\n    return r;\n  }\n  /**\n   * Get a Blob from Archive by Url\n   * @param  {string} url\n   * @param  {string} [mimeType]\n   * @return {Blob}\n   */\n\n\n  getBlob(url, mimeType) {\n    var decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\n    var entry = this.zip.file(decodededUrl);\n\n    if (entry) {\n      mimeType = mimeType || _mime.default.lookup(entry.name);\n      return entry.async(\"uint8array\").then(function (uint8array) {\n        return new Blob([uint8array], {\n          type: mimeType\n        });\n      });\n    }\n  }\n  /**\n   * Get Text from Archive by Url\n   * @param  {string} url\n   * @param  {string} [encoding]\n   * @return {string}\n   */\n\n\n  getText(url, encoding) {\n    var decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\n    var entry = this.zip.file(decodededUrl);\n\n    if (entry) {\n      return entry.async(\"string\").then(function (text) {\n        return text;\n      });\n    }\n  }\n  /**\n   * Get a base64 encoded result from Archive by Url\n   * @param  {string} url\n   * @param  {string} [mimeType]\n   * @return {string} base64 encoded\n   */\n\n\n  getBase64(url, mimeType) {\n    var decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\n    var entry = this.zip.file(decodededUrl);\n\n    if (entry) {\n      mimeType = mimeType || _mime.default.lookup(entry.name);\n      return entry.async(\"base64\").then(function (data) {\n        return \"data:\" + mimeType + \";base64,\" + data;\n      });\n    }\n  }\n  /**\n   * Create a Url from an unarchived item\n   * @param  {string} url\n   * @param  {object} [options.base64] use base64 encoding or blob url\n   * @return {Promise} url promise with Url string\n   */\n\n\n  createUrl(url, options) {\n    var deferred = new _core.defer();\n\n    var _URL = window.URL || window.webkitURL || window.mozURL;\n\n    var tempUrl;\n    var response;\n    var useBase64 = options && options.base64;\n\n    if (url in this.urlCache) {\n      deferred.resolve(this.urlCache[url]);\n      return deferred.promise;\n    }\n\n    if (useBase64) {\n      response = this.getBase64(url);\n\n      if (response) {\n        response.then(function (tempUrl) {\n          this.urlCache[url] = tempUrl;\n          deferred.resolve(tempUrl);\n        }.bind(this));\n      }\n    } else {\n      response = this.getBlob(url);\n\n      if (response) {\n        response.then(function (blob) {\n          tempUrl = _URL.createObjectURL(blob);\n          this.urlCache[url] = tempUrl;\n          deferred.resolve(tempUrl);\n        }.bind(this));\n      }\n    }\n\n    if (!response) {\n      deferred.reject({\n        message: \"File not found in the epub: \" + url,\n        stack: new Error().stack\n      });\n    }\n\n    return deferred.promise;\n  }\n  /**\n   * Revoke Temp Url for a archive item\n   * @param  {string} url url of the item in the archive\n   */\n\n\n  revokeUrl(url) {\n    var _URL = window.URL || window.webkitURL || window.mozURL;\n\n    var fromCache = this.urlCache[url];\n    if (fromCache) _URL.revokeObjectURL(fromCache);\n  }\n\n  destroy() {\n    var _URL = window.URL || window.webkitURL || window.mozURL;\n\n    for (let fromCache in this.urlCache) {\n      _URL.revokeObjectURL(fromCache);\n    }\n\n    this.zip = undefined;\n    this.urlCache = {};\n  }\n\n}\n\nvar _default = Archive;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\nvar _request = _interopRequireDefault(require(\"./utils/request\"));\n\nvar _mime = _interopRequireDefault(require(\"./utils/mime\"));\n\nvar _path = _interopRequireDefault(require(\"./utils/path\"));\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _localforage = _interopRequireDefault(require(\"localforage\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Handles saving and requesting files from local storage\n * @class\n * @param {string} name This should be the name of the application for modals\n * @param {function} [requester]\n * @param {function} [resolver]\n */\nclass Store {\n  constructor(name, requester, resolver) {\n    this.urlCache = {};\n    this.storage = undefined;\n    this.name = name;\n    this.requester = requester || _request.default;\n    this.resolver = resolver;\n    this.online = true;\n    this.checkRequirements();\n    this.addListeners();\n  }\n  /**\n   * Checks to see if localForage exists in global namspace,\n   * Requires localForage if it isn't there\n   * @private\n   */\n\n\n  checkRequirements() {\n    try {\n      let store;\n\n      if (typeof _localforage.default === \"undefined\") {\n        store = _localforage.default;\n      }\n\n      this.storage = store.createInstance({\n        name: this.name\n      });\n    } catch (e) {\n      throw new Error(\"localForage lib not loaded\");\n    }\n  }\n  /**\n   * Add online and offline event listeners\n   * @private\n   */\n\n\n  addListeners() {\n    this._status = this.status.bind(this);\n    window.addEventListener('online', this._status);\n    window.addEventListener('offline', this._status);\n  }\n  /**\n   * Remove online and offline event listeners\n   * @private\n   */\n\n\n  removeListeners() {\n    window.removeEventListener('online', this._status);\n    window.removeEventListener('offline', this._status);\n    this._status = undefined;\n  }\n  /**\n   * Update the online / offline status\n   * @private\n   */\n\n\n  status(event) {\n    let online = navigator.onLine;\n    this.online = online;\n\n    if (online) {\n      this.emit(\"online\", this);\n    } else {\n      this.emit(\"offline\", this);\n    }\n  }\n  /**\n   * Add all of a book resources to the store\n   * @param  {Resources} resources  book resources\n   * @param  {boolean} [force] force resaving resources\n   * @return {Promise<object>} store objects\n   */\n\n\n  add(resources, force) {\n    let mapped = resources.resources.map(item => {\n      let {\n        href\n      } = item;\n      let url = this.resolver(href);\n      let encodedUrl = window.encodeURIComponent(url);\n      return this.storage.getItem(encodedUrl).then(item => {\n        if (!item || force) {\n          return this.requester(url, \"binary\").then(data => {\n            return this.storage.setItem(encodedUrl, data);\n          });\n        } else {\n          return item;\n        }\n      });\n    });\n    return Promise.all(mapped);\n  }\n  /**\n   * Put binary data from a url to storage\n   * @param  {string} url  a url to request from storage\n   * @param  {boolean} [withCredentials]\n   * @param  {object} [headers]\n   * @return {Promise<Blob>}\n   */\n\n\n  put(url, withCredentials, headers) {\n    let encodedUrl = window.encodeURIComponent(url);\n    return this.storage.getItem(encodedUrl).then(result => {\n      if (!result) {\n        return this.requester(url, \"binary\", withCredentials, headers).then(data => {\n          return this.storage.setItem(encodedUrl, data);\n        });\n      }\n\n      return result;\n    });\n  }\n  /**\n   * Request a url\n   * @param  {string} url  a url to request from storage\n   * @param  {string} [type] specify the type of the returned result\n   * @param  {boolean} [withCredentials]\n   * @param  {object} [headers]\n   * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n   */\n\n\n  request(url, type, withCredentials, headers) {\n    if (this.online) {\n      // From network\n      return this.requester(url, type, withCredentials, headers).then(data => {\n        // save to store if not present\n        this.put(url);\n        return data;\n      });\n    } else {\n      // From store\n      return this.retrieve(url, type);\n    }\n  }\n  /**\n   * Request a url from storage\n   * @param  {string} url  a url to request from storage\n   * @param  {string} [type] specify the type of the returned result\n   * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n   */\n\n\n  retrieve(url, type) {\n    var deferred = new _core.defer();\n    var response;\n    var path = new _path.default(url); // If type isn't set, determine it from the file extension\n\n    if (!type) {\n      type = path.extension;\n    }\n\n    if (type == \"blob\") {\n      response = this.getBlob(url);\n    } else {\n      response = this.getText(url);\n    }\n\n    return response.then(r => {\n      var deferred = new _core.defer();\n      var result;\n\n      if (r) {\n        result = this.handleResponse(r, type);\n        deferred.resolve(result);\n      } else {\n        deferred.reject({\n          message: \"File not found in storage: \" + url,\n          stack: new Error().stack\n        });\n      }\n\n      return deferred.promise;\n    });\n  }\n  /**\n   * Handle the response from request\n   * @private\n   * @param  {any} response\n   * @param  {string} [type]\n   * @return {any} the parsed result\n   */\n\n\n  handleResponse(response, type) {\n    var r;\n\n    if (type == \"json\") {\n      r = JSON.parse(response);\n    } else if ((0, _core.isXml)(type)) {\n      r = (0, _core.parse)(response, \"text/xml\");\n    } else if (type == \"xhtml\") {\n      r = (0, _core.parse)(response, \"application/xhtml+xml\");\n    } else if (type == \"html\" || type == \"htm\") {\n      r = (0, _core.parse)(response, \"text/html\");\n    } else {\n      r = response;\n    }\n\n    return r;\n  }\n  /**\n   * Get a Blob from Storage by Url\n   * @param  {string} url\n   * @param  {string} [mimeType]\n   * @return {Blob}\n   */\n\n\n  getBlob(url, mimeType) {\n    let encodedUrl = window.encodeURIComponent(url);\n    return this.storage.getItem(encodedUrl).then(function (uint8array) {\n      if (!uint8array) return;\n      mimeType = mimeType || _mime.default.lookup(url);\n      return new Blob([uint8array], {\n        type: mimeType\n      });\n    });\n  }\n  /**\n   * Get Text from Storage by Url\n   * @param  {string} url\n   * @param  {string} [mimeType]\n   * @return {string}\n   */\n\n\n  getText(url, mimeType) {\n    let encodedUrl = window.encodeURIComponent(url);\n    mimeType = mimeType || _mime.default.lookup(url);\n    return this.storage.getItem(encodedUrl).then(function (uint8array) {\n      var deferred = new _core.defer();\n      var reader = new FileReader();\n      var blob;\n      if (!uint8array) return;\n      blob = new Blob([uint8array], {\n        type: mimeType\n      });\n      reader.addEventListener(\"loadend\", () => {\n        deferred.resolve(reader.result);\n      });\n      reader.readAsText(blob, mimeType);\n      return deferred.promise;\n    });\n  }\n  /**\n   * Get a base64 encoded result from Storage by Url\n   * @param  {string} url\n   * @param  {string} [mimeType]\n   * @return {string} base64 encoded\n   */\n\n\n  getBase64(url, mimeType) {\n    let encodedUrl = window.encodeURIComponent(url);\n    mimeType = mimeType || _mime.default.lookup(url);\n    return this.storage.getItem(encodedUrl).then(uint8array => {\n      var deferred = new _core.defer();\n      var reader = new FileReader();\n      var blob;\n      if (!uint8array) return;\n      blob = new Blob([uint8array], {\n        type: mimeType\n      });\n      reader.addEventListener(\"loadend\", () => {\n        deferred.resolve(reader.result);\n      });\n      reader.readAsDataURL(blob, mimeType);\n      return deferred.promise;\n    });\n  }\n  /**\n   * Create a Url from a stored item\n   * @param  {string} url\n   * @param  {object} [options.base64] use base64 encoding or blob url\n   * @return {Promise} url promise with Url string\n   */\n\n\n  createUrl(url, options) {\n    var deferred = new _core.defer();\n\n    var _URL = window.URL || window.webkitURL || window.mozURL;\n\n    var tempUrl;\n    var response;\n    var useBase64 = options && options.base64;\n\n    if (url in this.urlCache) {\n      deferred.resolve(this.urlCache[url]);\n      return deferred.promise;\n    }\n\n    if (useBase64) {\n      response = this.getBase64(url);\n\n      if (response) {\n        response.then(function (tempUrl) {\n          this.urlCache[url] = tempUrl;\n          deferred.resolve(tempUrl);\n        }.bind(this));\n      }\n    } else {\n      response = this.getBlob(url);\n\n      if (response) {\n        response.then(function (blob) {\n          tempUrl = _URL.createObjectURL(blob);\n          this.urlCache[url] = tempUrl;\n          deferred.resolve(tempUrl);\n        }.bind(this));\n      }\n    }\n\n    if (!response) {\n      deferred.reject({\n        message: \"File not found in storage: \" + url,\n        stack: new Error().stack\n      });\n    }\n\n    return deferred.promise;\n  }\n  /**\n   * Revoke Temp Url for a archive item\n   * @param  {string} url url of the item in the store\n   */\n\n\n  revokeUrl(url) {\n    var _URL = window.URL || window.webkitURL || window.mozURL;\n\n    var fromCache = this.urlCache[url];\n    if (fromCache) _URL.revokeObjectURL(fromCache);\n  }\n\n  destroy() {\n    var _URL = window.URL || window.webkitURL || window.mozURL;\n\n    for (let fromCache in this.urlCache) {\n      _URL.revokeObjectURL(fromCache);\n    }\n\n    this.urlCache = {};\n    this.removeListeners();\n  }\n\n}\n\n(0, _eventEmitter.default)(Store.prototype);\nvar _default = Store;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = require(\"./utils/core\");\n\n/**\n * Open DisplayOptions Format Parser\n * @class\n * @param {document} displayOptionsDocument XML\n */\nclass DisplayOptions {\n  constructor(displayOptionsDocument) {\n    this.interactive = \"\";\n    this.fixedLayout = \"\";\n    this.openToSpread = \"\";\n    this.orientationLock = \"\";\n\n    if (displayOptionsDocument) {\n      this.parse(displayOptionsDocument);\n    }\n  }\n  /**\n   * Parse XML\n   * @param  {document} displayOptionsDocument XML\n   * @return {DisplayOptions} self\n   */\n\n\n  parse(displayOptionsDocument) {\n    if (!displayOptionsDocument) {\n      return this;\n    }\n\n    const displayOptionsNode = (0, _core.qs)(displayOptionsDocument, \"display_options\");\n\n    if (!displayOptionsNode) {\n      return this;\n    }\n\n    const options = (0, _core.qsa)(displayOptionsNode, \"option\");\n    options.forEach(el => {\n      let value = \"\";\n\n      if (el.childNodes.length) {\n        value = el.childNodes[0].nodeValue;\n      }\n\n      switch (el.attributes.name.value) {\n        case \"interactive\":\n          this.interactive = value;\n          break;\n\n        case \"fixed-layout\":\n          this.fixedLayout = value;\n          break;\n\n        case \"open-to-spread\":\n          this.openToSpread = value;\n          break;\n\n        case \"orientation-lock\":\n          this.orientationLock = value;\n          break;\n      }\n    });\n    return this;\n  }\n\n  destroy() {\n    this.interactive = undefined;\n    this.fixedLayout = undefined;\n    this.openToSpread = undefined;\n    this.orientationLock = undefined;\n  }\n\n}\n\nvar _default = DisplayOptions;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _eventEmitter = _interopRequireDefault(require(\"event-emitter\"));\n\nvar _core = require(\"./utils/core\");\n\nvar _url = _interopRequireDefault(require(\"./utils/url\"));\n\nvar _path = _interopRequireDefault(require(\"./utils/path\"));\n\nvar _spine = _interopRequireDefault(require(\"./spine\"));\n\nvar _locations = _interopRequireDefault(require(\"./locations\"));\n\nvar _container = _interopRequireDefault(require(\"./container\"));\n\nvar _packaging = _interopRequireDefault(require(\"./packaging\"));\n\nvar _navigation = _interopRequireDefault(require(\"./navigation\"));\n\nvar _resources = _interopRequireDefault(require(\"./resources\"));\n\nvar _pagelist = _interopRequireDefault(require(\"./pagelist\"));\n\nvar _rendition = _interopRequireDefault(require(\"./rendition\"));\n\nvar _archive = _interopRequireDefault(require(\"./archive\"));\n\nvar _request2 = _interopRequireDefault(require(\"./utils/request\"));\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _store = _interopRequireDefault(require(\"./store\"));\n\nvar _displayoptions = _interopRequireDefault(require(\"./displayoptions\"));\n\nvar _constants = require(\"./utils/constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst CONTAINER_PATH = \"META-INF/container.xml\";\nconst IBOOKS_DISPLAY_OPTIONS_PATH = \"META-INF/com.apple.ibooks.display-options.xml\";\nconst INPUT_TYPE = {\n  BINARY: \"binary\",\n  BASE64: \"base64\",\n  EPUB: \"epub\",\n  OPF: \"opf\",\n  MANIFEST: \"json\",\n  DIRECTORY: \"directory\"\n};\n/**\n * An Epub representation with methods for the loading, parsing and manipulation\n * of its contents.\n * @class\n * @param {string} [url]\n * @param {object} [options]\n * @param {method} [options.requestMethod] a request function to use instead of the default\n * @param {boolean} [options.requestCredentials=undefined] send the xhr request withCredentials\n * @param {object} [options.requestHeaders=undefined] send the xhr request headers\n * @param {string} [options.encoding=binary] optional to pass 'binary' or base64' for archived Epubs\n * @param {string} [options.replacements=none] use base64, blobUrl, or none for replacing assets in archived Epubs\n * @param {method} [options.canonical] optional function to determine canonical urls for a path\n * @param {string} [options.openAs] optional string to determine the input type\n * @param {string} [options.store=false] cache the contents in local storage, value should be the name of the reader\n * @returns {Book}\n * @example new Book(\"/path/to/book.epub\", {})\n * @example new Book({ replacements: \"blobUrl\" })\n */\n\nclass Book {\n  constructor(url, options) {\n    // Allow passing just options to the Book\n    if (typeof options === \"undefined\" && typeof url !== \"string\" && url instanceof Blob === false && url instanceof ArrayBuffer === false) {\n      options = url;\n      url = undefined;\n    }\n\n    this.settings = (0, _core.extend)(this.settings || {}, {\n      requestMethod: undefined,\n      requestCredentials: undefined,\n      requestHeaders: undefined,\n      encoding: undefined,\n      replacements: undefined,\n      canonical: undefined,\n      openAs: undefined,\n      store: undefined\n    });\n    (0, _core.extend)(this.settings, options); // Promises\n\n    this.opening = new _core.defer();\n    /**\n     * @member {promise} opened returns after the book is loaded\n     * @memberof Book\n     */\n\n    this.opened = this.opening.promise;\n    this.isOpen = false;\n    this.loading = {\n      manifest: new _core.defer(),\n      spine: new _core.defer(),\n      metadata: new _core.defer(),\n      cover: new _core.defer(),\n      navigation: new _core.defer(),\n      pageList: new _core.defer(),\n      resources: new _core.defer(),\n      displayOptions: new _core.defer()\n    };\n    this.loaded = {\n      manifest: this.loading.manifest.promise,\n      spine: this.loading.spine.promise,\n      metadata: this.loading.metadata.promise,\n      cover: this.loading.cover.promise,\n      navigation: this.loading.navigation.promise,\n      pageList: this.loading.pageList.promise,\n      resources: this.loading.resources.promise,\n      displayOptions: this.loading.displayOptions.promise\n    };\n    /**\n     * @member {promise} ready returns after the book is loaded and parsed\n     * @memberof Book\n     * @private\n     */\n\n    this.ready = Promise.all([this.loaded.manifest, this.loaded.spine, this.loaded.metadata, this.loaded.cover, this.loaded.navigation, this.loaded.resources, this.loaded.displayOptions]); // Queue for methods used before opening\n\n    this.isRendered = false; // this._q = queue(this);\n\n    /**\n     * @member {method} request\n     * @memberof Book\n     * @private\n     */\n\n    this.request = this.settings.requestMethod || _request2.default;\n    /**\n     * @member {Spine} spine\n     * @memberof Book\n     */\n\n    this.spine = new _spine.default();\n    /**\n     * @member {Locations} locations\n     * @memberof Book\n     */\n\n    this.locations = new _locations.default(this.spine, this.load.bind(this));\n    /**\n     * @member {Navigation} navigation\n     * @memberof Book\n     */\n\n    this.navigation = undefined;\n    /**\n     * @member {PageList} pagelist\n     * @memberof Book\n     */\n\n    this.pageList = undefined;\n    /**\n     * @member {Url} url\n     * @memberof Book\n     * @private\n     */\n\n    this.url = undefined;\n    /**\n     * @member {Path} path\n     * @memberof Book\n     * @private\n     */\n\n    this.path = undefined;\n    /**\n     * @member {boolean} archived\n     * @memberof Book\n     * @private\n     */\n\n    this.archived = false;\n    /**\n     * @member {Archive} archive\n     * @memberof Book\n     * @private\n     */\n\n    this.archive = undefined;\n    /**\n     * @member {Store} storage\n     * @memberof Book\n     * @private\n     */\n\n    this.storage = undefined;\n    /**\n     * @member {Resources} resources\n     * @memberof Book\n     * @private\n     */\n\n    this.resources = undefined;\n    /**\n     * @member {Rendition} rendition\n     * @memberof Book\n     * @private\n     */\n\n    this.rendition = undefined;\n    /**\n     * @member {Container} container\n     * @memberof Book\n     * @private\n     */\n\n    this.container = undefined;\n    /**\n     * @member {Packaging} packaging\n     * @memberof Book\n     * @private\n     */\n\n    this.packaging = undefined;\n    /**\n     * @member {DisplayOptions} displayOptions\n     * @memberof DisplayOptions\n     * @private\n     */\n\n    this.displayOptions = undefined; // this.toc = undefined;\n\n    if (this.settings.store) {\n      this.store(this.settings.store);\n    }\n\n    if (url) {\n      this.open(url, this.settings.openAs).catch(error => {\n        var err = new Error(\"Cannot load book at \" + url);\n        this.emit(_constants.EVENTS.BOOK.OPEN_FAILED, err);\n      });\n    }\n  }\n  /**\n   * Open a epub or url\n   * @param {string | ArrayBuffer} input Url, Path or ArrayBuffer\n   * @param {string} [what=\"binary\", \"base64\", \"epub\", \"opf\", \"json\", \"directory\"] force opening as a certain type\n   * @returns {Promise} of when the book has been loaded\n   * @example book.open(\"/path/to/book.epub\")\n   */\n\n\n  open(input, what) {\n    var opening;\n    var type = what || this.determineType(input);\n\n    if (type === INPUT_TYPE.BINARY) {\n      this.archived = true;\n      this.url = new _url.default(\"/\", \"\");\n      opening = this.openEpub(input);\n    } else if (type === INPUT_TYPE.BASE64) {\n      this.archived = true;\n      this.url = new _url.default(\"/\", \"\");\n      opening = this.openEpub(input, type);\n    } else if (type === INPUT_TYPE.EPUB) {\n      this.archived = true;\n      this.url = new _url.default(\"/\", \"\");\n      opening = this.request(input, \"binary\", this.settings.requestCredentials, this.settings.requestHeaders).then(this.openEpub.bind(this));\n    } else if (type == INPUT_TYPE.OPF) {\n      this.url = new _url.default(input);\n      opening = this.openPackaging(this.url.Path.toString());\n    } else if (type == INPUT_TYPE.MANIFEST) {\n      this.url = new _url.default(input);\n      opening = this.openManifest(this.url.Path.toString());\n    } else {\n      this.url = new _url.default(input);\n      opening = this.openContainer(CONTAINER_PATH).then(this.openPackaging.bind(this));\n    }\n\n    return opening;\n  }\n  /**\n   * Open an archived epub\n   * @private\n   * @param  {binary} data\n   * @param  {string} [encoding]\n   * @return {Promise}\n   */\n\n\n  openEpub(data, encoding) {\n    return this.unarchive(data, encoding || this.settings.encoding).then(() => {\n      return this.openContainer(CONTAINER_PATH);\n    }).then(packagePath => {\n      return this.openPackaging(packagePath);\n    });\n  }\n  /**\n   * Open the epub container\n   * @private\n   * @param  {string} url\n   * @return {string} packagePath\n   */\n\n\n  openContainer(url) {\n    return this.load(url).then(xml => {\n      this.container = new _container.default(xml);\n      return this.resolve(this.container.packagePath);\n    });\n  }\n  /**\n   * Open the Open Packaging Format Xml\n   * @private\n   * @param  {string} url\n   * @return {Promise}\n   */\n\n\n  openPackaging(url) {\n    this.path = new _path.default(url);\n    return this.load(url).then(xml => {\n      this.packaging = new _packaging.default(xml);\n      return this.unpack(this.packaging);\n    });\n  }\n  /**\n   * Open the manifest JSON\n   * @private\n   * @param  {string} url\n   * @return {Promise}\n   */\n\n\n  openManifest(url) {\n    this.path = new _path.default(url);\n    return this.load(url).then(json => {\n      this.packaging = new _packaging.default();\n      this.packaging.load(json);\n      return this.unpack(this.packaging);\n    });\n  }\n  /**\n   * Load a resource from the Book\n   * @param  {string} path path to the resource to load\n   * @return {Promise}     returns a promise with the requested resource\n   */\n\n\n  load(path) {\n    var resolved = this.resolve(path);\n\n    if (this.archived) {\n      return this.archive.request(resolved);\n    } else {\n      return this.request(resolved, null, this.settings.requestCredentials, this.settings.requestHeaders);\n    }\n  }\n  /**\n   * Resolve a path to it's absolute position in the Book\n   * @param  {string} path\n   * @param  {boolean} [absolute] force resolving the full URL\n   * @return {string}          the resolved path string\n   */\n\n\n  resolve(path, absolute) {\n    if (!path) {\n      return;\n    }\n\n    var resolved = path;\n    var isAbsolute = path.indexOf(\"://\") > -1;\n\n    if (isAbsolute) {\n      return path;\n    }\n\n    if (this.path) {\n      resolved = this.path.resolve(path);\n    }\n\n    if (absolute != false && this.url) {\n      resolved = this.url.resolve(resolved);\n    }\n\n    return resolved;\n  }\n  /**\n   * Get a canonical link to a path\n   * @param  {string} path\n   * @return {string} the canonical path string\n   */\n\n\n  canonical(path) {\n    var url = path;\n\n    if (!path) {\n      return \"\";\n    }\n\n    if (this.settings.canonical) {\n      url = this.settings.canonical(path);\n    } else {\n      url = this.resolve(path, true);\n    }\n\n    return url;\n  }\n  /**\n   * Determine the type of they input passed to open\n   * @private\n   * @param  {string} input\n   * @return {string}  binary | directory | epub | opf\n   */\n\n\n  determineType(input) {\n    var url;\n    var path;\n    var extension;\n\n    if (this.settings.encoding === \"base64\") {\n      return INPUT_TYPE.BASE64;\n    }\n\n    if (typeof input != \"string\") {\n      return INPUT_TYPE.BINARY;\n    }\n\n    url = new _url.default(input);\n    path = url.path();\n    extension = path.extension; // If there's a search string, remove it before determining type\n\n    if (extension) {\n      extension = extension.replace(/\\?.*$/, \"\");\n    }\n\n    if (!extension) {\n      return INPUT_TYPE.DIRECTORY;\n    }\n\n    if (extension === \"epub\") {\n      return INPUT_TYPE.EPUB;\n    }\n\n    if (extension === \"opf\") {\n      return INPUT_TYPE.OPF;\n    }\n\n    if (extension === \"json\") {\n      return INPUT_TYPE.MANIFEST;\n    }\n  }\n  /**\n   * unpack the contents of the Books packaging\n   * @private\n   * @param {Packaging} packaging object\n   */\n\n\n  unpack(packaging) {\n    this.package = packaging; //TODO: deprecated this\n\n    if (this.packaging.metadata.layout === \"\") {\n      // rendition:layout not set - check display options if book is pre-paginated\n      this.load(this.url.resolve(IBOOKS_DISPLAY_OPTIONS_PATH)).then(xml => {\n        this.displayOptions = new _displayoptions.default(xml);\n        this.loading.displayOptions.resolve(this.displayOptions);\n      }).catch(err => {\n        this.displayOptions = new _displayoptions.default();\n        this.loading.displayOptions.resolve(this.displayOptions);\n      });\n    } else {\n      this.displayOptions = new _displayoptions.default();\n      this.loading.displayOptions.resolve(this.displayOptions);\n    }\n\n    this.spine.unpack(this.packaging, this.resolve.bind(this), this.canonical.bind(this));\n    this.resources = new _resources.default(this.packaging.manifest, {\n      archive: this.archive,\n      resolver: this.resolve.bind(this),\n      request: this.request.bind(this),\n      replacements: this.settings.replacements || (this.archived ? \"blobUrl\" : \"base64\")\n    });\n    this.loadNavigation(this.packaging).then(() => {\n      // this.toc = this.navigation.toc;\n      this.loading.navigation.resolve(this.navigation);\n    });\n\n    if (this.packaging.coverPath) {\n      this.cover = this.resolve(this.packaging.coverPath);\n    } // Resolve promises\n\n\n    this.loading.manifest.resolve(this.packaging.manifest);\n    this.loading.metadata.resolve(this.packaging.metadata);\n    this.loading.spine.resolve(this.spine);\n    this.loading.cover.resolve(this.cover);\n    this.loading.resources.resolve(this.resources);\n    this.loading.pageList.resolve(this.pageList);\n    this.isOpen = true;\n\n    if (this.archived || this.settings.replacements && this.settings.replacements != \"none\") {\n      this.replacements().then(() => {\n        this.loaded.displayOptions.then(() => {\n          this.opening.resolve(this);\n        });\n      }).catch(err => {\n        console.error(err);\n      });\n    } else {\n      // Resolve book opened promise\n      this.loaded.displayOptions.then(() => {\n        this.opening.resolve(this);\n      });\n    }\n  }\n  /**\n   * Load Navigation and PageList from package\n   * @private\n   * @param {Packaging} packaging\n   */\n\n\n  loadNavigation(packaging) {\n    let navPath = packaging.navPath || packaging.ncxPath;\n    let toc = packaging.toc; // From json manifest\n\n    if (toc) {\n      return new Promise((resolve, reject) => {\n        this.navigation = new _navigation.default(toc);\n\n        if (packaging.pageList) {\n          this.pageList = new _pagelist.default(packaging.pageList); // TODO: handle page lists from Manifest\n        }\n\n        resolve(this.navigation);\n      });\n    }\n\n    if (!navPath) {\n      return new Promise((resolve, reject) => {\n        this.navigation = new _navigation.default();\n        this.pageList = new _pagelist.default();\n        resolve(this.navigation);\n      });\n    }\n\n    return this.load(navPath, \"xml\").then(xml => {\n      this.navigation = new _navigation.default(xml);\n      this.pageList = new _pagelist.default(xml);\n      return this.navigation;\n    });\n  }\n  /**\n   * Gets a Section of the Book from the Spine\n   * Alias for `book.spine.get`\n   * @param {string} target\n   * @return {Section}\n   */\n\n\n  section(target) {\n    return this.spine.get(target);\n  }\n  /**\n   * Sugar to render a book to an element\n   * @param  {element | string} element element or string to add a rendition to\n   * @param  {object} [options]\n   * @return {Rendition}\n   */\n\n\n  renderTo(element, options) {\n    this.rendition = new _rendition.default(this, options);\n    this.rendition.attachTo(element);\n    return this.rendition;\n  }\n  /**\n   * Set if request should use withCredentials\n   * @param {boolean} credentials\n   */\n\n\n  setRequestCredentials(credentials) {\n    this.settings.requestCredentials = credentials;\n  }\n  /**\n   * Set headers request should use\n   * @param {object} headers\n   */\n\n\n  setRequestHeaders(headers) {\n    this.settings.requestHeaders = headers;\n  }\n  /**\n   * Unarchive a zipped epub\n   * @private\n   * @param  {binary} input epub data\n   * @param  {string} [encoding]\n   * @return {Archive}\n   */\n\n\n  unarchive(input, encoding) {\n    this.archive = new _archive.default();\n    return this.archive.open(input, encoding);\n  }\n  /**\n   * Store the epubs contents\n   * @private\n   * @param  {binary} input epub data\n   * @param  {string} [encoding]\n   * @return {Store}\n   */\n\n\n  store(name) {\n    // Use \"blobUrl\" or \"base64\" for replacements\n    let replacementsSetting = this.settings.replacements && this.settings.replacements !== \"none\"; // Save original url\n\n    let originalUrl = this.url; // Save original request method\n\n    let requester = this.settings.requestMethod || _request2.default.bind(this); // Create new Store\n\n\n    this.storage = new _store.default(name, requester, this.resolve.bind(this)); // Replace request method to go through store\n\n    this.request = this.storage.request.bind(this.storage);\n    this.opened.then(() => {\n      if (this.archived) {\n        this.storage.requester = this.archive.request.bind(this.archive);\n      } // Substitute hook\n\n\n      let substituteResources = (output, section) => {\n        section.output = this.resources.substitute(output, section.url);\n      }; // Set to use replacements\n\n\n      this.resources.settings.replacements = replacementsSetting || \"blobUrl\"; // Create replacement urls\n\n      this.resources.replacements().then(() => {\n        return this.resources.replaceCss();\n      });\n      this.storage.on(\"offline\", () => {\n        // Remove url to use relative resolving for hrefs\n        this.url = new _url.default(\"/\", \"\"); // Add hook to replace resources in contents\n\n        this.spine.hooks.serialize.register(substituteResources);\n      });\n      this.storage.on(\"online\", () => {\n        // Restore original url\n        this.url = originalUrl; // Remove hook\n\n        this.spine.hooks.serialize.deregister(substituteResources);\n      });\n    });\n    return this.storage;\n  }\n  /**\n   * Get the cover url\n   * @return {Promise<?string>} coverUrl\n   */\n\n\n  coverUrl() {\n    return this.loaded.cover.then(() => {\n      if (!this.cover) {\n        return null;\n      }\n\n      if (this.archived) {\n        return this.archive.createUrl(this.cover);\n      } else {\n        return this.cover;\n      }\n    });\n  }\n  /**\n   * Load replacement urls\n   * @private\n   * @return {Promise} completed loading urls\n   */\n\n\n  replacements() {\n    this.spine.hooks.serialize.register((output, section) => {\n      section.output = this.resources.substitute(output, section.url);\n    });\n    return this.resources.replacements().then(() => {\n      return this.resources.replaceCss();\n    });\n  }\n  /**\n   * Find a DOM Range for a given CFI Range\n   * @param  {EpubCFI} cfiRange a epub cfi range\n   * @return {Promise}\n   */\n\n\n  getRange(cfiRange) {\n    var cfi = new _epubcfi.default(cfiRange);\n    var item = this.spine.get(cfi.spinePos);\n\n    var _request = this.load.bind(this);\n\n    if (!item) {\n      return new Promise((resolve, reject) => {\n        reject(\"CFI could not be found\");\n      });\n    }\n\n    return item.load(_request).then(function (contents) {\n      var range = cfi.toRange(item.document);\n      return range;\n    });\n  }\n  /**\n   * Generates the Book Key using the identifier in the manifest or other string provided\n   * @param  {string} [identifier] to use instead of metadata identifier\n   * @return {string} key\n   */\n\n\n  key(identifier) {\n    var ident = identifier || this.packaging.metadata.identifier || this.url.filename;\n    return `epubjs:${_constants.EPUBJS_VERSION}:${ident}`;\n  }\n  /**\n   * Destroy the Book and all associated objects\n   */\n\n\n  destroy() {\n    this.opened = undefined;\n    this.loading = undefined;\n    this.loaded = undefined;\n    this.ready = undefined;\n    this.isOpen = false;\n    this.isRendered = false;\n    this.spine && this.spine.destroy();\n    this.locations && this.locations.destroy();\n    this.pageList && this.pageList.destroy();\n    this.archive && this.archive.destroy();\n    this.resources && this.resources.destroy();\n    this.container && this.container.destroy();\n    this.packaging && this.packaging.destroy();\n    this.rendition && this.rendition.destroy();\n    this.displayOptions && this.displayOptions.destroy();\n    this.spine = undefined;\n    this.locations = undefined;\n    this.pageList = undefined;\n    this.archive = undefined;\n    this.resources = undefined;\n    this.container = undefined;\n    this.packaging = undefined;\n    this.rendition = undefined;\n    this.navigation = undefined;\n    this.url = undefined;\n    this.path = undefined;\n    this.archived = false;\n  }\n\n} //-- Enable binding events to book\n\n\n(0, _eventEmitter.default)(Book.prototype);\nvar _default = Book;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _book = _interopRequireDefault(require(\"./book\"));\n\nvar _rendition = _interopRequireDefault(require(\"./rendition\"));\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _contents = _interopRequireDefault(require(\"./contents\"));\n\nvar utils = _interopRequireWildcard(require(\"./utils/core\"));\n\nvar _constants = require(\"./utils/constants\");\n\nvar _iframe = _interopRequireDefault(require(\"./managers/views/iframe\"));\n\nvar _default2 = _interopRequireDefault(require(\"./managers/default\"));\n\nvar _continuous = _interopRequireDefault(require(\"./managers/continuous\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Creates a new Book\n * @param {string|ArrayBuffer} url URL, Path or ArrayBuffer\n * @param {object} options to pass to the book\n * @returns {Book} a new Book object\n * @example ePub(\"/path/to/book.epub\", {})\n */\nfunction ePub(url, options) {\n  return new _book.default(url, options);\n}\n\nePub.VERSION = _constants.EPUBJS_VERSION;\n\nif (typeof global !== \"undefined\") {\n  global.EPUBJS_VERSION = _constants.EPUBJS_VERSION;\n}\n\nePub.Book = _book.default;\nePub.Rendition = _rendition.default;\nePub.Contents = _contents.default;\nePub.CFI = _epubcfi.default;\nePub.utils = utils;\nvar _default = ePub;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Book\", {\n  enumerable: true,\n  get: function () {\n    return _book.default;\n  }\n});\nObject.defineProperty(exports, \"Contents\", {\n  enumerable: true,\n  get: function () {\n    return _contents.default;\n  }\n});\nObject.defineProperty(exports, \"EpubCFI\", {\n  enumerable: true,\n  get: function () {\n    return _epubcfi.default;\n  }\n});\nObject.defineProperty(exports, \"Layout\", {\n  enumerable: true,\n  get: function () {\n    return _layout.default;\n  }\n});\nObject.defineProperty(exports, \"Rendition\", {\n  enumerable: true,\n  get: function () {\n    return _rendition.default;\n  }\n});\nexports.default = void 0;\n\nvar _book = _interopRequireDefault(require(\"./book\"));\n\nvar _epubcfi = _interopRequireDefault(require(\"./epubcfi\"));\n\nvar _rendition = _interopRequireDefault(require(\"./rendition\"));\n\nvar _contents = _interopRequireDefault(require(\"./contents\"));\n\nvar _layout = _interopRequireDefault(require(\"./layout\"));\n\nvar _epub = _interopRequireDefault(require(\"./epub\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = _epub.default;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EpubViewStyle = void 0;\nvar EpubViewStyle = {\n  viewHolder: {\n    position: 'relative',\n    height: '100%',\n    width: '100%'\n  },\n  view: {\n    height: '100%'\n  }\n};\nexports.EpubViewStyle = EpubViewStyle;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _index = _interopRequireDefault(require(\"epubjs/lib/index\"));\nvar _style = require(\"./style\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n// MTL removed - line does not seem like a requirement any more (and was causing an error)\n// global.ePub = Epub; // Fix for v3 branch of epub.js -> needs ePub to by a global var\nvar EpubView = /*#__PURE__*/function (_Component) {\n  _inherits(EpubView, _Component);\n  var _super = _createSuper(EpubView);\n  function EpubView(props) {\n    var _this;\n    _classCallCheck(this, EpubView);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"onLocationChange\", function (loc) {\n      var _this$props = _this.props,\n        location = _this$props.location,\n        locationChanged = _this$props.locationChanged;\n      var newLocation = loc && loc.start;\n      if (location !== newLocation) {\n        _this.location = newLocation;\n        locationChanged && locationChanged(newLocation);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyPress\", function (_ref) {\n      var key = _ref.key;\n      key && key === 'ArrowRight' && _this.nextPage();\n      key && key === 'ArrowLeft' && _this.prevPage();\n    });\n    _this.state = {\n      isLoaded: false,\n      toc: []\n    };\n    _this.viewerRef = /*#__PURE__*/_react.default.createRef();\n    _this.location = props.location;\n    _this.book = _this.rendition = _this.prevPage = _this.nextPage = null;\n    return _this;\n  }\n  _createClass(EpubView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initBook(true);\n      document.addEventListener('keyup', this.handleKeyPress, false);\n    }\n  }, {\n    key: \"initBook\",\n    value: function initBook() {\n      var _this2 = this;\n      var _this$props2 = this.props,\n        url = _this$props2.url,\n        tocChanged = _this$props2.tocChanged,\n        epubInitOptions = _this$props2.epubInitOptions;\n      if (this.book) {\n        this.book.destroy();\n      }\n      this.book = new _index.default(url, epubInitOptions);\n      this.book.loaded.navigation.then(function (_ref2) {\n        var toc = _ref2.toc;\n        _this2.setState({\n          isLoaded: true,\n          toc: toc\n        }, function () {\n          tocChanged && tocChanged(toc);\n          _this2.initReader();\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.book) {\n        this.book.destroy();\n      }\n      this.book = this.rendition = this.prevPage = this.nextPage = null;\n      document.removeEventListener('keyup', this.handleKeyPress, false);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !this.state.isLoaded || nextProps.location !== this.props.location || nextProps.url !== this.props.url;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.location !== this.props.location && this.location !== this.props.location) {\n        this.rendition.display(this.props.location);\n      }\n      if (prevProps.url !== this.props.url) {\n        this.initBook();\n      }\n    }\n  }, {\n    key: \"initReader\",\n    value: function initReader() {\n      var _this3 = this;\n      var toc = this.state.toc;\n      var _this$props3 = this.props,\n        location = _this$props3.location,\n        epubOptions = _this$props3.epubOptions,\n        getRendition = _this$props3.getRendition;\n      var node = this.viewerRef.current;\n      this.rendition = this.book.renderTo(node, _objectSpread({\n        contained: true,\n        width: '100%',\n        height: '100%'\n      }, epubOptions));\n      this.prevPage = function () {\n        _this3.rendition.prev();\n      };\n      this.nextPage = function () {\n        _this3.rendition.next();\n      };\n      this.registerEvents();\n      getRendition && getRendition(this.rendition);\n      if (typeof location === 'string' || typeof location === 'number') {\n        this.rendition.display(location);\n      } else if (toc.length > 0 && toc[0].href) {\n        this.rendition.display(toc[0].href);\n      } else {\n        this.rendition.display();\n      }\n    }\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _this$props4 = this.props,\n        handleKeyPress = _this$props4.handleKeyPress,\n        handleTextSelected = _this$props4.handleTextSelected;\n      this.rendition.on('locationChanged', this.onLocationChange);\n      this.rendition.on('keyup', handleKeyPress || this.handleKeyPress);\n      if (handleTextSelected) {\n        this.rendition.on('selected', handleTextSelected);\n      }\n    }\n  }, {\n    key: \"renderBook\",\n    value: function renderBook() {\n      var epubViewStyles = this.props.epubViewStyles;\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        ref: this.viewerRef,\n        style: epubViewStyles.view\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isLoaded = this.state.isLoaded;\n      var _this$props5 = this.props,\n        loadingView = _this$props5.loadingView,\n        epubViewStyles = _this$props5.epubViewStyles;\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: epubViewStyles.viewHolder\n      }, isLoaded && this.renderBook() || loadingView);\n    }\n  }]);\n  return EpubView;\n}(_react.Component);\nEpubView.defaultProps = {\n  loadingView: null,\n  locationChanged: null,\n  tocChanged: null,\n  epubViewStyles: _style.EpubViewStyle,\n  epubOptions: {},\n  epubInitOptions: {}\n};\nEpubView.propTypes = {\n  url: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.instanceOf(ArrayBuffer)]),\n  loadingView: _propTypes.default.element,\n  location: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  locationChanged: _propTypes.default.func,\n  tocChanged: _propTypes.default.func,\n  epubViewStyles: _propTypes.default.object,\n  epubInitOptions: _propTypes.default.object,\n  epubOptions: _propTypes.default.object,\n  getRendition: _propTypes.default.func,\n  handleKeyPress: _propTypes.default.func,\n  handleTextSelected: _propTypes.default.func\n};\nvar _default = EpubView;\nexports.default = _default;", "import * as React from \"react\";\n\nexport const LEFT = \"Left\";\nexport const RIGHT = \"Right\";\nexport const UP = \"Up\";\nexport const DOWN = \"Down\";\nexport type HandledEvents = React.MouseEvent | TouchEvent | MouseEvent;\nexport type Vector2 = [number, number];\nexport type SwipeDirections =\n  | typeof LEFT\n  | typeof RIGHT\n  | typeof UP\n  | typeof DOWN;\nexport interface SwipeEventData {\n  /**\n   * Absolute displacement of swipe in x. Math.abs(deltaX);\n   */\n  absX: number;\n  /**\n   * Absolute displacement of swipe in y. Math.abs(deltaY);\n   */\n  absY: number;\n  /**\n   * Displacement of swipe in x. (current.x - initial.x)\n   */\n  deltaX: number;\n  /**\n   * Displacement of swipe in y. (current.y - initial.y)\n   */\n  deltaY: number;\n  /**\n   * Direction of swipe - Left | Right | Up | Down\n   */\n  dir: SwipeDirections;\n  /**\n   * Source event.\n   */\n  event: HandledEvents;\n  /**\n   * True for the first event of a tracked swipe.\n   */\n  first: boolean;\n  /**\n   * Location where swipe started - [x, y].\n   */\n  initial: Vector2;\n  /**\n   * \"Absolute velocity\" (speed) - (absX^2 + absY^2) / time\n   */\n  velocity: number;\n  /**\n   * Velocity per axis - [ deltaX/time, deltaY/time ]\n   */\n  vxvy: Vector2;\n}\n\nexport type SwipeCallback = (eventData: SwipeEventData) => void;\nexport type TapCallback = ({ event }: { event: HandledEvents }) => void;\n\nexport type SwipeableDirectionCallbacks = {\n  /**\n   * Called after a DOWN swipe\n   */\n  onSwipedDown: SwipeCallback;\n  /**\n   * Called after a LEFT swipe\n   */\n  onSwipedLeft: SwipeCallback;\n  /**\n   * Called after a RIGHT swipe\n   */\n  onSwipedRight: SwipeCallback;\n  /**\n   * Called after a UP swipe\n   */\n  onSwipedUp: SwipeCallback;\n};\n\nexport type SwipeableCallbacks = SwipeableDirectionCallbacks & {\n  /**\n   * Called at start of a tracked swipe.\n   */\n  onSwipeStart: SwipeCallback;\n  /**\n   * Called after any swipe.\n   */\n  onSwiped: SwipeCallback;\n  /**\n   * Called for each move event during a tracked swipe.\n   */\n  onSwiping: SwipeCallback;\n  /**\n   * Called after a tap. A touch under the min distance, `delta`.\n   */\n  onTap: TapCallback;\n  /**\n   * Called for `touchstart` and `mousedown`.\n   */\n  onTouchStartOrOnMouseDown: TapCallback;\n  /**\n   * Called for `touchend` and `mouseup`.\n   */\n  onTouchEndOrOnMouseUp: TapCallback;\n};\n\n// Configuration Options\nexport type ConfigurationOptionDelta =\n  | number\n  | { [key in Lowercase<SwipeDirections>]?: number };\n\nexport interface ConfigurationOptions {\n  /**\n   * Min distance(px) before a swipe starts. **Default**: `10`\n   */\n  delta: ConfigurationOptionDelta;\n  /**\n   * Prevents scroll during swipe in most cases. **Default**: `false`\n   */\n  preventScrollOnSwipe: boolean;\n  /**\n   * Set a rotation angle. **Default**: `0`\n   */\n  rotationAngle: number;\n  /**\n   * Track mouse input. **Default**: `false`\n   */\n  trackMouse: boolean;\n  /**\n   * Track touch input. **Default**: `true`\n   */\n  trackTouch: boolean;\n  /**\n   * Allowable duration of a swipe (ms). **Default**: `Infinity`\n   */\n  swipeDuration: number;\n  /**\n   * Options for touch event listeners\n   */\n  touchEventOptions: { passive: boolean };\n}\n\nexport type SwipeableProps = Partial<SwipeableCallbacks & ConfigurationOptions>;\n\nexport type SwipeablePropsWithDefaultOptions = Partial<SwipeableCallbacks> &\n  ConfigurationOptions;\n\nexport interface SwipeableHandlers {\n  ref(element: HTMLElement | null): void;\n  onMouseDown?(event: React.MouseEvent): void;\n}\n\nexport type SwipeableState = {\n  cleanUpTouch?: () => void;\n  el?: HTMLElement;\n  eventData?: SwipeEventData;\n  first: boolean;\n  initial: Vector2;\n  start: number;\n  swiping: boolean;\n  xy: Vector2;\n};\n\nexport type StateSetter = (\n  state: SwipeableState,\n  props: SwipeablePropsWithDefaultOptions\n) => SwipeableState;\nexport type Setter = (stateSetter: StateSetter) => void;\nexport type AttachTouch = (\n  el: HTMLElement,\n  props: SwipeablePropsWithDefaultOptions\n) => () => void;\n", "/* global document */\nimport * as React from \"react\";\nimport {\n  AttachTouch,\n  SwipeDirections,\n  DOWN,\n  SwipeEventData,\n  HandledEvents,\n  LEFT,\n  RIGHT,\n  Setter,\n  ConfigurationOptions,\n  SwipeableDirectionCallbacks,\n  SwipeableHandlers,\n  SwipeableProps,\n  SwipeablePropsWithDefaultOptions,\n  SwipeableState,\n  SwipeCallback,\n  TapCallback,\n  UP,\n  Vector2,\n} from \"./types\";\n\nexport {\n  LEFT,\n  RIGHT,\n  UP,\n  DOWN,\n  SwipeDirections,\n  SwipeEventData,\n  SwipeableDirectionCallbacks,\n  SwipeCallback,\n  TapCallback,\n  SwipeableHandlers,\n  SwipeableProps,\n  Vector2,\n};\n\nconst defaultProps: ConfigurationOptions = {\n  delta: 10,\n  preventScrollOnSwipe: false,\n  rotationAngle: 0,\n  trackMouse: false,\n  trackTouch: true,\n  swipeDuration: Infinity,\n  touchEventOptions: { passive: true },\n};\nconst initialState: SwipeableState = {\n  first: true,\n  initial: [0, 0],\n  start: 0,\n  swiping: false,\n  xy: [0, 0],\n};\nconst mouseMove = \"mousemove\";\nconst mouseUp = \"mouseup\";\nconst touchEnd = \"touchend\";\nconst touchMove = \"touchmove\";\nconst touchStart = \"touchstart\";\n\nfunction getDirection(\n  absX: number,\n  absY: number,\n  deltaX: number,\n  deltaY: number\n): SwipeDirections {\n  if (absX > absY) {\n    if (deltaX > 0) {\n      return RIGHT;\n    }\n    return LEFT;\n  } else if (deltaY > 0) {\n    return DOWN;\n  }\n  return UP;\n}\n\nfunction rotateXYByAngle(pos: Vector2, angle: number): Vector2 {\n  if (angle === 0) return pos;\n  const angleInRadians = (Math.PI / 180) * angle;\n  const x =\n    pos[0] * Math.cos(angleInRadians) + pos[1] * Math.sin(angleInRadians);\n  const y =\n    pos[1] * Math.cos(angleInRadians) - pos[0] * Math.sin(angleInRadians);\n  return [x, y];\n}\n\nfunction getHandlers(\n  set: Setter,\n  handlerProps: { trackMouse: boolean | undefined }\n): [\n  {\n    ref: (element: HTMLElement | null) => void;\n    onMouseDown?: (event: React.MouseEvent) => void;\n  },\n  AttachTouch\n] {\n  const onStart = (event: HandledEvents) => {\n    const isTouch = \"touches\" in event;\n    // if more than a single touch don't track, for now...\n    if (isTouch && event.touches.length > 1) return;\n\n    set((state, props) => {\n      // setup mouse listeners on document to track swipe since swipe can leave container\n      if (props.trackMouse && !isTouch) {\n        document.addEventListener(mouseMove, onMove);\n        document.addEventListener(mouseUp, onUp);\n      }\n      const { clientX, clientY } = isTouch ? event.touches[0] : event;\n      const xy = rotateXYByAngle([clientX, clientY], props.rotationAngle);\n\n      props.onTouchStartOrOnMouseDown &&\n        props.onTouchStartOrOnMouseDown({ event });\n\n      return {\n        ...state,\n        ...initialState,\n        initial: xy.slice() as Vector2,\n        xy,\n        start: event.timeStamp || 0,\n      };\n    });\n  };\n\n  const onMove = (event: HandledEvents) => {\n    set((state, props) => {\n      const isTouch = \"touches\" in event;\n      // Discount a swipe if additional touches are present after\n      // a swipe has started.\n      if (isTouch && event.touches.length > 1) {\n        return state;\n      }\n\n      // if swipe has exceeded duration stop tracking\n      if (event.timeStamp - state.start > props.swipeDuration) {\n        return state.swiping ? { ...state, swiping: false } : state;\n      }\n\n      const { clientX, clientY } = isTouch ? event.touches[0] : event;\n      const [x, y] = rotateXYByAngle([clientX, clientY], props.rotationAngle);\n      const deltaX = x - state.xy[0];\n      const deltaY = y - state.xy[1];\n      const absX = Math.abs(deltaX);\n      const absY = Math.abs(deltaY);\n      const time = (event.timeStamp || 0) - state.start;\n      const velocity = Math.sqrt(absX * absX + absY * absY) / (time || 1);\n      const vxvy: Vector2 = [deltaX / (time || 1), deltaY / (time || 1)];\n\n      const dir = getDirection(absX, absY, deltaX, deltaY);\n\n      // if swipe is under delta and we have not started to track a swipe: skip update\n      const delta =\n        typeof props.delta === \"number\"\n          ? props.delta\n          : props.delta[dir.toLowerCase() as Lowercase<SwipeDirections>] ||\n            defaultProps.delta;\n      if (absX < delta && absY < delta && !state.swiping) return state;\n\n      const eventData = {\n        absX,\n        absY,\n        deltaX,\n        deltaY,\n        dir,\n        event,\n        first: state.first,\n        initial: state.initial,\n        velocity,\n        vxvy,\n      };\n\n      // call onSwipeStart if present and is first swipe event\n      eventData.first && props.onSwipeStart && props.onSwipeStart(eventData);\n\n      // call onSwiping if present\n      props.onSwiping && props.onSwiping(eventData);\n\n      // track if a swipe is cancelable (handler for swiping or swiped(dir) exists)\n      // so we can call preventDefault if needed\n      let cancelablePageSwipe = false;\n      if (\n        props.onSwiping ||\n        props.onSwiped ||\n        props[`onSwiped${dir}` as keyof SwipeableDirectionCallbacks]\n      ) {\n        cancelablePageSwipe = true;\n      }\n\n      if (\n        cancelablePageSwipe &&\n        props.preventScrollOnSwipe &&\n        props.trackTouch &&\n        event.cancelable\n      ) {\n        event.preventDefault();\n      }\n\n      return {\n        ...state,\n        // first is now always false\n        first: false,\n        eventData,\n        swiping: true,\n      };\n    });\n  };\n\n  const onEnd = (event: HandledEvents) => {\n    set((state, props) => {\n      let eventData: SwipeEventData | undefined;\n      if (state.swiping && state.eventData) {\n        // if swipe is less than duration fire swiped callbacks\n        if (event.timeStamp - state.start < props.swipeDuration) {\n          eventData = { ...state.eventData, event };\n          props.onSwiped && props.onSwiped(eventData);\n\n          const onSwipedDir =\n            props[\n              `onSwiped${eventData.dir}` as keyof SwipeableDirectionCallbacks\n            ];\n          onSwipedDir && onSwipedDir(eventData);\n        }\n      } else {\n        props.onTap && props.onTap({ event });\n      }\n\n      props.onTouchEndOrOnMouseUp && props.onTouchEndOrOnMouseUp({ event });\n\n      return { ...state, ...initialState, eventData };\n    });\n  };\n\n  const cleanUpMouse = () => {\n    // safe to just call removeEventListener\n    document.removeEventListener(mouseMove, onMove);\n    document.removeEventListener(mouseUp, onUp);\n  };\n\n  const onUp = (e: HandledEvents) => {\n    cleanUpMouse();\n    onEnd(e);\n  };\n\n  /**\n   * The value of passive on touchMove depends on `preventScrollOnSwipe`:\n   * - true => { passive: false }\n   * - false => { passive: true } // Default\n   *\n   * NOTE: When preventScrollOnSwipe is true, we attempt to call preventDefault to prevent scroll.\n   *\n   * props.touchEventOptions can also be set for all touch event listeners,\n   * but for `touchmove` specifically when `preventScrollOnSwipe` it will\n   * supersede and force passive to false.\n   *\n   */\n  const attachTouch: AttachTouch = (el, props) => {\n    let cleanup = () => {};\n    if (el && el.addEventListener) {\n      const baseOptions = {\n        ...defaultProps.touchEventOptions,\n        ...props.touchEventOptions,\n      };\n      // attach touch event listeners and handlers\n      const tls: [\n        typeof touchStart | typeof touchMove | typeof touchEnd,\n        (e: HandledEvents) => void,\n        { passive: boolean }\n      ][] = [\n        [touchStart, onStart, baseOptions],\n        // preventScrollOnSwipe option supersedes touchEventOptions.passive\n        [\n          touchMove,\n          onMove,\n          {\n            ...baseOptions,\n            ...(props.preventScrollOnSwipe ? { passive: false } : {}),\n          },\n        ],\n        [touchEnd, onEnd, baseOptions],\n      ];\n      tls.forEach(([e, h, o]) => el.addEventListener(e, h, o));\n      // return properly scoped cleanup method for removing listeners, options not required\n      cleanup = () => tls.forEach(([e, h]) => el.removeEventListener(e, h));\n    }\n    return cleanup;\n  };\n\n  const onRef = (el: HTMLElement | null) => {\n    // \"inline\" ref functions are called twice on render, once with null then again with DOM element\n    // ignore null here\n    if (el === null) return;\n    set((state, props) => {\n      // if the same DOM el as previous just return state\n      if (state.el === el) return state;\n\n      const addState: { cleanUpTouch?: () => void } = {};\n      // if new DOM el clean up old DOM and reset cleanUpTouch\n      if (state.el && state.el !== el && state.cleanUpTouch) {\n        state.cleanUpTouch();\n        addState.cleanUpTouch = void 0;\n      }\n      // only attach if we want to track touch\n      if (props.trackTouch && el) {\n        addState.cleanUpTouch = attachTouch(el, props);\n      }\n\n      // store event attached DOM el for comparison, clean up, and re-attachment\n      return { ...state, el, ...addState };\n    });\n  };\n\n  // set ref callback to attach touch event listeners\n  const output: { ref: typeof onRef; onMouseDown?: typeof onStart } = {\n    ref: onRef,\n  };\n\n  // if track mouse attach mouse down listener\n  if (handlerProps.trackMouse) {\n    output.onMouseDown = onStart;\n  }\n\n  return [output, attachTouch];\n}\n\nfunction updateTransientState(\n  state: SwipeableState,\n  props: SwipeablePropsWithDefaultOptions,\n  previousProps: SwipeablePropsWithDefaultOptions,\n  attachTouch: AttachTouch\n) {\n  // if trackTouch is off or there is no el, then remove handlers if necessary and exit\n  if (!props.trackTouch || !state.el) {\n    if (state.cleanUpTouch) {\n      state.cleanUpTouch();\n    }\n\n    return {\n      ...state,\n      cleanUpTouch: undefined,\n    };\n  }\n\n  // trackTouch is on, so if there are no handlers attached, attach them and exit\n  if (!state.cleanUpTouch) {\n    return {\n      ...state,\n      cleanUpTouch: attachTouch(state.el, props),\n    };\n  }\n\n  // trackTouch is on and handlers are already attached, so if preventScrollOnSwipe changes value,\n  // remove and reattach handlers (this is required to update the passive option when attaching\n  // the handlers)\n  if (\n    props.preventScrollOnSwipe !== previousProps.preventScrollOnSwipe ||\n    props.touchEventOptions.passive !== previousProps.touchEventOptions.passive\n  ) {\n    state.cleanUpTouch();\n\n    return {\n      ...state,\n      cleanUpTouch: attachTouch(state.el, props),\n    };\n  }\n\n  return state;\n}\n\nexport function useSwipeable(options: SwipeableProps): SwipeableHandlers {\n  const { trackMouse } = options;\n  const transientState = React.useRef({ ...initialState });\n  const transientProps = React.useRef<SwipeablePropsWithDefaultOptions>({\n    ...defaultProps,\n  });\n\n  // track previous rendered props\n  const previousProps = React.useRef<SwipeablePropsWithDefaultOptions>({\n    ...transientProps.current,\n  });\n  previousProps.current = { ...transientProps.current };\n\n  // update current render props & defaults\n  transientProps.current = {\n    ...defaultProps,\n    ...options,\n  };\n  // Force defaults for config properties\n  let defaultKey: keyof ConfigurationOptions;\n  for (defaultKey in defaultProps) {\n    if (transientProps.current[defaultKey] === void 0) {\n      (transientProps.current[defaultKey] as any) = defaultProps[defaultKey];\n    }\n  }\n\n  const [handlers, attachTouch] = React.useMemo(\n    () =>\n      getHandlers(\n        (stateSetter) =>\n          (transientState.current = stateSetter(\n            transientState.current,\n            transientProps.current\n          )),\n        { trackMouse }\n      ),\n    [trackMouse]\n  );\n\n  transientState.current = updateTransientState(\n    transientState.current,\n    transientProps.current,\n    previousProps.current,\n    attachTouch\n  );\n\n  return handlers;\n}\n", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReactReaderStyle = void 0;\nvar ReactReaderStyle = {\n  container: {\n    overflow: 'hidden',\n    position: 'relative',\n    height: '100%'\n  },\n  readerArea: {\n    position: 'relative',\n    zIndex: 1,\n    height: '100%',\n    width: '100%',\n    backgroundColor: '#fff',\n    transition: 'all .3s ease'\n  },\n  containerExpanded: {\n    transform: 'translateX(256px)'\n  },\n  titleArea: {\n    position: 'absolute',\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: 'center',\n    color: '#999'\n  },\n  reader: {\n    position: 'absolute',\n    top: 50,\n    left: 50,\n    bottom: 20,\n    right: 50\n  },\n  swipeWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200\n  },\n  prev: {\n    left: 1\n  },\n  next: {\n    right: 1\n  },\n  arrow: {\n    outline: 'none',\n    border: 'none',\n    background: 'none',\n    position: 'absolute',\n    top: '50%',\n    marginTop: -32,\n    fontSize: 64,\n    padding: '0 10px',\n    color: '#E2E2E2',\n    fontFamily: 'arial, sans-serif',\n    cursor: 'pointer',\n    userSelect: 'none',\n    appearance: 'none',\n    fontWeight: 'normal'\n  },\n  arrowHover: {\n    color: '#777'\n  },\n  tocBackground: {\n    position: 'absolute',\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1\n  },\n  tocArea: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    background: '#f2f2f2',\n    padding: '10px 0'\n  },\n  tocAreaButton: {\n    userSelect: 'none',\n    appearance: 'none',\n    background: 'none',\n    border: 'none',\n    display: 'block',\n    fontFamily: 'sans-serif',\n    width: '100%',\n    fontSize: '.9em',\n    textAlign: 'left',\n    padding: '.9em 1em',\n    borderBottom: '1px solid #ddd',\n    color: '#aaa',\n    boxSizing: 'border-box',\n    outline: 'none',\n    cursor: 'pointer'\n  },\n  tocButton: {\n    background: 'none',\n    border: 'none',\n    width: 32,\n    height: 32,\n    position: 'absolute',\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: 'none',\n    cursor: 'pointer'\n  },\n  tocButtonExpanded: {\n    background: '#f2f2f2'\n  },\n  tocButtonBar: {\n    position: 'absolute',\n    width: '60%',\n    background: '#ccc',\n    height: 2,\n    left: '50%',\n    margin: '-1px -30%',\n    top: '50%',\n    transition: 'all .5s ease'\n  },\n  tocButtonBarTop: {\n    top: '35%'\n  },\n  tocButtonBottom: {\n    top: '66%'\n  },\n  loadingView: {\n    position: 'absolute',\n    top: '50%',\n    left: '10%',\n    right: '10%',\n    color: '#ccc',\n    textAlign: 'center',\n    margintop: '-.5em'\n  }\n};\nexports.ReactReaderStyle = ReactReaderStyle;", "\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactSwipeable = require(\"react-swipeable\");\nvar _ = require(\"..\");\nvar _style = require(\"./style\");\nvar _excluded = [\"children\"],\n  _excluded2 = [\"title\", \"showToc\", \"loadingView\", \"readerStyles\", \"locationChanged\", \"swipeable\", \"epubViewStyles\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nvar Swipeable = function Swipeable(_ref) {\n  var children = _ref.children,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var handlers = (0, _reactSwipeable.useSwipeable)(props);\n  return /*#__PURE__*/_react.default.createElement(\"div\", handlers, children);\n};\nvar TocItem = /*#__PURE__*/function (_PureComponent) {\n  _inherits(TocItem, _PureComponent);\n  var _super = _createSuper(TocItem);\n  function TocItem() {\n    var _this;\n    _classCallCheck(this, TocItem);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"setLocation\", function () {\n      _this.props.setLocation(_this.props.href);\n    });\n    return _this;\n  }\n  _createClass(TocItem, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props = this.props,\n        label = _this$props.label,\n        styles = _this$props.styles,\n        subitems = _this$props.subitems;\n      return /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(\"button\", {\n        onClick: this.setLocation,\n        style: styles\n      }, label), subitems && subitems.length > 0 && /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: {\n          paddingLeft: 10\n        }\n      }, subitems.map(function (item, i) {\n        return /*#__PURE__*/_react.default.createElement(TocItem, _extends({\n          key: i\n        }, _this2.props, item));\n      })));\n    }\n  }]);\n  return TocItem;\n}(_react.PureComponent);\nTocItem.propTypes = {\n  label: _propTypes.default.string,\n  href: _propTypes.default.string,\n  setLocation: _propTypes.default.func,\n  styles: _propTypes.default.object\n};\nvar ReactReader = /*#__PURE__*/function (_PureComponent2) {\n  _inherits(ReactReader, _PureComponent2);\n  var _super2 = _createSuper(ReactReader);\n  function ReactReader(props) {\n    var _this3;\n    _classCallCheck(this, ReactReader);\n    _this3 = _super2.call(this, props);\n    _defineProperty(_assertThisInitialized(_this3), \"toggleToc\", function () {\n      _this3.setState({\n        expandedToc: !_this3.state.expandedToc\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this3), \"next\", function () {\n      var node = _this3.readerRef.current;\n      node.nextPage();\n    });\n    _defineProperty(_assertThisInitialized(_this3), \"prev\", function () {\n      var node = _this3.readerRef.current;\n      node.prevPage();\n    });\n    _defineProperty(_assertThisInitialized(_this3), \"onTocChange\", function (toc) {\n      var tocChanged = _this3.props.tocChanged;\n      _this3.setState({\n        toc: toc\n      }, function () {\n        return tocChanged && tocChanged(toc);\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this3), \"setLocation\", function (loc) {\n      var locationChanged = _this3.props.locationChanged;\n      _this3.setState({\n        expandedToc: false\n      }, function () {\n        return locationChanged && locationChanged(loc);\n      });\n    });\n    _this3.readerRef = /*#__PURE__*/_react.default.createRef();\n    _this3.state = {\n      expandedToc: false,\n      toc: false\n    };\n    return _this3;\n  }\n  _createClass(ReactReader, [{\n    key: \"renderToc\",\n    value: function renderToc() {\n      var _this4 = this;\n      var _this$state = this.state,\n        toc = _this$state.toc,\n        expandedToc = _this$state.expandedToc;\n      var readerStyles = this.props.readerStyles;\n      return /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.tocArea\n      }, /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.toc\n      }, toc.map(function (item, i) {\n        return /*#__PURE__*/_react.default.createElement(TocItem, _extends({}, item, {\n          key: i,\n          setLocation: _this4.setLocation,\n          styles: readerStyles.tocAreaButton\n        }));\n      }))), expandedToc && /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.tocBackground,\n        onClick: this.toggleToc\n      }));\n    }\n  }, {\n    key: \"renderTocToggle\",\n    value: function renderTocToggle() {\n      var expandedToc = this.state.expandedToc;\n      var readerStyles = this.props.readerStyles;\n      return /*#__PURE__*/_react.default.createElement(\"button\", {\n        style: Object.assign({}, readerStyles.tocButton, expandedToc ? readerStyles.tocButtonExpanded : {}),\n        onClick: this.toggleToc\n      }, /*#__PURE__*/_react.default.createElement(\"span\", {\n        style: Object.assign({}, readerStyles.tocButtonBar, readerStyles.tocButtonBarTop)\n      }), /*#__PURE__*/_react.default.createElement(\"span\", {\n        style: Object.assign({}, readerStyles.tocButtonBar, readerStyles.tocButtonBottom)\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        title = _this$props2.title,\n        showToc = _this$props2.showToc,\n        loadingView = _this$props2.loadingView,\n        readerStyles = _this$props2.readerStyles,\n        locationChanged = _this$props2.locationChanged,\n        swipeable = _this$props2.swipeable,\n        epubViewStyles = _this$props2.epubViewStyles,\n        props = _objectWithoutProperties(_this$props2, _excluded2);\n      var _this$state2 = this.state,\n        toc = _this$state2.toc,\n        expandedToc = _this$state2.expandedToc;\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.container\n      }, /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: Object.assign({}, readerStyles.readerArea, expandedToc ? readerStyles.containerExpanded : {})\n      }, showToc && this.renderTocToggle(), /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.titleArea\n      }, title), /*#__PURE__*/_react.default.createElement(Swipeable, {\n        onSwipedRight: this.prev,\n        onSwipedLeft: this.next,\n        trackMouse: true\n      }, /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.reader\n      }, /*#__PURE__*/_react.default.createElement(_.EpubView, _extends({\n        ref: this.readerRef,\n        loadingView: loadingView,\n        epubViewStyles: epubViewStyles\n      }, props, {\n        tocChanged: this.onTocChange,\n        locationChanged: locationChanged\n      })), swipeable && /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: readerStyles.swipeWrapper\n      }))), /*#__PURE__*/_react.default.createElement(\"button\", {\n        style: Object.assign({}, readerStyles.arrow, readerStyles.prev),\n        onClick: this.prev\n      }, \"\\u2039\"), /*#__PURE__*/_react.default.createElement(\"button\", {\n        style: Object.assign({}, readerStyles.arrow, readerStyles.next),\n        onClick: this.next\n      }, \"\\u203A\")), showToc && toc && this.renderToc());\n    }\n  }]);\n  return ReactReader;\n}(_react.PureComponent);\nReactReader.defaultProps = {\n  loadingView: /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: _style.ReactReaderStyle.loadingView\n  }, \"Loading\\u2026\"),\n  locationChanged: null,\n  tocChanged: null,\n  showToc: true,\n  readerStyles: _style.ReactReaderStyle\n};\nReactReader.propTypes = {\n  title: _propTypes.default.string,\n  loadingView: _propTypes.default.element,\n  showToc: _propTypes.default.bool,\n  locationChanged: _propTypes.default.func,\n  tocChanged: _propTypes.default.func,\n  readerStyles: _propTypes.default.object,\n  epubViewStyles: _propTypes.default.object,\n  swipeable: _propTypes.default.bool\n};\nvar _default = ReactReader;\nexports.default = _default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"EpubView\", {\n  enumerable: true,\n  get: function get() {\n    return _EpubView.default;\n  }\n});\nObject.defineProperty(exports, \"EpubViewStyle\", {\n  enumerable: true,\n  get: function get() {\n    return _style.EpubViewStyle;\n  }\n});\nObject.defineProperty(exports, \"ReactReader\", {\n  enumerable: true,\n  get: function get() {\n    return _ReactReader.default;\n  }\n});\nObject.defineProperty(exports, \"ReactReaderStyle\", {\n  enumerable: true,\n  get: function get() {\n    return _style2.ReactReaderStyle;\n  }\n});\nvar _EpubView = _interopRequireDefault(require(\"./EpubView/EpubView\"));\nvar _style = require(\"./EpubView/style\");\nvar _ReactReader = _interopRequireDefault(require(\"./ReactReader/ReactReader\"));\nvar _style2 = require(\"./ReactReader/style\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }"],
  "mappings": "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",
  "names": ["Element", "i", "checker", "requestAnimationFrame", "uuid", "parent", "el", "prop", "treeWalker", "type", "require_path", "parent", "nodeList", "parent", "mimeTypes", "node", "_width", "_height", "_scale", "_minimum", "_maximum", "_scalable", "selector", "rule", "parent", "offset", "left", "view", "tempUrl", "item", "deferred", "tempUrl", "nodeInterop", "require_lib", "_getRequireWildcardCache", "nodeInterop", "o", "r", "_setPrototypeOf", "p", "_getPrototypeOf", "EpubView", "require_style", "o", "_getRequireWildcardCache", "nodeInterop", "_setPrototypeOf", "p", "_getPrototypeOf", "Swipeable", "TocItem", "ReactReader", "require_lib"]
}
